{"version":3,"sources":["../node_modules/@noble/hashes/src/cryptoNode.ts","../node_modules/@noble/hashes/src/utils.ts","../node_modules/@xrplf/isomorphic/src/utils/shared.ts","../node_modules/@xrplf/isomorphic/src/utils/index.ts","../node_modules/@scure/base/index.ts","../node_modules/@xrplf/isomorphic/src/internal/normalizeInput.ts","../node_modules/@xrplf/isomorphic/src/internal/wrapCryptoCreateHash.ts","../node_modules/@xrplf/isomorphic/src/sha256/index.ts","../node_modules/ripple-address-codec/src/utils.ts","../node_modules/ripple-address-codec/src/xrp-codec.ts","../node_modules/ripple-address-codec/src/index.ts","../node_modules/@xrplf/isomorphic/src/ripemd160/index.ts","../node_modules/@noble/hashes/src/_md.ts","../node_modules/@noble/hashes/src/_u64.ts","../node_modules/@noble/hashes/src/sha2.ts","../node_modules/@noble/hashes/src/hmac.ts","../node_modules/@noble/curves/src/utils.ts","../node_modules/@noble/curves/src/abstract/modular.ts","../node_modules/@noble/curves/src/abstract/curve.ts","../node_modules/@noble/curves/src/abstract/weierstrass.ts","../node_modules/@noble/curves/src/_shortw_utils.ts","../node_modules/@noble/curves/src/abstract/hash-to-curve.ts","../node_modules/@noble/curves/src/secp256k1.ts","../node_modules/@xrplf/isomorphic/src/sha512/index.ts","../node_modules/@noble/curves/src/abstract/utils.ts","../node_modules/ripple-keypairs/src/utils/Sha512.ts","../node_modules/ripple-keypairs/src/signing-schemes/secp256k1/utils.ts","../node_modules/ripple-keypairs/src/utils/assert.ts","../node_modules/ripple-keypairs/src/utils/getAlgorithmFromKey.ts","../node_modules/ripple-keypairs/src/signing-schemes/secp256k1/index.ts","../node_modules/@noble/curves/src/abstract/edwards.ts","../node_modules/@noble/curves/src/abstract/montgomery.ts","../node_modules/@noble/curves/src/ed25519.ts","../node_modules/ripple-keypairs/src/signing-schemes/ed25519/index.ts","../node_modules/ripple-keypairs/src/index.ts","../src/audit/chain.ts","../src/audit/logger.ts","../src/policy/types.ts","../src/policy/evaluator.ts","../src/policy/limits.ts","../src/policy/engine.ts","../src/keystore/secure-buffer.ts","../src/keystore/errors.ts","../src/keystore/local.ts","../src/keystore/index.ts","../src/xrpl/config.ts","../src/xrpl/client.ts","../src/signing/service.ts","../src/signing/multisig.ts","../src/utils/env.ts","../src/tools/wallet-create.ts","../src/tools/wallet-sign.ts","../src/tools/wallet-balance.ts","../src/tools/wallet-policy-check.ts","../src/tools/wallet-rotate.ts","../src/tools/wallet-list.ts","../src/tools/wallet-history.ts","../src/tools/wallet-fund.ts","../src/tools/policy-set.ts","../src/tools/tx-submit.ts","../src/tools/tx-decode.ts","../src/server.ts"],"names":["exports","randomBytes","encode","decode","join","padding","alphabet","hash","wbits","endo","tv5","c1","c2","r","s","verify","Prefix","p","eddsa","z2","crypto","path","z","stat","dropsToXrp","resolve","fs","lockData","DEFAULT_PASSWORD_POLICY","ARGON2_CONFIG","AES_CONFIG","Wallet"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Internal webcrypto alias.\n * We prefer WebCrypto aka globalThis.crypto, which exists in node.js 16+.\n * Falls back to Node.js built-in crypto for Node.js <=v14.\n * See utils.ts for details.\n * @module\n */\n// @ts-ignore\nimport * as nc from 'node:crypto';\nexport const crypto: any =\n  nc && typeof nc === 'object' && 'webcrypto' in nc\n    ? (nc.webcrypto as any)\n    : nc && typeof nc === 'object' && 'randomBytes' in nc\n      ? nc\n      : undefined;\n","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number): void {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\n/** Asserts something is hash */\nexport function ahash(h: IHash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.createHasher');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('digestInto() expects output buffer of length at least ' + min);\n  }\n}\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word: number, shift: number): number {\n  return (word << (32 - shift)) | (word >>> shift);\n}\n\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word: number, shift: number): number {\n  return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n/** The byte swap operation for uint32 */\nexport function byteSwap(word: number): number {\n  return (\n    ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff)\n  );\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** @deprecated */\nexport const byteSwapIfBE: typeof swap8IfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): Uint32Array {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n  return arr;\n}\n\nexport const swap32IfBE: (u: Uint32Array) => Uint32Array = isLE\n  ? (u: Uint32Array) => u\n  : byteSwap32;\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async (): Promise<void> => {};\n\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes: Uint8Array): string {\n  return new TextDecoder().decode(bytes);\n}\n\n/** Accepted input of hash functions. Strings are converted to byte arrays. */\nexport type Input = string | Uint8Array;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** KDFs can accept string or Uint8Array for user convenience. */\nexport type KDFInput = string | Uint8Array;\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data: KDFInput): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Hash interface. */\nexport type IHash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\n\n/** For runtime check if class implements interface */\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n  /**\n   * Clones hash instance. Unsafe: doesn't check whether `to` is valid. Can be used as `clone()`\n   * when no options are passed.\n   * Reasons to use `_cloneInto` instead of clone: 1) performance 2) reuse instance => all internal\n   * buffers are overwritten => causes buffer overwrite which is used for digest in some cases.\n   * There are no guarantees for clean-up because it's impossible in JS.\n   */\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  abstract clone(): T;\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n/** Hash function */\nexport type CHash = ReturnType<typeof createHasher>;\n/** Hash function with output */\nexport type CHashO = ReturnType<typeof createOptHasher>;\n/** XOF with output */\nexport type CHashXO = ReturnType<typeof createXOFer>;\n\n/** Wraps hash function, creating an interface on top of it */\nexport function createHasher<T extends Hash<T>>(\n  hashCons: () => Hash<T>\n): {\n  (msg: Input): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(): Hash<T>;\n} {\n  const hashC = (msg: Input): Uint8Array => hashCons().update(toBytes(msg)).digest();\n  const tmp = hashCons();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashCons();\n  return hashC;\n}\n\nexport function createOptHasher<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): Hash<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\n\nexport function createXOFer<H extends HashXOF<H>, T extends Object>(\n  hashCons: (opts?: T) => HashXOF<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): HashXOF<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\nexport const wrapConstructor: typeof createHasher = createHasher;\nexport const wrapConstructorWithOpts: typeof createOptHasher = createOptHasher;\nexport const wrapXOFConstructorWithOpts: typeof createXOFer = createXOFer;\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto && typeof crypto.getRandomValues === 'function') {\n    return crypto.getRandomValues(new Uint8Array(bytesLength));\n  }\n  // Legacy Node.js compatibility\n  if (crypto && typeof crypto.randomBytes === 'function') {\n    return Uint8Array.from(crypto.randomBytes(bytesLength));\n  }\n  throw new Error('crypto.getRandomValues must be defined');\n}\n","import { concatBytes } from '@noble/hashes/utils'\n\nexport const HEX_REGEX = /^[A-F0-9]*$/iu\n\nexport function concat(views: Uint8Array[]): Uint8Array {\n  return concatBytes(...views)\n}\n\nexport function equal(buf1: Uint8Array, buf2: Uint8Array): boolean {\n  if (buf1.byteLength !== buf2.byteLength) {\n    return false\n  }\n  const dv1 = new Int8Array(buf1)\n  const dv2 = new Int8Array(buf2)\n  for (let i = 0; i !== buf1.byteLength; i++) {\n    if (dv1[i] !== dv2[i]) {\n      return false\n    }\n  }\n  return true\n}\n","import { randomBytes as cryptoRandomBytes } from 'crypto'\nimport type { BytesToHexFn, HexToBytesFn, RandomBytesFn } from './types'\nimport { HexToStringFn, StringToHexFn } from './types'\nimport { HEX_REGEX } from './shared'\n\nconst OriginalBuffer = Symbol('OriginalBuffer')\n\n/**\n * An extended Uint8Array that incorporates a reference to the original Node.js Buffer.\n *\n * When converting a Node.js Buffer to a Uint8Array, there's an optimization that shares\n * the memory of the original Buffer with the resulting Uint8Array instead of copying data.\n * The Uint8ArrayWithReference interface is used to attach a reference to the original Buffer, ensuring\n * its persistence in memory (preventing garbage collection) as long as the Uint8Array exists.\n * This strategy upholds the ownership semantics of the slice of the ArrayBuffer.\n */\ninterface Uint8ArrayWithReference extends Uint8Array {\n  [OriginalBuffer]: Buffer\n}\n\n/**\n * Converts a Node.js Buffer to a Uint8Array for uniform behavior with browser implementations.\n *\n * Choices:\n * 1. Directly returning the Buffer:\n *    - Operation: Return Buffer as is (a Buffer *IS* an instanceof Uint8Array).\n *    - Pros: Most memory and performance efficient.\n *    - Cons: Violates strict Uint8Array typing and may lead to issues where Buffer-specific features are [ab]used.\n *\n * 2. Using `new Uint8Array(buffer)` or `Uint8Array.from(buffer)`:\n *    - Operation: Copies the buffer's data into a new Uint8Array.\n *    - Pros: Ensures data isolation; memory-safe.\n *    - Cons: Less performant due to data duplication.\n *\n * 3. Using buf.buffer slice:\n *    - Operation: Shares memory between Buffer and Uint8Array.\n *    - Pros: Performant.\n *    - Cons: Risks with shared memory and potential for invalid references.\n *\n * 4. Using buf.buffer slice and keeping a Buffer reference for ownership semantics:\n *    - Operation: Shares memory and associates the original Buffer with the resulting Uint8Array.\n *    - Pros: Performant while ensuring the original Buffer isn't garbage collected.\n *    - Cons: Risks with shared memory but mitigates potential for invalid references.\n *\n * The chosen method (4) prioritizes performance by sharing memory while ensuring buffer ownership.\n *\n * @param {Buffer} buffer - The Node.js Buffer to convert.\n * @returns {Uint8Array} Resulting Uint8Array sharing the same memory as the Buffer and maintaining a reference to it.\n */\nfunction toUint8Array(buffer: Buffer): Uint8Array {\n  const u8Array = new Uint8Array(\n    buffer.buffer.slice(\n      buffer.byteOffset,\n      buffer.byteOffset + buffer.byteLength,\n    ),\n  ) as Uint8ArrayWithReference\n  u8Array[OriginalBuffer] = buffer\n  return u8Array\n}\n\n/* eslint-disable func-style -- Typed to ensure uniformity between node and browser implementations and docs */\nexport const bytesToHex: typeof BytesToHexFn = (bytes) => {\n  const buf = Buffer.from(bytes)\n  return buf.toString('hex').toUpperCase()\n}\n\nexport const hexToBytes: typeof HexToBytesFn = (hex) => {\n  if (!HEX_REGEX.test(hex)) {\n    throw new Error('Invalid hex string')\n  }\n  return toUint8Array(Buffer.from(hex, 'hex'))\n}\n\nexport const randomBytes: typeof RandomBytesFn = (size) => {\n  return toUint8Array(cryptoRandomBytes(size))\n}\n\nexport const hexToString: typeof HexToStringFn = (\n  hex: string,\n  encoding = 'utf8',\n): string => {\n  if (!HEX_REGEX.test(hex)) {\n    throw new Error('Invalid hex string')\n  }\n  return new TextDecoder(encoding).decode(hexToBytes(hex))\n}\n\nexport const stringToHex: typeof StringToHexFn = (string: string): string => {\n  return bytesToHex(new TextEncoder().encode(string))\n}\n/* eslint-enable func-style */\n\nexport * from './shared'\n","/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\nexport interface Coder<F, T> {\n  encode(from: F): T;\n  decode(to: T): F;\n}\n\nexport interface BytesCoder extends Coder<Uint8Array, string> {\n  encode: (data: Uint8Array) => string;\n  decode: (str: string) => Uint8Array;\n}\n\nfunction isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\nfunction isArrayOf(isString: boolean, arr: any[]) {\n  if (!Array.isArray(arr)) return false;\n  if (arr.length === 0) return true;\n  if (isString) {\n    return arr.every((item) => typeof item === 'string');\n  } else {\n    return arr.every((item) => Number.isSafeInteger(item));\n  }\n}\n\n// no abytes: seems to have 10% slowdown. Why?!\n\nfunction afn(input: Function): input is Function {\n  if (typeof input !== 'function') throw new Error('function expected');\n  return true;\n}\n\nfunction astr(label: string, input: unknown): input is string {\n  if (typeof input !== 'string') throw new Error(`${label}: string expected`);\n  return true;\n}\n\nfunction anumber(n: number): void {\n  if (!Number.isSafeInteger(n)) throw new Error(`invalid integer: ${n}`);\n}\n\nfunction aArr(input: any[]) {\n  if (!Array.isArray(input)) throw new Error('array expected');\n}\nfunction astrArr(label: string, input: string[]) {\n  if (!isArrayOf(true, input)) throw new Error(`${label}: array of strings expected`);\n}\nfunction anumArr(label: string, input: number[]) {\n  if (!isArrayOf(false, input)) throw new Error(`${label}: array of numbers expected`);\n}\n\n// TODO: some recusive type inference so it would check correct order of input/output inside rest?\n// like <string, number>, <number, bytes>, <bytes, float>\ntype Chain = [Coder<any, any>, ...Coder<any, any>[]];\n// Extract info from Coder type\ntype Input<F> = F extends Coder<infer T, any> ? T : never;\ntype Output<F> = F extends Coder<any, infer T> ? T : never;\n// Generic function for arrays\ntype First<T> = T extends [infer U, ...any[]] ? U : never;\ntype Last<T> = T extends [...any[], infer U] ? U : never;\ntype Tail<T> = T extends [any, ...infer U] ? U : never;\n\ntype AsChain<C extends Chain, Rest = Tail<C>> = {\n  // C[K] = Coder<Input<C[K]>, Input<Rest[k]>>\n  [K in keyof C]: Coder<Input<C[K]>, Input<K extends keyof Rest ? Rest[K] : any>>;\n};\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain<T extends Chain & AsChain<T>>(...args: T): Coder<Input<First<T>>, Output<Last<T>>> {\n  const id = (a: any) => a;\n  // Wrap call in closure so JIT can inline calls\n  const wrap = (a: any, b: any) => (c: any) => a(b(c));\n  // Construct chain of args[-1].encode(args[-2].encode([...]))\n  const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n  // Construct chain of args[0].decode(args[1].decode(...))\n  const decode = args.map((x) => x.decode).reduce(wrap, id);\n  return { encode, decode };\n}\n\n/**\n * Encodes integer radix representation to array of strings using alphabet and back.\n * Could also be array of strings.\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(letters: string | string[]): Coder<number[], string[]> {\n  // mapping 1 to \"b\"\n  const lettersA = typeof letters === 'string' ? letters.split('') : letters;\n  const len = lettersA.length;\n  astrArr('alphabet', lettersA);\n\n  // mapping \"b\" to 1\n  const indexes = new Map(lettersA.map((l, i) => [l, i]));\n  return {\n    encode: (digits: number[]) => {\n      aArr(digits);\n      return digits.map((i) => {\n        if (!Number.isSafeInteger(i) || i < 0 || i >= len)\n          throw new Error(\n            `alphabet.encode: digit index outside alphabet \"${i}\". Allowed: ${letters}`\n          );\n        return lettersA[i]!;\n      });\n    },\n    decode: (input: string[]): number[] => {\n      aArr(input);\n      return input.map((letter) => {\n        astr('alphabet.decode', letter);\n        const i = indexes.get(letter);\n        if (i === undefined) throw new Error(`Unknown letter: \"${letter}\". Allowed: ${letters}`);\n        return i;\n      });\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = ''): Coder<string[], string> {\n  astr('join', separator);\n  return {\n    encode: (from) => {\n      astrArr('join.decode', from);\n      return from.join(separator);\n    },\n    decode: (to) => {\n      astr('join.decode', to);\n      return to.split(separator);\n    },\n  };\n}\n\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits: number, chr = '='): Coder<string[], string[]> {\n  anumber(bits);\n  astr('padding', chr);\n  return {\n    encode(data: string[]): string[] {\n      astrArr('padding.encode', data);\n      while ((data.length * bits) % 8) data.push(chr);\n      return data;\n    },\n    decode(input: string[]): string[] {\n      astrArr('padding.decode', input);\n      let end = input.length;\n      if ((end * bits) % 8)\n        throw new Error('padding: invalid, string should have whole number of bytes');\n      for (; end > 0 && input[end - 1] === chr; end--) {\n        const last = end - 1;\n        const byte = last * bits;\n        if (byte % 8 === 0) throw new Error('padding: invalid, string has too much padding');\n      }\n      return input.slice(0, end);\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize<T>(fn: (val: T) => T): Coder<T, T> {\n  afn(fn);\n  return { encode: (from: T) => from, decode: (to: T) => fn(to) };\n}\n\n/**\n * Slow: O(n^2) time complexity\n */\nfunction convertRadix(data: number[], from: number, to: number): number[] {\n  // base 1 is impossible\n  if (from < 2) throw new Error(`convertRadix: invalid from=${from}, base cannot be less than 2`);\n  if (to < 2) throw new Error(`convertRadix: invalid to=${to}, base cannot be less than 2`);\n  aArr(data);\n  if (!data.length) return [];\n  let pos = 0;\n  const res = [];\n  const digits = Array.from(data, (d) => {\n    anumber(d);\n    if (d < 0 || d >= from) throw new Error(`invalid integer: ${d}`);\n    return d;\n  });\n  const dlen = digits.length;\n  while (true) {\n    let carry = 0;\n    let done = true;\n    for (let i = pos; i < dlen; i++) {\n      const digit = digits[i]!;\n      const fromCarry = from * carry;\n      const digitBase = fromCarry + digit;\n      if (\n        !Number.isSafeInteger(digitBase) ||\n        fromCarry / from !== carry ||\n        digitBase - digit !== fromCarry\n      ) {\n        throw new Error('convertRadix: carry overflow');\n      }\n      const div = digitBase / to;\n      carry = digitBase % to;\n      const rounded = Math.floor(div);\n      digits[i] = rounded;\n      if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n        throw new Error('convertRadix: carry overflow');\n      if (!done) continue;\n      else if (!rounded) pos = i;\n      else done = false;\n    }\n    res.push(carry);\n    if (done) break;\n  }\n  for (let i = 0; i < data.length - 1 && data[i] === 0; i++) res.push(0);\n  return res.reverse();\n}\n\nconst gcd = (a: number, b: number): number => (b === 0 ? a : gcd(b, a % b));\nconst radix2carry = /* @__NO_SIDE_EFFECTS__ */ (from: number, to: number) =>\n  from + (to - gcd(from, to));\nconst powers: number[] = /* @__PURE__ */ (() => {\n  let res = [];\n  for (let i = 0; i < 40; i++) res.push(2 ** i);\n  return res;\n})();\n/**\n * Implemented with numbers, because BigInt is 5x slower\n */\nfunction convertRadix2(data: number[], from: number, to: number, padding: boolean): number[] {\n  aArr(data);\n  if (from <= 0 || from > 32) throw new Error(`convertRadix2: wrong from=${from}`);\n  if (to <= 0 || to > 32) throw new Error(`convertRadix2: wrong to=${to}`);\n  if (radix2carry(from, to) > 32) {\n    throw new Error(\n      `convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`\n    );\n  }\n  let carry = 0;\n  let pos = 0; // bitwise position in current element\n  const max = powers[from]!;\n  const mask = powers[to]! - 1;\n  const res: number[] = [];\n  for (const n of data) {\n    anumber(n);\n    if (n >= max) throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n    carry = (carry << from) | n;\n    if (pos + from > 32) throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n    pos += from;\n    for (; pos >= to; pos -= to) res.push(((carry >> (pos - to)) & mask) >>> 0);\n    const pow = powers[pos];\n    if (pow === undefined) throw new Error('invalid carry');\n    carry &= pow - 1; // clean carry, otherwise it will cause overflow\n  }\n  carry = (carry << (to - pos)) & mask;\n  if (!padding && pos >= from) throw new Error('Excess padding');\n  if (!padding && carry > 0) throw new Error(`Non-zero padding: ${carry}`);\n  if (padding && pos > 0) res.push(carry >>> 0);\n  return res;\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num: number): Coder<Uint8Array, number[]> {\n  anumber(num);\n  const _256 = 2 ** 8;\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix.encode input should be Uint8Array');\n      return convertRadix(Array.from(bytes), _256, num);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix.decode', digits);\n      return Uint8Array.from(convertRadix(digits, num, _256));\n    },\n  };\n}\n\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits: number, revPadding = false): Coder<Uint8Array, number[]> {\n  anumber(bits);\n  if (bits <= 0 || bits > 32) throw new Error('radix2: bits should be in (0..32]');\n  if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n    throw new Error('radix2: carry overflow');\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix2.encode input should be Uint8Array');\n      return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix2.decode', digits);\n      return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n    },\n  };\n}\n\ntype ArgumentTypes<F extends Function> = F extends (...args: infer A) => any ? A : never;\nfunction unsafeWrapper<T extends (...args: any) => any>(fn: T) {\n  afn(fn);\n  return function (...args: ArgumentTypes<T>): ReturnType<T> | void {\n    try {\n      return fn.apply(null, args);\n    } catch (e) {}\n  };\n}\n\nfunction checksum(\n  len: number,\n  fn: (data: Uint8Array) => Uint8Array\n): Coder<Uint8Array, Uint8Array> {\n  anumber(len);\n  afn(fn);\n  return {\n    encode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.encode: input should be Uint8Array');\n      const sum = fn(data).slice(0, len);\n      const res = new Uint8Array(data.length + len);\n      res.set(data);\n      res.set(sum, data.length);\n      return res;\n    },\n    decode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.decode: input should be Uint8Array');\n      const payload = data.slice(0, -len);\n      const oldChecksum = data.slice(-len);\n      const newChecksum = fn(payload).slice(0, len);\n      for (let i = 0; i < len; i++)\n        if (newChecksum[i] !== oldChecksum[i]) throw new Error('Invalid checksum');\n      return payload;\n    },\n  };\n}\n\n// prettier-ignore\nexport const utils: { alphabet: typeof alphabet; chain: typeof chain; checksum: typeof checksum; convertRadix: typeof convertRadix; convertRadix2: typeof convertRadix2; radix: typeof radix; radix2: typeof radix2; join: typeof join; padding: typeof padding; } = {\n  alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n\n// RFC 4648 aka RFC 3548\n// ---------------------\n\n/**\n * base16 encoding from RFC 4648.\n * @example\n * ```js\n * base16.encode(Uint8Array.from([0x12, 0xab]));\n * // => '12AB'\n * ```\n */\nexport const base16: BytesCoder = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\n\n/**\n * base32 encoding from RFC 4648. Has padding.\n * Use `base32nopad` for unpadded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ===='\n * base32.decode('CKVQ====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding.\n * Use `base32` for padded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ'\n * base32nopad.decode('CKVQ');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32nopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Padded. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hexnopad` for unpadded version.\n * @example\n * ```js\n * base32hex.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG===='\n * base32hex.decode('2ALG====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hex: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hex` for padded version.\n * @example\n * ```js\n * base32hexnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG'\n * base32hexnopad.decode('2ALG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hexnopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Doug Crockford's version.\n * https://www.crockford.com/base32.html\n * @example\n * ```js\n * base32crockford.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ANG'\n * base32crockford.decode('2ANG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32crockford: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'),\n  join(''),\n  normalize((s: string) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1'))\n);\n\n// Built-in base64 conversion https://caniuse.com/mdn-javascript_builtins_uint8array_frombase64\n// prettier-ignore\nconst hasBase64Builtin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toBase64 === 'function' &&\n  typeof (Uint8Array as any).fromBase64 === 'function')();\n\nconst decodeBase64Builtin = (s: string, isUrl: boolean) => {\n  astr('base64', s);\n  const re = isUrl ? /^[A-Za-z0-9=_-]+$/ : /^[A-Za-z0-9=+/]+$/;\n  const alphabet = isUrl ? 'base64url' : 'base64';\n  if (s.length > 0 && !re.test(s)) throw new Error('invalid base64');\n  return (Uint8Array as any).fromBase64(s, { alphabet, lastChunkHandling: 'strict' });\n};\n\n/**\n * base64 from RFC 4648. Padded.\n * Use `base64nopad` for unpadded version.\n * Also check out `base64url`, `base64urlnopad`.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64(); },\n  decode(s) { return decodeBase64Builtin(s, false); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  padding(6),\n  join('')\n);\n/**\n * base64 from RFC 4648. No padding.\n * Use `base64` for padded version.\n * @example\n * ```js\n * base64nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64nopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64nopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. Padded.\n * Use `base64urlnopad` for unpadded version.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64url.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64url.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64url: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64({ alphabet: 'base64url' }); },\n  decode(s) { return decodeBase64Builtin(s, true); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  padding(6),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. No padding.\n * Use `base64url` for padded version.\n * @example\n * ```js\n * base64urlnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64urlnopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64urlnopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  join('')\n);\n\n// base58 code\n// -----------\nconst genBase58 = /* @__NO_SIDE_EFFECTS__ */ (abc: string) =>\n  chain(radix(58), alphabet(abc), join(''));\n\n/**\n * base58: base64 without ambigous characters +, /, 0, O, I, l.\n * Quadratic (O(n^2)) - so, can't be used on large inputs.\n * @example\n * ```js\n * base58.decode('01abcdef');\n * // => '3UhJW'\n * ```\n */\nexport const base58: BytesCoder = genBase58(\n  '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n);\n/**\n * base58: flickr version. Check out `base58`.\n */\nexport const base58flickr: BytesCoder = genBase58(\n  '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n);\n/**\n * base58: XRP version. Check out `base58`.\n */\nexport const base58xrp: BytesCoder = genBase58(\n  'rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz'\n);\n\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\n\n/**\n * base58: XMR version. Check out `base58`.\n * Done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n * Block encoding significantly reduces quadratic complexity of base58.\n */\nexport const base58xmr: BytesCoder = {\n  encode(data: Uint8Array) {\n    let res = '';\n    for (let i = 0; i < data.length; i += 8) {\n      const block = data.subarray(i, i + 8);\n      res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length]!, '1');\n    }\n    return res;\n  },\n  decode(str: string) {\n    let res: number[] = [];\n    for (let i = 0; i < str.length; i += 11) {\n      const slice = str.slice(i, i + 11);\n      const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n      const block = base58.decode(slice);\n      for (let j = 0; j < block.length - blockLen; j++) {\n        if (block[j] !== 0) throw new Error('base58xmr: wrong padding');\n      }\n      res = res.concat(Array.from(block.slice(block.length - blockLen)));\n    }\n    return Uint8Array.from(res);\n  },\n};\n\n/**\n * Method, which creates base58check encoder.\n * Requires function, calculating sha256.\n */\nexport const createBase58check = (sha256: (data: Uint8Array) => Uint8Array): BytesCoder =>\n  chain(\n    checksum(4, (data) => sha256(sha256(data))),\n    base58\n  );\n\n/**\n * Use `createBase58check` instead.\n * @deprecated\n */\nexport const base58check: (sha256: (data: Uint8Array) => Uint8Array) => BytesCoder =\n  createBase58check;\n\n// Bech32 code\n// -----------\nexport interface Bech32Decoded<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n}\nexport interface Bech32DecodedWithArray<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n  bytes: Uint8Array;\n}\n\nconst BECH_ALPHABET: Coder<number[], string> = chain(\n  alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'),\n  join('')\n);\n\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre: number): number {\n  const b = pre >> 25;\n  let chk = (pre & 0x1ffffff) << 5;\n  for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n    if (((b >> i) & 1) === 1) chk ^= POLYMOD_GENERATORS[i]!;\n  }\n  return chk;\n}\n\nfunction bechChecksum(prefix: string, words: number[], encodingConst = 1): string {\n  const len = prefix.length;\n  let chk = 1;\n  for (let i = 0; i < len; i++) {\n    const c = prefix.charCodeAt(i);\n    if (c < 33 || c > 126) throw new Error(`Invalid prefix (${prefix})`);\n    chk = bech32Polymod(chk) ^ (c >> 5);\n  }\n  chk = bech32Polymod(chk);\n  for (let i = 0; i < len; i++) chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n  for (let v of words) chk = bech32Polymod(chk) ^ v;\n  for (let i = 0; i < 6; i++) chk = bech32Polymod(chk);\n  chk ^= encodingConst;\n  return BECH_ALPHABET.encode(convertRadix2([chk % powers[30]!], 30, 5, false));\n}\n\nexport interface Bech32 {\n  encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit?: number | false\n  ): `${Lowercase<Prefix>}1${string}`;\n  decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  encodeFromBytes(prefix: string, bytes: Uint8Array): string;\n  decodeToBytes(str: string): Bech32DecodedWithArray;\n  decodeUnsafe(str: string, limit?: number | false): void | Bech32Decoded<string>;\n  fromWords(to: number[]): Uint8Array;\n  fromWordsUnsafe(to: number[]): void | Uint8Array;\n  toWords(from: Uint8Array): number[];\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding: 'bech32' | 'bech32m'): Bech32 {\n  const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n  const _words = radix2(5);\n  const fromWords = _words.decode;\n  const toWords = _words.encode;\n  const fromWordsUnsafe = unsafeWrapper(fromWords);\n\n  function encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit: number | false = 90\n  ): `${Lowercase<Prefix>}1${string}` {\n    astr('bech32.encode prefix', prefix);\n    if (isBytes(words)) words = Array.from(words);\n    anumArr('bech32.encode', words);\n    const plen = prefix.length;\n    if (plen === 0) throw new TypeError(`Invalid prefix length ${plen}`);\n    const actualLength = plen + 7 + words.length;\n    if (limit !== false && actualLength > limit)\n      throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n    const lowered = prefix.toLowerCase();\n    const sum = bechChecksum(lowered, words, ENCODING_CONST);\n    return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}` as `${Lowercase<Prefix>}1${string}`;\n  }\n\n  function decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  function decode(str: string, limit?: number | false): Bech32Decoded;\n  function decode(str: string, limit: number | false = 90): Bech32Decoded {\n    astr('bech32.decode input', str);\n    const slen = str.length;\n    if (slen < 8 || (limit !== false && slen > limit))\n      throw new TypeError(`invalid string length: ${slen} (${str}). Expected (8..${limit})`);\n    // don't allow mixed case\n    const lowered = str.toLowerCase();\n    if (str !== lowered && str !== str.toUpperCase())\n      throw new Error(`String must be lowercase or uppercase`);\n    const sepIndex = lowered.lastIndexOf('1');\n    if (sepIndex === 0 || sepIndex === -1)\n      throw new Error(`Letter \"1\" must be present between prefix and data only`);\n    const prefix = lowered.slice(0, sepIndex);\n    const data = lowered.slice(sepIndex + 1);\n    if (data.length < 6) throw new Error('Data must be at least 6 characters long');\n    const words = BECH_ALPHABET.decode(data).slice(0, -6);\n    const sum = bechChecksum(prefix, words, ENCODING_CONST);\n    if (!data.endsWith(sum)) throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n    return { prefix, words };\n  }\n\n  const decodeUnsafe = unsafeWrapper(decode);\n\n  function decodeToBytes(str: string): Bech32DecodedWithArray {\n    const { prefix, words } = decode(str, false);\n    return { prefix, words, bytes: fromWords(words) };\n  }\n\n  function encodeFromBytes(prefix: string, bytes: Uint8Array) {\n    return encode(prefix, toWords(bytes));\n  }\n\n  return {\n    encode,\n    decode,\n    encodeFromBytes,\n    decodeToBytes,\n    decodeUnsafe,\n    fromWords,\n    fromWordsUnsafe,\n    toWords,\n  };\n}\n\n/**\n * bech32 from BIP 173. Operates on words.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32: Bech32 = genBech32('bech32');\n\n/**\n * bech32m from BIP 350. Operates on words.\n * It was to mitigate `bech32` weaknesses.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32m: Bech32 = genBech32('bech32m');\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * UTF-8-to-byte decoder. Uses built-in TextDecoder / TextEncoder.\n * @example\n * ```js\n * const b = utf8.decode(\"hey\"); // => new Uint8Array([ 104, 101, 121 ])\n * const str = utf8.encode(b); // \"hey\"\n * ```\n */\nexport const utf8: BytesCoder = {\n  encode: (data) => new TextDecoder().decode(data),\n  decode: (str) => new TextEncoder().encode(str),\n};\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\n// prettier-ignore\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toHex === 'function' &&\n  typeof (Uint8Array as any).fromHex === 'function')();\n// prettier-ignore\nconst hexBuiltin: BytesCoder = {\n  encode(data) { abytes(data); return (data as any).toHex(); },\n  decode(s) { astr('hex', s); return (Uint8Array as any).fromHex(s); },\n};\n/**\n * hex string decoder. Uses built-in function, when available.\n * @example\n * ```js\n * const b = hex.decode(\"0102ff\"); // => new Uint8Array([ 1, 2, 255 ])\n * const str = hex.encode(b); // \"0102ff\"\n * ```\n */\nexport const hex: BytesCoder = hasHexBuiltin\n  ? hexBuiltin\n  : chain(\n      radix2(4),\n      alphabet('0123456789abcdef'),\n      join(''),\n      normalize((s: string) => {\n        if (typeof s !== 'string' || s.length % 2 !== 0)\n          throw new TypeError(\n            `hex.decode: expected string, got ${typeof s} with length ${s.length}`\n          );\n        return s.toLowerCase();\n      })\n    );\n\nexport type SomeCoders = {\n  utf8: BytesCoder;\n  hex: BytesCoder;\n  base16: BytesCoder;\n  base32: BytesCoder;\n  base64: BytesCoder;\n  base64url: BytesCoder;\n  base58: BytesCoder;\n  base58xmr: BytesCoder;\n};\n// prettier-ignore\nconst CODERS: SomeCoders = {\n  utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\ntype CoderType = keyof SomeCoders;\nconst coderTypeError =\n  'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\n\n/** @deprecated */\nexport const bytesToString = (type: CoderType, bytes: Uint8Array): string => {\n  if (typeof type !== 'string' || !CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (!isBytes(bytes)) throw new TypeError('bytesToString() expects Uint8Array');\n  return CODERS[type].encode(bytes);\n};\n\n/** @deprecated */\nexport const str: (type: CoderType, bytes: Uint8Array) => string = bytesToString; // as in python, but for bytes only\n\n/** @deprecated */\nexport const stringToBytes = (type: CoderType, str: string): Uint8Array => {\n  if (!CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (typeof str !== 'string') throw new TypeError('stringToBytes() expects string');\n  return CODERS[type].decode(str);\n};\n/** @deprecated */\nexport const bytes: (type: CoderType, str: string) => Uint8Array = stringToBytes;\n","import { Input } from './types'\n\n/**\n * Normalize a string, number array, or Uint8Array to a string or Uint8Array.\n * Both node and noble lib functions accept these types.\n *\n * @param input - value to normalize\n */\nexport default function normalizeInput(input: Input): string | Uint8Array {\n  return Array.isArray(input) ? new Uint8Array(input) : input\n}\n","import { createHash } from 'crypto'\nimport { Hash, HashFn, Input } from './types'\nimport normalizeInput from './normalizeInput'\n\n/**\n * Wrap createHash from node to provide an interface that is isomorphic\n *\n * @param type - the hash name\n * @param fn - {createHash} the hash factory\n */\nexport default function wrapCryptoCreateHash(\n  type: string,\n  fn: typeof createHash,\n): HashFn {\n  function hashFn(input: Input): Uint8Array {\n    return fn(type).update(normalizeInput(input)).digest()\n  }\n\n  hashFn.create = (): Hash => {\n    const hash = fn(type)\n    return {\n      update(input: Input): Hash {\n        hash.update(normalizeInput(input))\n        return this\n      },\n      digest(): Uint8Array {\n        return hash.digest()\n      },\n    }\n  }\n  return hashFn\n}\n","import { createHash } from 'crypto'\nimport wrapCryptoCreateHash from '../internal/wrapCryptoCreateHash'\n\n/**\n * Wrap node's native sha256 implementation in HashFn\n */\nexport const sha256 = wrapCryptoCreateHash('sha256', createHash)\n","export type ByteArray = number[] | Uint8Array\n\n/**\n * Check whether two sequences (e.g. Arrays of numbers) are equal.\n *\n * @param arr1 - One of the arrays to compare.\n * @param arr2 - The other array to compare.\n */\nexport function arrayEqual(arr1: ByteArray, arr2: ByteArray): boolean {\n  if (arr1.length !== arr2.length) {\n    return false\n  }\n  return arr1.every((value, index) => value === arr2[index])\n}\n\n/**\n * Check whether a value is a scalar\n *\n * @param val - The value to check.\n */\nfunction isScalar(val: ByteArray | number): val is number {\n  return typeof val === 'number'\n}\n\n/**\n * Concatenate all `arguments` into a single array. Each argument can be either\n * a single element or a sequence, which has a `length` property and supports\n * element retrieval via sequence[ix].\n *\n * > concatArgs(1, [2, 3], Uint8Array.from([4,5]), new Uint8Array([6, 7]));\n * [1,2,3,4,5,6,7]\n *\n * @param args - Concatenate of these args into a single array.\n * @returns Array of concatenated arguments\n */\n\nexport function concatArgs(...args: Array<number | ByteArray>): number[] {\n  return args.flatMap((arg) => {\n    return isScalar(arg) ? [arg] : Array.from(arg)\n  })\n}\n","/**\n * Codec class\n */\n\nimport { base58xrp, BytesCoder } from '@scure/base'\nimport { sha256 } from '@xrplf/isomorphic/sha256'\n\nimport { arrayEqual, concatArgs, ByteArray } from './utils'\n\nclass Codec {\n  private readonly _sha256: (bytes: ByteArray) => Uint8Array\n  private readonly _codec: BytesCoder\n\n  public constructor(options: { sha256: (bytes: ByteArray) => Uint8Array }) {\n    this._sha256 = options.sha256\n    this._codec = base58xrp\n  }\n\n  /**\n   * Encoder.\n   *\n   * @param bytes - Uint8Array of data to encode.\n   * @param opts - Options object including the version bytes and the expected length of the data to encode.\n   */\n  public encode(\n    bytes: ByteArray,\n    opts: {\n      versions: number[]\n      expectedLength: number\n    },\n  ): string {\n    const versions = opts.versions\n    return this._encodeVersioned(bytes, versions, opts.expectedLength)\n  }\n\n  /**\n   * Decoder.\n   *\n   * @param base58string - Base58Check-encoded string to decode.\n   * @param opts - Options object including the version byte(s) and the expected length of the data after decoding.\n   */\n  /* eslint-disable max-lines-per-function --\n   * TODO refactor */\n  public decode(\n    base58string: string,\n    opts: {\n      versions: Array<number | number[]>\n      expectedLength?: number\n      versionTypes?: ['ed25519', 'secp256k1']\n    },\n  ): {\n    version: number[]\n    bytes: Uint8Array\n    type: 'ed25519' | 'secp256k1' | null\n  } {\n    const versions = opts.versions\n    const types = opts.versionTypes\n\n    const withoutSum = this.decodeChecked(base58string)\n\n    if (versions.length > 1 && !opts.expectedLength) {\n      throw new Error(\n        'expectedLength is required because there are >= 2 possible versions',\n      )\n    }\n    const versionLengthGuess =\n      typeof versions[0] === 'number' ? 1 : versions[0].length\n    const payloadLength =\n      opts.expectedLength ?? withoutSum.length - versionLengthGuess\n    const versionBytes = withoutSum.slice(0, -payloadLength)\n    const payload = withoutSum.slice(-payloadLength)\n\n    for (let i = 0; i < versions.length; i++) {\n      /* eslint-disable @typescript-eslint/consistent-type-assertions --\n       * TODO refactor */\n      const version: number[] = Array.isArray(versions[i])\n        ? (versions[i] as number[])\n        : [versions[i] as number]\n      if (arrayEqual(versionBytes, version)) {\n        return {\n          version,\n          bytes: payload,\n          type: types ? types[i] : null,\n        }\n      }\n      /* eslint-enable @typescript-eslint/consistent-type-assertions */\n    }\n\n    throw new Error(\n      'version_invalid: version bytes do not match any of the provided version(s)',\n    )\n  }\n\n  public encodeChecked(bytes: ByteArray): string {\n    const check = this._sha256(this._sha256(bytes)).slice(0, 4)\n    return this._encodeRaw(Uint8Array.from(concatArgs(bytes, check)))\n  }\n\n  public decodeChecked(base58string: string): Uint8Array {\n    const intArray = this._decodeRaw(base58string)\n    if (intArray.byteLength < 5) {\n      throw new Error('invalid_input_size: decoded data must have length >= 5')\n    }\n    if (!this._verifyCheckSum(intArray)) {\n      throw new Error('checksum_invalid')\n    }\n    return intArray.slice(0, -4)\n  }\n\n  private _encodeVersioned(\n    bytes: ByteArray,\n    versions: number[],\n    expectedLength: number,\n  ): string {\n    if (!checkByteLength(bytes, expectedLength)) {\n      throw new Error(\n        'unexpected_payload_length: bytes.length does not match expectedLength.' +\n          ' Ensure that the bytes are a Uint8Array.',\n      )\n    }\n    return this.encodeChecked(concatArgs(versions, bytes))\n  }\n\n  private _encodeRaw(bytes: ByteArray): string {\n    return this._codec.encode(Uint8Array.from(bytes))\n  }\n  /* eslint-enable max-lines-per-function */\n\n  private _decodeRaw(base58string: string): Uint8Array {\n    return this._codec.decode(base58string)\n  }\n\n  private _verifyCheckSum(bytes: ByteArray): boolean {\n    const computed = this._sha256(this._sha256(bytes.slice(0, -4))).slice(0, 4)\n    const checksum = bytes.slice(-4)\n    return arrayEqual(computed, checksum)\n  }\n}\n\n/**\n * XRP codec\n */\n\n// base58 encodings: https://xrpl.org/base58-encodings.html\n// Account address (20 bytes)\nconst ACCOUNT_ID = 0\n// Account public key (33 bytes)\nconst ACCOUNT_PUBLIC_KEY = 0x23\n// 33; Seed value (for secret keys) (16 bytes)\nconst FAMILY_SEED = 0x21\n// 28; Validation public key (33 bytes)\nconst NODE_PUBLIC = 0x1c\n\n// [1, 225, 75]\nconst ED25519_SEED = [0x01, 0xe1, 0x4b]\n\nconst codecOptions = {\n  sha256,\n}\n\nconst codecWithXrpAlphabet = new Codec(codecOptions)\n\nexport const codec = codecWithXrpAlphabet\n\n// entropy is a Uint8Array of size 16\n// type is 'ed25519' or 'secp256k1'\nexport function encodeSeed(\n  entropy: ByteArray,\n  type: 'ed25519' | 'secp256k1',\n): string {\n  if (!checkByteLength(entropy, 16)) {\n    throw new Error('entropy must have length 16')\n  }\n  const opts = {\n    expectedLength: 16,\n\n    // for secp256k1, use `FAMILY_SEED`\n    versions: type === 'ed25519' ? ED25519_SEED : [FAMILY_SEED],\n  }\n\n  // prefixes entropy with version bytes\n  return codecWithXrpAlphabet.encode(entropy, opts)\n}\n\nexport function decodeSeed(\n  seed: string,\n  opts: {\n    versionTypes: ['ed25519', 'secp256k1']\n    versions: Array<number | number[]>\n    expectedLength: number\n  } = {\n    versionTypes: ['ed25519', 'secp256k1'],\n    versions: [ED25519_SEED, FAMILY_SEED],\n    expectedLength: 16,\n  },\n): {\n  version: number[]\n  bytes: Uint8Array\n  type: 'ed25519' | 'secp256k1' | null\n} {\n  return codecWithXrpAlphabet.decode(seed, opts)\n}\n\nexport function encodeAccountID(bytes: ByteArray): string {\n  const opts = { versions: [ACCOUNT_ID], expectedLength: 20 }\n  return codecWithXrpAlphabet.encode(bytes, opts)\n}\n\n/* eslint-disable import/no-unused-modules ---\n * unclear why this is aliased but we should keep it in case someone else is\n * importing it with the aliased name */\nexport const encodeAddress = encodeAccountID\n/* eslint-enable import/no-unused-modules */\n\nexport function decodeAccountID(accountId: string): Uint8Array {\n  const opts = { versions: [ACCOUNT_ID], expectedLength: 20 }\n  return codecWithXrpAlphabet.decode(accountId, opts).bytes\n}\n\n/* eslint-disable import/no-unused-modules ---\n * unclear why this is aliased but we should keep it in case someone else is\n * importing it with the aliased name */\nexport const decodeAddress = decodeAccountID\n/* eslint-enable import/no-unused-modules */\n\nexport function decodeNodePublic(base58string: string): Uint8Array {\n  const opts = { versions: [NODE_PUBLIC], expectedLength: 33 }\n  return codecWithXrpAlphabet.decode(base58string, opts).bytes\n}\n\nexport function encodeNodePublic(bytes: ByteArray): string {\n  const opts = { versions: [NODE_PUBLIC], expectedLength: 33 }\n  return codecWithXrpAlphabet.encode(bytes, opts)\n}\n\nexport function encodeAccountPublic(bytes: ByteArray): string {\n  const opts = { versions: [ACCOUNT_PUBLIC_KEY], expectedLength: 33 }\n  return codecWithXrpAlphabet.encode(bytes, opts)\n}\n\nexport function decodeAccountPublic(base58string: string): Uint8Array {\n  const opts = { versions: [ACCOUNT_PUBLIC_KEY], expectedLength: 33 }\n  return codecWithXrpAlphabet.decode(base58string, opts).bytes\n}\n\nexport function isValidClassicAddress(address: string): boolean {\n  try {\n    decodeAccountID(address)\n  } catch (_error) {\n    return false\n  }\n  return true\n}\n\nfunction checkByteLength(bytes: ByteArray, expectedLength: number): boolean {\n  return 'byteLength' in bytes\n    ? bytes.byteLength === expectedLength\n    : bytes.length === expectedLength\n}\n","import { concat, equal, hexToBytes } from '@xrplf/isomorphic/utils'\n\nimport {\n  codec,\n  encodeSeed,\n  decodeSeed,\n  encodeAccountID,\n  decodeAccountID,\n  encodeNodePublic,\n  decodeNodePublic,\n  encodeAccountPublic,\n  decodeAccountPublic,\n  isValidClassicAddress,\n} from './xrp-codec'\n\nconst PREFIX_BYTES = {\n  // 5, 68\n  main: Uint8Array.from([0x05, 0x44]),\n  // 4, 147\n  test: Uint8Array.from([0x04, 0x93]),\n}\n\nconst MAX_32_BIT_UNSIGNED_INT = 4294967295\n\nfunction classicAddressToXAddress(\n  classicAddress: string,\n  tag: number | false,\n  test: boolean,\n): string {\n  const accountId = decodeAccountID(classicAddress)\n  return encodeXAddress(accountId, tag, test)\n}\n\nfunction encodeXAddress(\n  accountId: Uint8Array,\n  tag: number | false,\n  test: boolean,\n): string {\n  if (accountId.length !== 20) {\n    // RIPEMD160 is 160 bits = 20 bytes\n    throw new Error('Account ID must be 20 bytes')\n  }\n  if (tag !== false && tag > MAX_32_BIT_UNSIGNED_INT) {\n    throw new Error('Invalid tag')\n  }\n  const theTag = tag || 0\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- Passing null is a common js mistake\n  const flag = tag === false || tag == null ? 0 : 1\n  /* eslint-disable no-bitwise ---\n   * need to use bitwise operations here */\n  const bytes = concat([\n    test ? PREFIX_BYTES.test : PREFIX_BYTES.main,\n    accountId,\n    Uint8Array.from([\n      // 0x00 if no tag, 0x01 if 32-bit tag\n      flag,\n      // first byte\n      theTag & 0xff,\n      // second byte\n      (theTag >> 8) & 0xff,\n      // third byte\n      (theTag >> 16) & 0xff,\n      // fourth byte\n      (theTag >> 24) & 0xff,\n      0,\n      0,\n      0,\n      // four zero bytes (reserved for 64-bit tags)\n      0,\n    ]),\n  ])\n  /* eslint-enable no-bitwise */\n  return codec.encodeChecked(bytes)\n}\n\nfunction xAddressToClassicAddress(xAddress: string): {\n  classicAddress: string\n  tag: number | false\n  test: boolean\n} {\n  /* eslint-disable @typescript-eslint/naming-convention --\n   * TODO 'test' should be something like 'isTest', do this later\n   */\n  const { accountId, tag, test } = decodeXAddress(xAddress)\n  /* eslint-enable @typescript-eslint/naming-convention */\n  const classicAddress = encodeAccountID(accountId)\n  return {\n    classicAddress,\n    tag,\n    test,\n  }\n}\n\nfunction decodeXAddress(xAddress: string): {\n  accountId: Uint8Array\n  tag: number | false\n  test: boolean\n} {\n  const decoded = codec.decodeChecked(xAddress)\n  /* eslint-disable @typescript-eslint/naming-convention --\n   * TODO 'test' should be something like 'isTest', do this later\n   */\n  const test = isUint8ArrayForTestAddress(decoded)\n  /* eslint-enable @typescript-eslint/naming-convention */\n  const accountId = decoded.slice(2, 22)\n  const tag = tagFromUint8Array(decoded)\n  return {\n    accountId,\n    tag,\n    test,\n  }\n}\n\nfunction isUint8ArrayForTestAddress(buf: Uint8Array): boolean {\n  const decodedPrefix = buf.slice(0, 2)\n  if (equal(PREFIX_BYTES.main, decodedPrefix)) {\n    return false\n  }\n  if (equal(PREFIX_BYTES.test, decodedPrefix)) {\n    return true\n  }\n\n  throw new Error('Invalid X-address: bad prefix')\n}\n\nfunction tagFromUint8Array(buf: Uint8Array): number | false {\n  const flag = buf[22]\n  if (flag >= 2) {\n    // No support for 64-bit tags at this time\n    throw new Error('Unsupported X-address')\n  }\n  if (flag === 1) {\n    // Little-endian to big-endian\n    return buf[23] + buf[24] * 0x100 + buf[25] * 0x10000 + buf[26] * 0x1000000\n  }\n  if (flag !== 0) {\n    throw new Error('flag must be zero to indicate no tag')\n  }\n  if (!equal(hexToBytes('0000000000000000'), buf.slice(23, 23 + 8))) {\n    throw new Error('remaining bytes must be zero')\n  }\n  return false\n}\n\nfunction isValidXAddress(xAddress: string): boolean {\n  try {\n    decodeXAddress(xAddress)\n  } catch (_error) {\n    return false\n  }\n  return true\n}\n\nexport {\n  // Codec with XRP alphabet\n  codec,\n  // Encode entropy as a \"seed\"\n  encodeSeed,\n  // Decode a seed into an object with its version, type, and bytes\n  decodeSeed,\n  // Encode bytes as a classic address (r...)\n  encodeAccountID,\n  // Decode a classic address to its raw bytes\n  decodeAccountID,\n  // Encode bytes to XRP Ledger node public key format\n  encodeNodePublic,\n  // Decode an XRP Ledger node public key into its raw bytes\n  decodeNodePublic,\n  // Encode a public key, as for payment channels\n  encodeAccountPublic,\n  // Decode a public key, as for payment channels\n  decodeAccountPublic,\n  // Check whether a classic address (r...) is valid\n  isValidClassicAddress,\n  // Derive X-address from classic address, tag, and network ID\n  classicAddressToXAddress,\n  // Encode account ID, tag, and network ID to X-address\n  encodeXAddress,\n  // Decode X-address to account ID, tag, and network ID\n  xAddressToClassicAddress,\n  // Convert X-address to classic address, tag, and network ID\n  decodeXAddress,\n  // Check whether an X-address (X...) is valid\n  isValidXAddress,\n}\n","import { createHash } from 'crypto'\nimport wrapCryptoCreateHash from '../internal/wrapCryptoCreateHash'\n\n/**\n * Wrap node's native ripemd160 implementation in HashFn\n */\nexport const ripemd160 = wrapCryptoCreateHash('ripemd160', createHash)\n","/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { type Input, Hash, abytes, aexists, aoutput, clean, createView, toBytes } from './utils.ts';\n\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(\n  view: DataView,\n  byteOffset: number,\n  value: bigint,\n  isLE: boolean\n): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n/** Choice: a ? b : c */\nexport function Chi(a: number, b: number, c: number): number {\n  return (a & b) ^ (~a & c);\n}\n\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a: number, b: number, c: number): number {\n  return (a & b) ^ (a & c) ^ (b & c);\n}\n\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport abstract class HashMD<T extends HashMD<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n\n  readonly blockLen: number;\n  readonly outputLen: number;\n  readonly padOffset: number;\n  readonly isLE: boolean;\n\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(blockLen: number, outputLen: number, padOffset: number, isLE: boolean) {\n    super();\n    this.blockLen = blockLen;\n    this.outputLen = outputLen;\n    this.padOffset = padOffset;\n    this.isLE = isLE;\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    aexists(this);\n    data = toBytes(data);\n    abytes(data);\n    const { view, buffer, blockLen } = this;\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    clean(this.buffer.subarray(pos));\n    // we have less than padOffset left in buffer, so we cannot put length in\n    // current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.destroyed = destroyed;\n    to.finished = finished;\n    to.length = length;\n    to.pos = pos;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n  0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n  0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\nfunction fromBig(\n  n: bigint,\n  le = false\n): {\n  h: number;\n  l: number;\n} {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false): Uint32Array[] {\n  const len = lst.length;\n  let Ah = new Uint32Array(len);\n  let Al = new Uint32Array(len);\n  for (let i = 0; i < len; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number): bigint => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number): number => h >>> s;\nconst shrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number): number => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number): number => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number): number => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number): number => l;\nconst rotr32L = (h: number, _l: number): number => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number): number => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number): number => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number): number => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number): number => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(\n  Ah: number,\n  Al: number,\n  Bh: number,\n  Bl: number\n): {\n  h: number;\n  l: number;\n} {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number): number => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number): number =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number): number =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number): number =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig\n};\n// prettier-ignore\nconst u64: { fromBig: typeof fromBig; split: typeof split; toBig: (h: number, l: number) => bigint; shrSH: (h: number, _l: number, s: number) => number; shrSL: (h: number, l: number, s: number) => number; rotrSH: (h: number, l: number, s: number) => number; rotrSL: (h: number, l: number, s: number) => number; rotrBH: (h: number, l: number, s: number) => number; rotrBL: (h: number, l: number, s: number) => number; rotr32H: (_h: number, l: number) => number; rotr32L: (h: number, _l: number) => number; rotlSH: (h: number, l: number, s: number) => number; rotlSL: (h: number, l: number, s: number) => number; rotlBH: (h: number, l: number, s: number) => number; rotlBL: (h: number, l: number, s: number) => number; add: typeof add; add3L: (Al: number, Bl: number, Cl: number) => number; add3H: (low: number, Ah: number, Bh: number, Ch: number) => number; add4L: (Al: number, Bl: number, Cl: number, Dl: number) => number; add4H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number) => number; add5H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) => number; add5L: (Al: number, Bl: number, Cl: number, Dl: number, El: number) => number; } = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n","/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from './_md.ts';\nimport * as u64 from './_u64.ts';\nimport { type CHash, clean, createHasher, rotr } from './utils.ts';\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected A: number = SHA256_IV[0] | 0;\n  protected B: number = SHA256_IV[1] | 0;\n  protected C: number = SHA256_IV[2] | 0;\n  protected D: number = SHA256_IV[3] | 0;\n  protected E: number = SHA256_IV[4] | 0;\n  protected F: number = SHA256_IV[5] | 0;\n  protected G: number = SHA256_IV[6] | 0;\n  protected H: number = SHA256_IV[7] | 0;\n\n  constructor(outputLen: number = 32) {\n    super(64, outputLen, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ): void {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean(): void {\n    clean(SHA256_W);\n  }\n  destroy(): void {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    clean(this.buffer);\n  }\n}\n\nexport class SHA224 extends SHA256 {\n  protected A: number = SHA224_IV[0] | 0;\n  protected B: number = SHA224_IV[1] | 0;\n  protected C: number = SHA224_IV[2] | 0;\n  protected D: number = SHA224_IV[3] | 0;\n  protected E: number = SHA224_IV[4] | 0;\n  protected F: number = SHA224_IV[5] | 0;\n  protected G: number = SHA224_IV[6] | 0;\n  protected H: number = SHA224_IV[7] | 0;\n  constructor() {\n    super(28);\n  }\n}\n\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\n\nexport class SHA512 extends HashMD<SHA512> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  // h -- high 32 bits, l -- low 32 bits\n  protected Ah: number = SHA512_IV[0] | 0;\n  protected Al: number = SHA512_IV[1] | 0;\n  protected Bh: number = SHA512_IV[2] | 0;\n  protected Bl: number = SHA512_IV[3] | 0;\n  protected Ch: number = SHA512_IV[4] | 0;\n  protected Cl: number = SHA512_IV[5] | 0;\n  protected Dh: number = SHA512_IV[6] | 0;\n  protected Dl: number = SHA512_IV[7] | 0;\n  protected Eh: number = SHA512_IV[8] | 0;\n  protected El: number = SHA512_IV[9] | 0;\n  protected Fh: number = SHA512_IV[10] | 0;\n  protected Fl: number = SHA512_IV[11] | 0;\n  protected Gh: number = SHA512_IV[12] | 0;\n  protected Gl: number = SHA512_IV[13] | 0;\n  protected Hh: number = SHA512_IV[14] | 0;\n  protected Hl: number = SHA512_IV[15] | 0;\n\n  constructor(outputLen: number = 64) {\n    super(128, outputLen, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ): void {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean(): void {\n    clean(SHA512_W_H, SHA512_W_L);\n  }\n  destroy(): void {\n    clean(this.buffer);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nexport class SHA384 extends SHA512 {\n  protected Ah: number = SHA384_IV[0] | 0;\n  protected Al: number = SHA384_IV[1] | 0;\n  protected Bh: number = SHA384_IV[2] | 0;\n  protected Bl: number = SHA384_IV[3] | 0;\n  protected Ch: number = SHA384_IV[4] | 0;\n  protected Cl: number = SHA384_IV[5] | 0;\n  protected Dh: number = SHA384_IV[6] | 0;\n  protected Dl: number = SHA384_IV[7] | 0;\n  protected Eh: number = SHA384_IV[8] | 0;\n  protected El: number = SHA384_IV[9] | 0;\n  protected Fh: number = SHA384_IV[10] | 0;\n  protected Fl: number = SHA384_IV[11] | 0;\n  protected Gh: number = SHA384_IV[12] | 0;\n  protected Gl: number = SHA384_IV[13] | 0;\n  protected Hh: number = SHA384_IV[14] | 0;\n  protected Hl: number = SHA384_IV[15] | 0;\n\n  constructor() {\n    super(48);\n  }\n}\n\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n  0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n  0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n  0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n  0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\n\nexport class SHA512_224 extends SHA512 {\n  protected Ah: number = T224_IV[0] | 0;\n  protected Al: number = T224_IV[1] | 0;\n  protected Bh: number = T224_IV[2] | 0;\n  protected Bl: number = T224_IV[3] | 0;\n  protected Ch: number = T224_IV[4] | 0;\n  protected Cl: number = T224_IV[5] | 0;\n  protected Dh: number = T224_IV[6] | 0;\n  protected Dl: number = T224_IV[7] | 0;\n  protected Eh: number = T224_IV[8] | 0;\n  protected El: number = T224_IV[9] | 0;\n  protected Fh: number = T224_IV[10] | 0;\n  protected Fl: number = T224_IV[11] | 0;\n  protected Gh: number = T224_IV[12] | 0;\n  protected Gl: number = T224_IV[13] | 0;\n  protected Hh: number = T224_IV[14] | 0;\n  protected Hl: number = T224_IV[15] | 0;\n\n  constructor() {\n    super(28);\n  }\n}\n\nexport class SHA512_256 extends SHA512 {\n  protected Ah: number = T256_IV[0] | 0;\n  protected Al: number = T256_IV[1] | 0;\n  protected Bh: number = T256_IV[2] | 0;\n  protected Bl: number = T256_IV[3] | 0;\n  protected Ch: number = T256_IV[4] | 0;\n  protected Cl: number = T256_IV[5] | 0;\n  protected Dh: number = T256_IV[6] | 0;\n  protected Dl: number = T256_IV[7] | 0;\n  protected Eh: number = T256_IV[8] | 0;\n  protected El: number = T256_IV[9] | 0;\n  protected Fh: number = T256_IV[10] | 0;\n  protected Fl: number = T256_IV[11] | 0;\n  protected Gh: number = T256_IV[12] | 0;\n  protected Gl: number = T256_IV[13] | 0;\n  protected Hh: number = T256_IV[14] | 0;\n  protected Hl: number = T256_IV[15] | 0;\n\n  constructor() {\n    super(32);\n  }\n}\n\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexport const sha256: CHash = /* @__PURE__ */ createHasher(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224: CHash = /* @__PURE__ */ createHasher(() => new SHA224());\n\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512: CHash = /* @__PURE__ */ createHasher(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384: CHash = /* @__PURE__ */ createHasher(() => new SHA384());\n\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256: CHash = /* @__PURE__ */ createHasher(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224: CHash = /* @__PURE__ */ createHasher(() => new SHA512_224());\n","/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash, clean, Hash, toBytes, type CHash, type Input } from './utils.ts';\n\nexport class HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    ahash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new Error('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    clean(pad);\n  }\n  update(buf: Input): this {\n    aexists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    abytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest(): Uint8Array {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  clone(): HMAC<T> {\n    return this._cloneInto();\n  }\n  destroy(): void {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac: {\n  (hash: CHash, key: Input, message: Input): Uint8Array;\n  create(hash: CHash, key: Input): HMAC<any>;\n} = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n","/**\n * Hex, bytes and number utilities.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  abytes as abytes_,\n  bytesToHex as bytesToHex_,\n  concatBytes as concatBytes_,\n  hexToBytes as hexToBytes_,\n  isBytes as isBytes_,\n} from '@noble/hashes/utils.js';\nexport {\n  abytes,\n  anumber,\n  bytesToHex,\n  bytesToUtf8,\n  concatBytes,\n  hexToBytes,\n  isBytes,\n  randomBytes,\n  utf8ToBytes,\n} from '@noble/hashes/utils.js';\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nexport type Hex = Uint8Array | string; // hex strings are accepted for simplicity\nexport type PrivKey = Hex | bigint; // bigints are accepted to ease learning curve\nexport type CHash = {\n  (message: Uint8Array | string): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create(opts?: { dkLen?: number }): any; // For shake\n};\nexport type FHash = (message: Uint8Array | string) => Uint8Array;\n\nexport function abool(title: string, value: boolean): void {\n  if (typeof value !== 'boolean') throw new Error(title + ' boolean expected, got ' + value);\n}\n\n// tmp name until v2\nexport function _abool2(value: boolean, title: string = ''): boolean {\n  if (typeof value !== 'boolean') {\n    const prefix = title && `\"${title}\"`;\n    throw new Error(prefix + 'expected boolean, got type=' + typeof value);\n  }\n  return value;\n}\n\n// tmp name until v2\n/** Asserts something is Uint8Array. */\nexport function _abytes2(value: Uint8Array, length?: number, title: string = ''): Uint8Array {\n  const bytes = isBytes_(value);\n  const len = value?.length;\n  const needsLen = length !== undefined;\n  if (!bytes || (needsLen && len !== length)) {\n    const prefix = title && `\"${title}\" `;\n    const ofLen = needsLen ? ` of length ${length}` : '';\n    const got = bytes ? `length=${len}` : `type=${typeof value}`;\n    throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n  }\n  return value;\n}\n\n// Used in weierstrass, der\nexport function numberToHexUnpadded(num: number | bigint): string {\n  const hex = num.toString(16);\n  return hex.length & 1 ? '0' + hex : hex;\n}\n\nexport function hexToNumber(hex: string): bigint {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  return hex === '' ? _0n : BigInt('0x' + hex); // Big Endian\n}\n\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex_(bytes));\n}\nexport function bytesToNumberLE(bytes: Uint8Array): bigint {\n  abytes_(bytes);\n  return hexToNumber(bytesToHex_(Uint8Array.from(bytes).reverse()));\n}\n\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\n  return hexToBytes_(n.toString(16).padStart(len * 2, '0'));\n}\nexport function numberToBytesLE(n: number | bigint, len: number): Uint8Array {\n  return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nexport function numberToVarBytesBE(n: number | bigint): Uint8Array {\n  return hexToBytes_(numberToHexUnpadded(n));\n}\n\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'secret key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nexport function ensureBytes(title: string, hex: Hex, expectedLength?: number): Uint8Array {\n  let res: Uint8Array;\n  if (typeof hex === 'string') {\n    try {\n      res = hexToBytes_(hex);\n    } catch (e) {\n      throw new Error(title + ' must be hex string or Uint8Array, cause: ' + e);\n    }\n  } else if (isBytes_(hex)) {\n    // Uint8Array.from() instead of hash.slice() because node.js Buffer\n    // is instance of Uint8Array, and its slice() creates **mutable** copy\n    res = Uint8Array.from(hex);\n  } else {\n    throw new Error(title + ' must be hex string or Uint8Array');\n  }\n  const len = res.length;\n  if (typeof expectedLength === 'number' && len !== expectedLength)\n    throw new Error(title + ' of length ' + expectedLength + ' expected, got ' + len);\n  return res;\n}\n\n// Compares 2 u8a-s in kinda constant time\nexport function equalBytes(a: Uint8Array, b: Uint8Array): boolean {\n  if (a.length !== b.length) return false;\n  let diff = 0;\n  for (let i = 0; i < a.length; i++) diff |= a[i] ^ b[i];\n  return diff === 0;\n}\n/**\n * Copies Uint8Array. We can't use u8a.slice(), because u8a can be Buffer,\n * and Buffer#slice creates mutable copy. Never use Buffers!\n */\nexport function copyBytes(bytes: Uint8Array): Uint8Array {\n  return Uint8Array.from(bytes);\n}\n\n/**\n * Decodes 7-bit ASCII string to Uint8Array, throws on non-ascii symbols\n * Should be safe to use for things expected to be ASCII.\n * Returns exact same result as utf8ToBytes for ASCII or throws.\n */\nexport function asciiToBytes(ascii: string): Uint8Array {\n  return Uint8Array.from(ascii, (c, i) => {\n    const charCode = c.charCodeAt(0);\n    if (c.length !== 1 || charCode > 127) {\n      throw new Error(\n        `string contains non-ASCII character \"${ascii[i]}\" with code ${charCode} at position ${i}`\n      );\n    }\n    return charCode;\n  });\n}\n\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\n// export const utf8ToBytes: typeof utf8ToBytes_ = utf8ToBytes_;\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\n// export const bytesToUtf8: typeof bytesToUtf8_ = bytesToUtf8_;\n\n// Is positive bigint\nconst isPosBig = (n: bigint) => typeof n === 'bigint' && _0n <= n;\n\nexport function inRange(n: bigint, min: bigint, max: bigint): boolean {\n  return isPosBig(n) && isPosBig(min) && isPosBig(max) && min <= n && n < max;\n}\n\n/**\n * Asserts min <= n < max. NOTE: It's < max and not <= max.\n * @example\n * aInRange('x', x, 1n, 256n); // would assume x is in (1n..255n)\n */\nexport function aInRange(title: string, n: bigint, min: bigint, max: bigint): void {\n  // Why min <= n < max and not a (min < n < max) OR b (min <= n <= max)?\n  // consider P=256n, min=0n, max=P\n  // - a for min=0 would require -1:          `inRange('x', x, -1n, P)`\n  // - b would commonly require subtraction:  `inRange('x', x, 0n, P - 1n)`\n  // - our way is the cleanest:               `inRange('x', x, 0n, P)\n  if (!inRange(n, min, max))\n    throw new Error('expected valid ' + title + ': ' + min + ' <= n < ' + max + ', got ' + n);\n}\n\n// Bit operations\n\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n * TODO: merge with nLength in modular\n */\nexport function bitLen(n: bigint): number {\n  let len;\n  for (len = 0; n > _0n; n >>= _1n, len += 1);\n  return len;\n}\n\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nexport function bitGet(n: bigint, pos: number): bigint {\n  return (n >> BigInt(pos)) & _1n;\n}\n\n/**\n * Sets single bit at position.\n */\nexport function bitSet(n: bigint, pos: number, value: boolean): bigint {\n  return n | ((value ? _1n : _0n) << BigInt(pos));\n}\n\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nexport const bitMask = (n: number): bigint => (_1n << BigInt(n)) - _1n;\n\n// DRBG\n\ntype Pred<T> = (v: Uint8Array) => T | undefined;\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg<T>(\n  hashLen: number,\n  qByteLen: number,\n  hmacFn: (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array\n): (seed: Uint8Array, predicate: Pred<T>) => T {\n  if (typeof hashLen !== 'number' || hashLen < 2) throw new Error('hashLen must be a number');\n  if (typeof qByteLen !== 'number' || qByteLen < 2) throw new Error('qByteLen must be a number');\n  if (typeof hmacFn !== 'function') throw new Error('hmacFn must be a function');\n  // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n  const u8n = (len: number) => new Uint8Array(len); // creates Uint8Array\n  const u8of = (byte: number) => Uint8Array.of(byte); // another shortcut\n  let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n  let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n  let i = 0; // Iterations counter, will throw when over 1000\n  const reset = () => {\n    v.fill(1);\n    k.fill(0);\n    i = 0;\n  };\n  const h = (...b: Uint8Array[]) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n  const reseed = (seed = u8n(0)) => {\n    // HMAC-DRBG reseed() function. Steps D-G\n    k = h(u8of(0x00), seed); // k = hmac(k || v || 0x00 || seed)\n    v = h(); // v = hmac(k || v)\n    if (seed.length === 0) return;\n    k = h(u8of(0x01), seed); // k = hmac(k || v || 0x01 || seed)\n    v = h(); // v = hmac(k || v)\n  };\n  const gen = () => {\n    // HMAC-DRBG generate() function\n    if (i++ >= 1000) throw new Error('drbg: tried 1000 values');\n    let len = 0;\n    const out: Uint8Array[] = [];\n    while (len < qByteLen) {\n      v = h();\n      const sl = v.slice();\n      out.push(sl);\n      len += v.length;\n    }\n    return concatBytes_(...out);\n  };\n  const genUntil = (seed: Uint8Array, pred: Pred<T>): T => {\n    reset();\n    reseed(seed); // Steps D-G\n    let res: T | undefined = undefined; // Step H: grind until k is in [1..n-1]\n    while (!(res = pred(gen()))) reseed();\n    reset();\n    return res;\n  };\n  return genUntil;\n}\n\n// Validating curves and fields\n\nconst validatorFns = {\n  bigint: (val: any): boolean => typeof val === 'bigint',\n  function: (val: any): boolean => typeof val === 'function',\n  boolean: (val: any): boolean => typeof val === 'boolean',\n  string: (val: any): boolean => typeof val === 'string',\n  stringOrUint8Array: (val: any): boolean => typeof val === 'string' || isBytes_(val),\n  isSafeInteger: (val: any): boolean => Number.isSafeInteger(val),\n  array: (val: any): boolean => Array.isArray(val),\n  field: (val: any, object: any): any => (object as any).Fp.isValid(val),\n  hash: (val: any): boolean => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n} as const;\ntype Validator = keyof typeof validatorFns;\ntype ValMap<T extends Record<string, any>> = { [K in keyof T]?: Validator };\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\n\nexport function validateObject<T extends Record<string, any>>(\n  object: T,\n  validators: ValMap<T>,\n  optValidators: ValMap<T> = {}\n): T {\n  const checkField = (fieldName: keyof T, type: Validator, isOptional: boolean) => {\n    const checkVal = validatorFns[type];\n    if (typeof checkVal !== 'function') throw new Error('invalid validator function');\n\n    const val = object[fieldName as keyof typeof object];\n    if (isOptional && val === undefined) return;\n    if (!checkVal(val, object)) {\n      throw new Error(\n        'param ' + String(fieldName) + ' is invalid. Expected ' + type + ', got ' + val\n      );\n    }\n  };\n  for (const [fieldName, type] of Object.entries(validators)) checkField(fieldName, type!, false);\n  for (const [fieldName, type] of Object.entries(optValidators)) checkField(fieldName, type!, true);\n  return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n\nexport function isHash(val: CHash): boolean {\n  return typeof val === 'function' && Number.isSafeInteger(val.outputLen);\n}\nexport function _validateObject(\n  object: Record<string, any>,\n  fields: Record<string, string>,\n  optFields: Record<string, string> = {}\n): void {\n  if (!object || typeof object !== 'object') throw new Error('expected valid options object');\n  type Item = keyof typeof object;\n  function checkField(fieldName: Item, expectedType: string, isOpt: boolean) {\n    const val = object[fieldName];\n    if (isOpt && val === undefined) return;\n    const current = typeof val;\n    if (current !== expectedType || val === null)\n      throw new Error(`param \"${fieldName}\" is invalid: expected ${expectedType}, got ${current}`);\n  }\n  Object.entries(fields).forEach(([k, v]) => checkField(k, v, false));\n  Object.entries(optFields).forEach(([k, v]) => checkField(k, v, true));\n}\n\n/**\n * throws not implemented error\n */\nexport const notImplemented = (): never => {\n  throw new Error('not implemented');\n};\n\n/**\n * Memoizes (caches) computation result.\n * Uses WeakMap: the value is going auto-cleaned by GC after last reference is removed.\n */\nexport function memoized<T extends object, R, O extends any[]>(\n  fn: (arg: T, ...args: O) => R\n): (arg: T, ...args: O) => R {\n  const map = new WeakMap<T, R>();\n  return (arg: T, ...args: O): R => {\n    const val = map.get(arg);\n    if (val !== undefined) return val;\n    const computed = fn(arg, ...args);\n    map.set(arg, computed);\n    return computed;\n  };\n}\n","/**\n * Utils for modular division and fields.\n * Field over 11 is a finite (Galois) field is integer number operations `mod 11`.\n * There is no division: it is replaced by modular multiplicative inverse.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  _validateObject,\n  anumber,\n  bitMask,\n  bytesToNumberBE,\n  bytesToNumberLE,\n  ensureBytes,\n  numberToBytesBE,\n  numberToBytesLE,\n} from '../utils.ts';\n\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = /* @__PURE__ */ BigInt(2), _3n = /* @__PURE__ */ BigInt(3);\n// prettier-ignore\nconst _4n = /* @__PURE__ */ BigInt(4), _5n = /* @__PURE__ */ BigInt(5), _7n = /* @__PURE__ */ BigInt(7);\n// prettier-ignore\nconst _8n = /* @__PURE__ */ BigInt(8), _9n = /* @__PURE__ */ BigInt(9), _16n = /* @__PURE__ */ BigInt(16);\n\n// Calculates a modulo b\nexport function mod(a: bigint, b: bigint): bigint {\n  const result = a % b;\n  return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\nexport function pow(num: bigint, power: bigint, modulo: bigint): bigint {\n  return FpPow(Field(modulo), num, power);\n}\n\n/** Does `x^(2^power)` mod p. `pow2(30, 4)` == `30^(2^4)` */\nexport function pow2(x: bigint, power: bigint, modulo: bigint): bigint {\n  let res = x;\n  while (power-- > _0n) {\n    res *= res;\n    res %= modulo;\n  }\n  return res;\n}\n\n/**\n * Inverses number over modulo.\n * Implemented using [Euclidean GCD](https://brilliant.org/wiki/extended-euclidean-algorithm/).\n */\nexport function invert(number: bigint, modulo: bigint): bigint {\n  if (number === _0n) throw new Error('invert: expected non-zero number');\n  if (modulo <= _0n) throw new Error('invert: expected positive modulus, got ' + modulo);\n  // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n  let a = mod(number, modulo);\n  let b = modulo;\n  // prettier-ignore\n  let x = _0n, y = _1n, u = _1n, v = _0n;\n  while (a !== _0n) {\n    // JIT applies optimization if those two lines follow each other\n    const q = b / a;\n    const r = b % a;\n    const m = x - u * q;\n    const n = y - v * q;\n    // prettier-ignore\n    b = a, a = r, x = u, y = v, u = m, v = n;\n  }\n  const gcd = b;\n  if (gcd !== _1n) throw new Error('invert: does not exist');\n  return mod(x, modulo);\n}\n\nfunction assertIsSquare<T>(Fp: IField<T>, root: T, n: T): void {\n  if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\n}\n\n// Not all roots are possible! Example which will throw:\n// const NUM =\n// n = 72057594037927816n;\n// Fp = Field(BigInt('0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab'));\nfunction sqrt3mod4<T>(Fp: IField<T>, n: T) {\n  const p1div4 = (Fp.ORDER + _1n) / _4n;\n  const root = Fp.pow(n, p1div4);\n  assertIsSquare(Fp, root, n);\n  return root;\n}\n\nfunction sqrt5mod8<T>(Fp: IField<T>, n: T) {\n  const p5div8 = (Fp.ORDER - _5n) / _8n;\n  const n2 = Fp.mul(n, _2n);\n  const v = Fp.pow(n2, p5div8);\n  const nv = Fp.mul(n, v);\n  const i = Fp.mul(Fp.mul(nv, _2n), v);\n  const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n  assertIsSquare(Fp, root, n);\n  return root;\n}\n\n// Based on RFC9380, Kong algorithm\n// prettier-ignore\nfunction sqrt9mod16(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  const Fp_ = Field(P);\n  const tn = tonelliShanks(P);\n  const c1 = tn(Fp_, Fp_.neg(Fp_.ONE));//  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n  const c2 = tn(Fp_, c1);              //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n  const c3 = tn(Fp_, Fp_.neg(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n  const c4 = (P + _7n) / _16n;         //  4. c4 = (q + 7) / 16        # Integer arithmetic\n  return <T>(Fp: IField<T>, n: T) => {\n    let tv1 = Fp.pow(n, c4);           //  1. tv1 = x^c4\n    let tv2 = Fp.mul(tv1, c1);         //  2. tv2 = c1 * tv1\n    const tv3 = Fp.mul(tv1, c2);       //  3. tv3 = c2 * tv1\n    const tv4 = Fp.mul(tv1, c3);       //  4. tv4 = c3 * tv1\n    const e1 = Fp.eql(Fp.sqr(tv2), n); //  5.  e1 = (tv2^2) == x\n    const e2 = Fp.eql(Fp.sqr(tv3), n); //  6.  e2 = (tv3^2) == x\n    tv1 = Fp.cmov(tv1, tv2, e1);       //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n    tv2 = Fp.cmov(tv4, tv3, e2);       //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n    const e3 = Fp.eql(Fp.sqr(tv2), n); //  9.  e3 = (tv2^2) == x\n    const root = Fp.cmov(tv1, tv2, e3);// 10.  z = CMOV(tv1, tv2, e3)   # Select sqrt from tv1 & tv2\n    assertIsSquare(Fp, root, n);\n    return root;\n  };\n}\n\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nexport function tonelliShanks(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  // Initialization (precomputation).\n  // Caching initialization could boost perf by 7%.\n  if (P < _3n) throw new Error('sqrt is not defined for small field');\n  // Factor P - 1 = Q * 2^S, where Q is odd\n  let Q = P - _1n;\n  let S = 0;\n  while (Q % _2n === _0n) {\n    Q /= _2n;\n    S++;\n  }\n\n  // Find the first quadratic non-residue Z >= 2\n  let Z = _2n;\n  const _Fp = Field(P);\n  while (FpLegendre(_Fp, Z) === 1) {\n    // Basic primality test for P. After x iterations, chance of\n    // not finding quadratic non-residue is 2^x, so 2^1000.\n    if (Z++ > 1000) throw new Error('Cannot find square root: probably non-prime P');\n  }\n  // Fast-path; usually done before Z, but we do \"primality test\".\n  if (S === 1) return sqrt3mod4;\n\n  // Slow-path\n  // TODO: test on Fp2 and others\n  let cc = _Fp.pow(Z, Q); // c = z^Q\n  const Q1div2 = (Q + _1n) / _2n;\n  return function tonelliSlow<T>(Fp: IField<T>, n: T): T {\n    if (Fp.is0(n)) return n;\n    // Check if n is a quadratic residue using Legendre symbol\n    if (FpLegendre(Fp, n) !== 1) throw new Error('Cannot find square root');\n\n    // Initialize variables for the main loop\n    let M = S;\n    let c = Fp.mul(Fp.ONE, cc); // c = z^Q, move cc from field _Fp into field Fp\n    let t = Fp.pow(n, Q); // t = n^Q, first guess at the fudge factor\n    let R = Fp.pow(n, Q1div2); // R = n^((Q+1)/2), first guess at the square root\n\n    // Main loop\n    // while t != 1\n    while (!Fp.eql(t, Fp.ONE)) {\n      if (Fp.is0(t)) return Fp.ZERO; // if t=0 return R=0\n      let i = 1;\n\n      // Find the smallest i >= 1 such that t^(2^i)  1 (mod P)\n      let t_tmp = Fp.sqr(t); // t^(2^1)\n      while (!Fp.eql(t_tmp, Fp.ONE)) {\n        i++;\n        t_tmp = Fp.sqr(t_tmp); // t^(2^2)...\n        if (i === M) throw new Error('Cannot find square root');\n      }\n\n      // Calculate the exponent for b: 2^(M - i - 1)\n      const exponent = _1n << BigInt(M - i - 1); // bigint is important\n      const b = Fp.pow(c, exponent); // b = 2^(M - i - 1)\n\n      // Update variables\n      M = i;\n      c = Fp.sqr(b); // c = b^2\n      t = Fp.mul(t, c); // t = (t * b^2)\n      R = Fp.mul(R, b); // R = R*b\n    }\n    return R;\n  };\n}\n\n/**\n * Square root for a finite field. Will try optimized versions first:\n *\n * 1. P  3 (mod 4)\n * 2. P  5 (mod 8)\n * 3. P  9 (mod 16)\n * 4. Tonelli-Shanks algorithm\n *\n * Different algorithms can give different roots, it is up to user to decide which one they want.\n * For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n */\nexport function FpSqrt(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  // P  3 (mod 4) => n = n^((P+1)/4)\n  if (P % _4n === _3n) return sqrt3mod4;\n  // P  5 (mod 8) => Atkin algorithm, page 10 of https://eprint.iacr.org/2012/685.pdf\n  if (P % _8n === _5n) return sqrt5mod8;\n  // P  9 (mod 16) => Kong algorithm, page 11 of https://eprint.iacr.org/2012/685.pdf (algorithm 4)\n  if (P % _16n === _9n) return sqrt9mod16(P);\n  // Tonelli-Shanks algorithm\n  return tonelliShanks(P);\n}\n\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num: bigint, modulo: bigint): boolean =>\n  (mod(num, modulo) & _1n) === _1n;\n\n/** Field is not always over prime: for example, Fp2 has ORDER(q)=p^m. */\nexport interface IField<T> {\n  ORDER: bigint;\n  isLE: boolean;\n  BYTES: number;\n  BITS: number;\n  MASK: bigint;\n  ZERO: T;\n  ONE: T;\n  // 1-arg\n  create: (num: T) => T;\n  isValid: (num: T) => boolean;\n  is0: (num: T) => boolean;\n  isValidNot0: (num: T) => boolean;\n  neg(num: T): T;\n  inv(num: T): T;\n  sqrt(num: T): T;\n  sqr(num: T): T;\n  // 2-args\n  eql(lhs: T, rhs: T): boolean;\n  add(lhs: T, rhs: T): T;\n  sub(lhs: T, rhs: T): T;\n  mul(lhs: T, rhs: T | bigint): T;\n  pow(lhs: T, power: bigint): T;\n  div(lhs: T, rhs: T | bigint): T;\n  // N for NonNormalized (for now)\n  addN(lhs: T, rhs: T): T;\n  subN(lhs: T, rhs: T): T;\n  mulN(lhs: T, rhs: T | bigint): T;\n  sqrN(num: T): T;\n\n  // Optional\n  // Should be same as sgn0 function in\n  // [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#section-4.1).\n  // NOTE: sgn0 is 'negative in LE', which is same as odd. And negative in LE is kinda strange definition anyway.\n  isOdd?(num: T): boolean; // Odd instead of even since we have it for Fp2\n  allowedLengths?: number[];\n  // legendre?(num: T): T;\n  invertBatch: (lst: T[]) => T[];\n  toBytes(num: T): Uint8Array;\n  fromBytes(bytes: Uint8Array, skipValidation?: boolean): T;\n  // If c is False, CMOV returns a, otherwise it returns b.\n  cmov(a: T, b: T, c: boolean): T;\n}\n// prettier-ignore\nconst FIELD_FIELDS = [\n  'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n  'eql', 'add', 'sub', 'mul', 'pow', 'div',\n  'addN', 'subN', 'mulN', 'sqrN'\n] as const;\nexport function validateField<T>(field: IField<T>): IField<T> {\n  const initial = {\n    ORDER: 'bigint',\n    MASK: 'bigint',\n    BYTES: 'number',\n    BITS: 'number',\n  } as Record<string, string>;\n  const opts = FIELD_FIELDS.reduce((map, val: string) => {\n    map[val] = 'function';\n    return map;\n  }, initial);\n  _validateObject(field, opts);\n  // const max = 16384;\n  // if (field.BYTES < 1 || field.BYTES > max) throw new Error('invalid field');\n  // if (field.BITS < 1 || field.BITS > 8 * max) throw new Error('invalid field');\n  return field;\n}\n\n// Generic field functions\n\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nexport function FpPow<T>(Fp: IField<T>, num: T, power: bigint): T {\n  if (power < _0n) throw new Error('invalid exponent, negatives unsupported');\n  if (power === _0n) return Fp.ONE;\n  if (power === _1n) return num;\n  let p = Fp.ONE;\n  let d = num;\n  while (power > _0n) {\n    if (power & _1n) p = Fp.mul(p, d);\n    d = Fp.sqr(d);\n    power >>= _1n;\n  }\n  return p;\n}\n\n/**\n * Efficiently invert an array of Field elements.\n * Exception-free. Will return `undefined` for 0 elements.\n * @param passZero map 0 to 0 (instead of undefined)\n */\nexport function FpInvertBatch<T>(Fp: IField<T>, nums: T[], passZero = false): T[] {\n  const inverted = new Array(nums.length).fill(passZero ? Fp.ZERO : undefined);\n  // Walk from first to last, multiply them by each other MOD p\n  const multipliedAcc = nums.reduce((acc, num, i) => {\n    if (Fp.is0(num)) return acc;\n    inverted[i] = acc;\n    return Fp.mul(acc, num);\n  }, Fp.ONE);\n  // Invert last element\n  const invertedAcc = Fp.inv(multipliedAcc);\n  // Walk from last to first, multiply them by inverted each other MOD p\n  nums.reduceRight((acc, num, i) => {\n    if (Fp.is0(num)) return acc;\n    inverted[i] = Fp.mul(acc, inverted[i]);\n    return Fp.mul(acc, num);\n  }, invertedAcc);\n  return inverted;\n}\n\n// TODO: remove\nexport function FpDiv<T>(Fp: IField<T>, lhs: T, rhs: T | bigint): T {\n  return Fp.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, Fp.ORDER) : Fp.inv(rhs));\n}\n\n/**\n * Legendre symbol.\n * Legendre constant is used to calculate Legendre symbol (a | p)\n * which denotes the value of a^((p-1)/2) (mod p).\n *\n * * (a | p)  1    if a is a square (mod p), quadratic residue\n * * (a | p)  -1   if a is not a square (mod p), quadratic non residue\n * * (a | p)  0    if a  0 (mod p)\n */\nexport function FpLegendre<T>(Fp: IField<T>, n: T): -1 | 0 | 1 {\n  // We can use 3rd argument as optional cache of this value\n  // but seems unneeded for now. The operation is very fast.\n  const p1mod2 = (Fp.ORDER - _1n) / _2n;\n  const powered = Fp.pow(n, p1mod2);\n  const yes = Fp.eql(powered, Fp.ONE);\n  const zero = Fp.eql(powered, Fp.ZERO);\n  const no = Fp.eql(powered, Fp.neg(Fp.ONE));\n  if (!yes && !zero && !no) throw new Error('invalid Legendre symbol result');\n  return yes ? 1 : zero ? 0 : -1;\n}\n\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare<T>(Fp: IField<T>, n: T): boolean {\n  const l = FpLegendre(Fp, n);\n  return l === 1;\n}\n\nexport type NLength = { nByteLength: number; nBitLength: number };\n// CURVE.n lengths\nexport function nLength(n: bigint, nBitLength?: number): NLength {\n  // Bit size, byte size of CURVE.n\n  if (nBitLength !== undefined) anumber(nBitLength);\n  const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n  const nByteLength = Math.ceil(_nBitLength / 8);\n  return { nBitLength: _nBitLength, nByteLength };\n}\n\ntype FpField = IField<bigint> & Required<Pick<IField<bigint>, 'isOdd'>>;\ntype SqrtFn = (n: bigint) => bigint;\ntype FieldOpts = Partial<{\n  sqrt: SqrtFn;\n  isLE: boolean;\n  BITS: number;\n  modFromBytes: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\n  allowedLengths?: readonly number[]; // for P521 (adds padding for smaller sizes)\n}>;\n/**\n * Creates a finite field. Major performance optimizations:\n * * 1. Denormalized operations like mulN instead of mul.\n * * 2. Identical object shape: never add or remove keys.\n * * 3. `Object.freeze`.\n * Fragile: always run a benchmark on a change.\n * Security note: operations don't check 'isValid' for all elements for performance reasons,\n * it is caller responsibility to check this.\n * This is low-level code, please make sure you know what you're doing.\n *\n * Note about field properties:\n * * CHARACTERISTIC p = prime number, number of elements in main subgroup.\n * * ORDER q = similar to cofactor in curves, may be composite `q = p^m`.\n *\n * @param ORDER field order, probably prime, or could be composite\n * @param bitLen how many bits the field consumes\n * @param isLE (default: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(\n  ORDER: bigint,\n  bitLenOrOpts?: number | FieldOpts, // TODO: use opts only in v2?\n  isLE = false,\n  opts: { sqrt?: SqrtFn } = {}\n): Readonly<FpField> {\n  if (ORDER <= _0n) throw new Error('invalid field: expected ORDER > 0, got ' + ORDER);\n  let _nbitLength: number | undefined = undefined;\n  let _sqrt: SqrtFn | undefined = undefined;\n  let modFromBytes: boolean = false;\n  let allowedLengths: undefined | readonly number[] = undefined;\n  if (typeof bitLenOrOpts === 'object' && bitLenOrOpts != null) {\n    if (opts.sqrt || isLE) throw new Error('cannot specify opts in two arguments');\n    const _opts = bitLenOrOpts;\n    if (_opts.BITS) _nbitLength = _opts.BITS;\n    if (_opts.sqrt) _sqrt = _opts.sqrt;\n    if (typeof _opts.isLE === 'boolean') isLE = _opts.isLE;\n    if (typeof _opts.modFromBytes === 'boolean') modFromBytes = _opts.modFromBytes;\n    allowedLengths = _opts.allowedLengths;\n  } else {\n    if (typeof bitLenOrOpts === 'number') _nbitLength = bitLenOrOpts;\n    if (opts.sqrt) _sqrt = opts.sqrt;\n  }\n  const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, _nbitLength);\n  if (BYTES > 2048) throw new Error('invalid field: expected ORDER of <= 2048 bytes');\n  let sqrtP: ReturnType<typeof FpSqrt>; // cached sqrtP\n  const f: Readonly<FpField> = Object.freeze({\n    ORDER,\n    isLE,\n    BITS,\n    BYTES,\n    MASK: bitMask(BITS),\n    ZERO: _0n,\n    ONE: _1n,\n    allowedLengths: allowedLengths,\n    create: (num) => mod(num, ORDER),\n    isValid: (num) => {\n      if (typeof num !== 'bigint')\n        throw new Error('invalid field element: expected bigint, got ' + typeof num);\n      return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n    },\n    is0: (num) => num === _0n,\n    // is valid and invertible\n    isValidNot0: (num: bigint) => !f.is0(num) && f.isValid(num),\n    isOdd: (num) => (num & _1n) === _1n,\n    neg: (num) => mod(-num, ORDER),\n    eql: (lhs, rhs) => lhs === rhs,\n\n    sqr: (num) => mod(num * num, ORDER),\n    add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n    sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n    mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n    pow: (num, power) => FpPow(f, num, power),\n    div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n\n    // Same as above, but doesn't normalize\n    sqrN: (num) => num * num,\n    addN: (lhs, rhs) => lhs + rhs,\n    subN: (lhs, rhs) => lhs - rhs,\n    mulN: (lhs, rhs) => lhs * rhs,\n\n    inv: (num) => invert(num, ORDER),\n    sqrt:\n      _sqrt ||\n      ((n) => {\n        if (!sqrtP) sqrtP = FpSqrt(ORDER);\n        return sqrtP(f, n);\n      }),\n    toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n    fromBytes: (bytes, skipValidation = true) => {\n      if (allowedLengths) {\n        if (!allowedLengths.includes(bytes.length) || bytes.length > BYTES) {\n          throw new Error(\n            'Field.fromBytes: expected ' + allowedLengths + ' bytes, got ' + bytes.length\n          );\n        }\n        const padded = new Uint8Array(BYTES);\n        // isLE add 0 to right, !isLE to the left.\n        padded.set(bytes, isLE ? 0 : padded.length - bytes.length);\n        bytes = padded;\n      }\n      if (bytes.length !== BYTES)\n        throw new Error('Field.fromBytes: expected ' + BYTES + ' bytes, got ' + bytes.length);\n      let scalar = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n      if (modFromBytes) scalar = mod(scalar, ORDER);\n      if (!skipValidation)\n        if (!f.isValid(scalar)) throw new Error('invalid field element: outside of range 0..ORDER');\n      // NOTE: we don't validate scalar here, please use isValid. This done such way because some\n      // protocol may allow non-reduced scalar that reduced later or changed some other way.\n      return scalar;\n    },\n    // TODO: we don't need it here, move out to separate fn\n    invertBatch: (lst) => FpInvertBatch(f, lst),\n    // We can't move this out because Fp6, Fp12 implement it\n    // and it's unclear what to return in there.\n    cmov: (a, b, c) => (c ? b : a),\n  } as FpField);\n  return Object.freeze(f);\n}\n\n// Generic random scalar, we can do same for other fields if via Fp2.mul(Fp2.ONE, Fp2.random)?\n// This allows unsafe methods like ignore bias or zero. These unsafe, but often used in different protocols (if deterministic RNG).\n// which mean we cannot force this via opts.\n// Not sure what to do with randomBytes, we can accept it inside opts if wanted.\n// Probably need to export getMinHashLength somewhere?\n// random(bytes?: Uint8Array, unsafeAllowZero = false, unsafeAllowBias = false) {\n//   const LEN = !unsafeAllowBias ? getMinHashLength(ORDER) : BYTES;\n//   if (bytes === undefined) bytes = randomBytes(LEN); // _opts.randomBytes?\n//   const num = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n//   // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n//   const reduced = unsafeAllowZero ? mod(num, ORDER) : mod(num, ORDER - _1n) + _1n;\n//   return reduced;\n// },\n\nexport function FpSqrtOdd<T>(Fp: IField<T>, elm: T): T {\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? root : Fp.neg(root);\n}\n\nexport function FpSqrtEven<T>(Fp: IField<T>, elm: T): T {\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use `mapKeyToField` instead\n */\nexport function hashToPrivateScalar(\n  hash: string | Uint8Array,\n  groupOrder: bigint,\n  isLE = false\n): bigint {\n  hash = ensureBytes('privateHash', hash);\n  const hashLen = hash.length;\n  const minLen = nLength(groupOrder).nByteLength + 8;\n  if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n    throw new Error(\n      'hashToPrivateScalar: expected ' + minLen + '-1024 bytes of input, got ' + hashLen\n    );\n  const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n  return mod(num, groupOrder - _1n) + _1n;\n}\n\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nexport function getFieldBytesLength(fieldOrder: bigint): number {\n  if (typeof fieldOrder !== 'bigint') throw new Error('field order must be bigint');\n  const bitLength = fieldOrder.toString(2).length;\n  return Math.ceil(bitLength / 8);\n}\n\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nexport function getMinHashLength(fieldOrder: bigint): number {\n  const length = getFieldBytesLength(fieldOrder);\n  return length + Math.ceil(length / 2);\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nexport function mapHashToField(key: Uint8Array, fieldOrder: bigint, isLE = false): Uint8Array {\n  const len = key.length;\n  const fieldLen = getFieldBytesLength(fieldOrder);\n  const minLen = getMinHashLength(fieldOrder);\n  // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n  if (len < 16 || len < minLen || len > 1024)\n    throw new Error('expected ' + minLen + '-1024 bytes of input, got ' + len);\n  const num = isLE ? bytesToNumberLE(key) : bytesToNumberBE(key);\n  // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n  const reduced = mod(num, fieldOrder - _1n) + _1n;\n  return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\n}\n","/**\n * Methods for elliptic curve multiplication by scalars.\n * Contains wNAF, pippenger.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { bitLen, bitMask, validateObject } from '../utils.ts';\nimport { Field, FpInvertBatch, nLength, validateField, type IField } from './modular.ts';\n\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n\nexport type AffinePoint<T> = {\n  x: T;\n  y: T;\n} & { Z?: never };\n\n// This was initialy do this way to re-use montgomery ladder in field (add->mul,double->sqr), but\n// that didn't happen and there is probably not much reason to have separate Group like this?\nexport interface Group<T extends Group<T>> {\n  double(): T;\n  negate(): T;\n  add(other: T): T;\n  subtract(other: T): T;\n  equals(other: T): boolean;\n  multiply(scalar: bigint): T;\n  toAffine?(invertedZ?: any): AffinePoint<any>;\n}\n\n// We can't \"abstract out\" coordinates (X, Y, Z; and T in Edwards): argument names of constructor\n// are not accessible. See Typescript gh-56093, gh-41594.\n//\n// We have to use recursive types, so it will return actual point, not constained `CurvePoint`.\n// If, at any point, P is `any`, it will erase all types and replace it\n// with `any`, because of recursion, `any implements CurvePoint`,\n// but we lose all constrains on methods.\n\n/** Base interface for all elliptic curve Points. */\nexport interface CurvePoint<F, P extends CurvePoint<F, P>> extends Group<P> {\n  /** Affine x coordinate. Different from projective / extended X coordinate. */\n  x: F;\n  /** Affine y coordinate. Different from projective / extended Y coordinate. */\n  y: F;\n  Z?: F;\n  double(): P;\n  negate(): P;\n  add(other: P): P;\n  subtract(other: P): P;\n  equals(other: P): boolean;\n  multiply(scalar: bigint): P;\n  assertValidity(): void;\n  clearCofactor(): P;\n  is0(): boolean;\n  isTorsionFree(): boolean;\n  isSmallOrder(): boolean;\n  multiplyUnsafe(scalar: bigint): P;\n  /**\n   * Massively speeds up `p.multiply(n)` by using precompute tables (caching). See {@link wNAF}.\n   * @param isLazy calculate cache now. Default (true) ensures it's deferred to first `multiply()`\n   */\n  precompute(windowSize?: number, isLazy?: boolean): P;\n  /** Converts point to 2D xy affine coordinates */\n  toAffine(invertedZ?: F): AffinePoint<F>;\n  toBytes(): Uint8Array;\n  toHex(): string;\n}\n\n/** Base interface for all elliptic curve Point constructors. */\nexport interface CurvePointCons<P extends CurvePoint<any, P>> {\n  [Symbol.hasInstance]: (item: unknown) => boolean;\n  BASE: P;\n  ZERO: P;\n  /** Field for basic curve math */\n  Fp: IField<P_F<P>>;\n  /** Scalar field, for scalars in multiply and others */\n  Fn: IField<bigint>;\n  /** Creates point from x, y. Does NOT validate if the point is valid. Use `.assertValidity()`. */\n  fromAffine(p: AffinePoint<P_F<P>>): P;\n  fromBytes(bytes: Uint8Array): P;\n  fromHex(hex: Uint8Array | string): P;\n}\n\n// Type inference helpers: PC - PointConstructor, P - Point, Fp - Field element\n// Short names, because we use them a lot in result types:\n// * we can't do 'P = GetCurvePoint<PC>': this is default value and doesn't constrain anything\n// * we can't do 'type X = GetCurvePoint<PC>': it won't be accesible for arguments/return types\n// * `CurvePointCons<P extends CurvePoint<any, P>>` constraints from interface definition\n//   won't propagate, if `PC extends CurvePointCons<any>`: the P would be 'any', which is incorrect\n// * PC could be super specific with super specific P, which implements CurvePoint<any, P>.\n//   this means we need to do stuff like\n//   `function test<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(`\n//   if we want type safety around P, otherwise PC_P<PC> will be any\n\n/** Returns Fp type from Point (P_F<P> == P.F) */\nexport type P_F<P extends CurvePoint<any, P>> = P extends CurvePoint<infer F, P> ? F : never;\n/** Returns Fp type from PointCons (PC_F<PC> == PC.P.F) */\nexport type PC_F<PC extends CurvePointCons<CurvePoint<any, any>>> = PC['Fp']['ZERO'];\n/** Returns Point type from PointCons (PC_P<PC> == PC.P) */\nexport type PC_P<PC extends CurvePointCons<CurvePoint<any, any>>> = PC['ZERO'];\n\n// Ugly hack to get proper type inference, because in typescript fails to infer resursively.\n// The hack allows to do up to 10 chained operations without applying type erasure.\n//\n// Types which won't work:\n// * `CurvePointCons<CurvePoint<any, any>>`, will return `any` after 1 operation\n// * `CurvePointCons<any>: WeierstrassPointCons<bigint> extends CurvePointCons<any> = false`\n// * `P extends CurvePoint, PC extends CurvePointCons<P>`\n//     * It can't infer P from PC alone\n//     * Too many relations between F, P & PC\n//     * It will infer P/F if `arg: CurvePointCons<F, P>`, but will fail if PC is generic\n//     * It will work correctly if there is an additional argument of type P\n//     * But generally, we don't want to parametrize `CurvePointCons` over `F`: it will complicate\n//       types, making them un-inferable\n// prettier-ignore\nexport type PC_ANY = CurvePointCons<\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any, any>\n  >>>>>>>>>\n>;\n\nexport interface CurveLengths {\n  secretKey?: number;\n  publicKey?: number;\n  publicKeyUncompressed?: number;\n  publicKeyHasPrefix?: boolean;\n  signature?: number;\n  seed?: number;\n}\nexport type GroupConstructor<T> = {\n  BASE: T;\n  ZERO: T;\n};\n/** @deprecated */\nexport type ExtendedGroupConstructor<T> = GroupConstructor<T> & {\n  Fp: IField<any>;\n  Fn: IField<bigint>;\n  fromAffine(ap: AffinePoint<any>): T;\n};\nexport type Mapper<T> = (i: T[]) => T[];\n\nexport function negateCt<T extends { negate: () => T }>(condition: boolean, item: T): T {\n  const neg = item.negate();\n  return condition ? neg : item;\n}\n\n/**\n * Takes a bunch of Projective Points but executes only one\n * inversion on all of them. Inversion is very slow operation,\n * so this improves performance massively.\n * Optimization: converts a list of projective points to a list of identical points with Z=1.\n */\nexport function normalizeZ<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  points: P[]\n): P[] {\n  const invertedZs = FpInvertBatch(\n    c.Fp,\n    points.map((p) => p.Z!)\n  );\n  return points.map((p, i) => c.fromAffine(p.toAffine(invertedZs[i])));\n}\n\nfunction validateW(W: number, bits: number) {\n  if (!Number.isSafeInteger(W) || W <= 0 || W > bits)\n    throw new Error('invalid window size, expected [1..' + bits + '], got W=' + W);\n}\n\n/** Internal wNAF opts for specific W and scalarBits */\nexport type WOpts = {\n  windows: number;\n  windowSize: number;\n  mask: bigint;\n  maxNumber: number;\n  shiftBy: bigint;\n};\n\nfunction calcWOpts(W: number, scalarBits: number): WOpts {\n  validateW(W, scalarBits);\n  const windows = Math.ceil(scalarBits / W) + 1; // W=8 33. Not 32, because we skip zero\n  const windowSize = 2 ** (W - 1); // W=8 128. Not 256, because we skip zero\n  const maxNumber = 2 ** W; // W=8 256\n  const mask = bitMask(W); // W=8 255 == mask 0b11111111\n  const shiftBy = BigInt(W); // W=8 8\n  return { windows, windowSize, mask, maxNumber, shiftBy };\n}\n\nfunction calcOffsets(n: bigint, window: number, wOpts: WOpts) {\n  const { windowSize, mask, maxNumber, shiftBy } = wOpts;\n  let wbits = Number(n & mask); // extract W bits.\n  let nextN = n >> shiftBy; // shift number by W bits.\n\n  // What actually happens here:\n  // const highestBit = Number(mask ^ (mask >> 1n));\n  // let wbits2 = wbits - 1; // skip zero\n  // if (wbits2 & highestBit) { wbits2 ^= Number(mask); // (~);\n\n  // split if bits > max: +224 => 256-32\n  if (wbits > windowSize) {\n    // we skip zero, which means instead of `>= size-1`, we do `> size`\n    wbits -= maxNumber; // -32, can be maxNumber - wbits, but then we need to set isNeg here.\n    nextN += _1n; // +256 (carry)\n  }\n  const offsetStart = window * windowSize;\n  const offset = offsetStart + Math.abs(wbits) - 1; // -1 because we skip zero\n  const isZero = wbits === 0; // is current window slice a 0?\n  const isNeg = wbits < 0; // is current window slice negative?\n  const isNegF = window % 2 !== 0; // fake random statement for noise\n  const offsetF = offsetStart; // fake offset for noise\n  return { nextN, offset, isZero, isNeg, isNegF, offsetF };\n}\n\nfunction validateMSMPoints(points: any[], c: any) {\n  if (!Array.isArray(points)) throw new Error('array expected');\n  points.forEach((p, i) => {\n    if (!(p instanceof c)) throw new Error('invalid point at index ' + i);\n  });\n}\nfunction validateMSMScalars(scalars: any[], field: any) {\n  if (!Array.isArray(scalars)) throw new Error('array of scalars expected');\n  scalars.forEach((s, i) => {\n    if (!field.isValid(s)) throw new Error('invalid scalar at index ' + i);\n  });\n}\n\n// Since points in different groups cannot be equal (different object constructor),\n// we can have single place to store precomputes.\n// Allows to make points frozen / immutable.\nconst pointPrecomputes = new WeakMap<any, any[]>();\nconst pointWindowSizes = new WeakMap<any, number>();\n\nfunction getW(P: any): number {\n  // To disable precomputes:\n  // return 1;\n  return pointWindowSizes.get(P) || 1;\n}\n\nfunction assert0(n: bigint): void {\n  if (n !== _0n) throw new Error('invalid wNAF');\n}\n\n/**\n * Elliptic curve multiplication of Point by scalar. Fragile.\n * Table generation takes **30MB of ram and 10ms on high-end CPU**,\n * but may take much longer on slow devices. Actual generation will happen on\n * first call of `multiply()`. By default, `BASE` point is precomputed.\n *\n * Scalars should always be less than curve order: this should be checked inside of a curve itself.\n * Creates precomputation tables for fast multiplication:\n * - private scalar is split by fixed size windows of W bits\n * - every window point is collected from window's table & added to accumulator\n * - since windows are different, same point inside tables won't be accessed more than once per calc\n * - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n * - +1 window is neccessary for wNAF\n * - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n *\n * @todo Research returning 2d JS array of windows, instead of a single window.\n * This would allow windows to be in different memory locations\n */\nexport class wNAF<PC extends PC_ANY> {\n  private readonly BASE: PC_P<PC>;\n  private readonly ZERO: PC_P<PC>;\n  private readonly Fn: PC['Fn'];\n  readonly bits: number;\n\n  // Parametrized with a given Point class (not individual point)\n  constructor(Point: PC, bits: number) {\n    this.BASE = Point.BASE;\n    this.ZERO = Point.ZERO;\n    this.Fn = Point.Fn;\n    this.bits = bits;\n  }\n\n  // non-const time multiplication ladder\n  _unsafeLadder(elm: PC_P<PC>, n: bigint, p: PC_P<PC> = this.ZERO): PC_P<PC> {\n    let d: PC_P<PC> = elm;\n    while (n > _0n) {\n      if (n & _1n) p = p.add(d);\n      d = d.double();\n      n >>= _1n;\n    }\n    return p;\n  }\n\n  /**\n   * Creates a wNAF precomputation window. Used for caching.\n   * Default window size is set by `utils.precompute()` and is equal to 8.\n   * Number of precomputed points depends on the curve size:\n   * 2^(1) * (Math.ceil( / ) + 1), where:\n   * -  is the window size\n   * -  is the bitlength of the curve order.\n   * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n   * @param point Point instance\n   * @param W window size\n   * @returns precomputed point tables flattened to a single array\n   */\n  private precomputeWindow(point: PC_P<PC>, W: number): PC_P<PC>[] {\n    const { windows, windowSize } = calcWOpts(W, this.bits);\n    const points: PC_P<PC>[] = [];\n    let p: PC_P<PC> = point;\n    let base = p;\n    for (let window = 0; window < windows; window++) {\n      base = p;\n      points.push(base);\n      // i=1, bc we skip 0\n      for (let i = 1; i < windowSize; i++) {\n        base = base.add(p);\n        points.push(base);\n      }\n      p = base.double();\n    }\n    return points;\n  }\n\n  /**\n   * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n   * More compact implementation:\n   * https://github.com/paulmillr/noble-secp256k1/blob/47cb1669b6e506ad66b35fe7d76132ae97465da2/index.ts#L502-L541\n   * @returns real and fake (for const-time) points\n   */\n  private wNAF(W: number, precomputes: PC_P<PC>[], n: bigint): { p: PC_P<PC>; f: PC_P<PC> } {\n    // Scalar should be smaller than field order\n    if (!this.Fn.isValid(n)) throw new Error('invalid scalar');\n    // Accumulators\n    let p = this.ZERO;\n    let f = this.BASE;\n    // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n    // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n    // there is negate now: it is possible that negated element from low value\n    // would be the same as high element, which will create carry into next window.\n    // It's not obvious how this can fail, but still worth investigating later.\n    const wo = calcWOpts(W, this.bits);\n    for (let window = 0; window < wo.windows; window++) {\n      // (n === _0n) is handled and not early-exited. isEven and offsetF are used for noise\n      const { nextN, offset, isZero, isNeg, isNegF, offsetF } = calcOffsets(n, window, wo);\n      n = nextN;\n      if (isZero) {\n        // bits are 0: add garbage to fake point\n        // Important part for const-time getPublicKey: add random \"noise\" point to f.\n        f = f.add(negateCt(isNegF, precomputes[offsetF]));\n      } else {\n        // bits are 1: add to result point\n        p = p.add(negateCt(isNeg, precomputes[offset]));\n      }\n    }\n    assert0(n);\n    // Return both real and fake points: JIT won't eliminate f.\n    // At this point there is a way to F be infinity-point even if p is not,\n    // which makes it less const-time: around 1 bigint multiply.\n    return { p, f };\n  }\n\n  /**\n   * Implements ec unsafe (non const-time) multiplication using precomputed tables and w-ary non-adjacent form.\n   * @param acc accumulator point to add result of multiplication\n   * @returns point\n   */\n  private wNAFUnsafe(\n    W: number,\n    precomputes: PC_P<PC>[],\n    n: bigint,\n    acc: PC_P<PC> = this.ZERO\n  ): PC_P<PC> {\n    const wo = calcWOpts(W, this.bits);\n    for (let window = 0; window < wo.windows; window++) {\n      if (n === _0n) break; // Early-exit, skip 0 value\n      const { nextN, offset, isZero, isNeg } = calcOffsets(n, window, wo);\n      n = nextN;\n      if (isZero) {\n        // Window bits are 0: skip processing.\n        // Move to next window.\n        continue;\n      } else {\n        const item = precomputes[offset];\n        acc = acc.add(isNeg ? item.negate() : item); // Re-using acc allows to save adds in MSM\n      }\n    }\n    assert0(n);\n    return acc;\n  }\n\n  private getPrecomputes(W: number, point: PC_P<PC>, transform?: Mapper<PC_P<PC>>): PC_P<PC>[] {\n    // Calculate precomputes on a first run, reuse them after\n    let comp = pointPrecomputes.get(point);\n    if (!comp) {\n      comp = this.precomputeWindow(point, W) as PC_P<PC>[];\n      if (W !== 1) {\n        // Doing transform outside of if brings 15% perf hit\n        if (typeof transform === 'function') comp = transform(comp);\n        pointPrecomputes.set(point, comp);\n      }\n    }\n    return comp;\n  }\n\n  cached(\n    point: PC_P<PC>,\n    scalar: bigint,\n    transform?: Mapper<PC_P<PC>>\n  ): { p: PC_P<PC>; f: PC_P<PC> } {\n    const W = getW(point);\n    return this.wNAF(W, this.getPrecomputes(W, point, transform), scalar);\n  }\n\n  unsafe(point: PC_P<PC>, scalar: bigint, transform?: Mapper<PC_P<PC>>, prev?: PC_P<PC>): PC_P<PC> {\n    const W = getW(point);\n    if (W === 1) return this._unsafeLadder(point, scalar, prev); // For W=1 ladder is ~x2 faster\n    return this.wNAFUnsafe(W, this.getPrecomputes(W, point, transform), scalar, prev);\n  }\n\n  // We calculate precomputes for elliptic curve point multiplication\n  // using windowed method. This specifies window size and\n  // stores precomputed values. Usually only base point would be precomputed.\n  createCache(P: PC_P<PC>, W: number): void {\n    validateW(W, this.bits);\n    pointWindowSizes.set(P, W);\n    pointPrecomputes.delete(P);\n  }\n\n  hasCache(elm: PC_P<PC>): boolean {\n    return getW(elm) !== 1;\n  }\n}\n\n/**\n * Endomorphism-specific multiplication for Koblitz curves.\n * Cost: 128 dbl, 0-256 adds.\n */\nexport function mulEndoUnsafe<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  Point: PC,\n  point: P,\n  k1: bigint,\n  k2: bigint\n): { p1: P; p2: P } {\n  let acc = point;\n  let p1 = Point.ZERO;\n  let p2 = Point.ZERO;\n  while (k1 > _0n || k2 > _0n) {\n    if (k1 & _1n) p1 = p1.add(acc);\n    if (k2 & _1n) p2 = p2.add(acc);\n    acc = acc.double();\n    k1 >>= _1n;\n    k2 >>= _1n;\n  }\n  return { p1, p2 };\n}\n\n/**\n * Pippenger algorithm for multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * 30x faster vs naive addition on L=4096, 10x faster than precomputes.\n * For N=254bit, L=1, it does: 1024 ADD + 254 DBL. For L=5: 1536 ADD + 254 DBL.\n * Algorithmically constant-time (for same L), even when 1 point + scalar, or when scalar = 0.\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @param scalars array of L scalars (aka secret keys / bigints)\n */\nexport function pippenger<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  fieldN: IField<bigint>,\n  points: P[],\n  scalars: bigint[]\n): P {\n  // If we split scalars by some window (let's say 8 bits), every chunk will only\n  // take 256 buckets even if there are 4096 scalars, also re-uses double.\n  // TODO:\n  // - https://eprint.iacr.org/2024/750.pdf\n  // - https://tches.iacr.org/index.php/TCHES/article/view/10287\n  // 0 is accepted in scalars\n  validateMSMPoints(points, c);\n  validateMSMScalars(scalars, fieldN);\n  const plength = points.length;\n  const slength = scalars.length;\n  if (plength !== slength) throw new Error('arrays of points and scalars must have equal length');\n  // if (plength === 0) throw new Error('array must be of length >= 2');\n  const zero = c.ZERO;\n  const wbits = bitLen(BigInt(plength));\n  let windowSize = 1; // bits\n  if (wbits > 12) windowSize = wbits - 3;\n  else if (wbits > 4) windowSize = wbits - 2;\n  else if (wbits > 0) windowSize = 2;\n  const MASK = bitMask(windowSize);\n  const buckets = new Array(Number(MASK) + 1).fill(zero); // +1 for zero array\n  const lastBits = Math.floor((fieldN.BITS - 1) / windowSize) * windowSize;\n  let sum = zero;\n  for (let i = lastBits; i >= 0; i -= windowSize) {\n    buckets.fill(zero);\n    for (let j = 0; j < slength; j++) {\n      const scalar = scalars[j];\n      const wbits = Number((scalar >> BigInt(i)) & MASK);\n      buckets[wbits] = buckets[wbits].add(points[j]);\n    }\n    let resI = zero; // not using this will do small speed-up, but will lose ct\n    // Skip first bucket, because it is zero\n    for (let j = buckets.length - 1, sumI = zero; j > 0; j--) {\n      sumI = sumI.add(buckets[j]);\n      resI = resI.add(sumI);\n    }\n    sum = sum.add(resI);\n    if (i !== 0) for (let j = 0; j < windowSize; j++) sum = sum.double();\n  }\n  return sum as P;\n}\n/**\n * Precomputed multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @returns function which multiplies points with scaars\n */\nexport function precomputeMSMUnsafe<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  fieldN: IField<bigint>,\n  points: P[],\n  windowSize: number\n): (scalars: bigint[]) => P {\n  /**\n   * Performance Analysis of Window-based Precomputation\n   *\n   * Base Case (256-bit scalar, 8-bit window):\n   * - Standard precomputation requires:\n   *   - 31 additions per scalar  256 scalars = 7,936 ops\n   *   - Plus 255 summary additions = 8,191 total ops\n   *   Note: Summary additions can be optimized via accumulator\n   *\n   * Chunked Precomputation Analysis:\n   * - Using 32 chunks requires:\n   *   - 255 additions per chunk\n   *   - 256 doublings\n   *   - Total: (255  32) + 256 = 8,416 ops\n   *\n   * Memory Usage Comparison:\n   * Window Size | Standard Points | Chunked Points\n   * ------------|-----------------|---------------\n   *     4-bit   |     520         |      15\n   *     8-bit   |    4,224        |     255\n   *    10-bit   |   13,824        |   1,023\n   *    16-bit   |  557,056        |  65,535\n   *\n   * Key Advantages:\n   * 1. Enables larger window sizes due to reduced memory overhead\n   * 2. More efficient for smaller scalar counts:\n   *    - 16 chunks: (16  255) + 256 = 4,336 ops\n   *    - ~2x faster than standard 8,191 ops\n   *\n   * Limitations:\n   * - Not suitable for plain precomputes (requires 256 constant doublings)\n   * - Performance degrades with larger scalar counts:\n   *   - Optimal for ~256 scalars\n   *   - Less efficient for 4096+ scalars (Pippenger preferred)\n   */\n  validateW(windowSize, fieldN.BITS);\n  validateMSMPoints(points, c);\n  const zero = c.ZERO;\n  const tableSize = 2 ** windowSize - 1; // table size (without zero)\n  const chunks = Math.ceil(fieldN.BITS / windowSize); // chunks of item\n  const MASK = bitMask(windowSize);\n  const tables = points.map((p: P) => {\n    const res = [];\n    for (let i = 0, acc = p; i < tableSize; i++) {\n      res.push(acc);\n      acc = acc.add(p);\n    }\n    return res;\n  });\n  return (scalars: bigint[]): P => {\n    validateMSMScalars(scalars, fieldN);\n    if (scalars.length > points.length)\n      throw new Error('array of scalars must be smaller than array of points');\n    let res = zero;\n    for (let i = 0; i < chunks; i++) {\n      // No need to double if accumulator is still zero.\n      if (res !== zero) for (let j = 0; j < windowSize; j++) res = res.double();\n      const shiftBy = BigInt(chunks * windowSize - (i + 1) * windowSize);\n      for (let j = 0; j < scalars.length; j++) {\n        const n = scalars[j];\n        const curr = Number((n >> shiftBy) & MASK);\n        if (!curr) continue; // skip zero scalars chunks\n        res = res.add(tables[j][curr - 1]);\n      }\n    }\n    return res;\n  };\n}\n\n// TODO: remove\n/**\n * Generic BasicCurve interface: works even for polynomial fields (BLS): P, n, h would be ok.\n * Though generator can be different (Fp2 / Fp6 for BLS).\n */\nexport type BasicCurve<T> = {\n  Fp: IField<T>; // Field over which we'll do calculations (Fp)\n  n: bigint; // Curve order, total count of valid points in the field\n  nBitLength?: number; // bit length of curve order\n  nByteLength?: number; // byte length of curve order\n  h: bigint; // cofactor. we can assign default=1, but users will just ignore it w/o validation\n  hEff?: bigint; // Number to multiply to clear cofactor\n  Gx: T; // base point X coordinate\n  Gy: T; // base point Y coordinate\n  allowInfinityPoint?: boolean; // bls12-381 requires it. ZERO point is valid, but invalid pubkey\n};\n\n// TODO: remove\n/** @deprecated */\nexport function validateBasic<FP, T>(\n  curve: BasicCurve<FP> & T\n): Readonly<\n  {\n    readonly nBitLength: number;\n    readonly nByteLength: number;\n  } & BasicCurve<FP> &\n    T & {\n      p: bigint;\n    }\n> {\n  validateField(curve.Fp);\n  validateObject(\n    curve,\n    {\n      n: 'bigint',\n      h: 'bigint',\n      Gx: 'field',\n      Gy: 'field',\n    },\n    {\n      nBitLength: 'isSafeInteger',\n      nByteLength: 'isSafeInteger',\n    }\n  );\n  // Set defaults\n  return Object.freeze({\n    ...nLength(curve.n, curve.nBitLength),\n    ...curve,\n    ...{ p: curve.Fp.ORDER },\n  } as const);\n}\n\nexport type ValidCurveParams<T> = {\n  p: bigint;\n  n: bigint;\n  h: bigint;\n  a: T;\n  b?: T;\n  d?: T;\n  Gx: T;\n  Gy: T;\n};\n\nfunction createField<T>(order: bigint, field?: IField<T>, isLE?: boolean): IField<T> {\n  if (field) {\n    if (field.ORDER !== order) throw new Error('Field.ORDER must match order: Fp == p, Fn == n');\n    validateField(field);\n    return field;\n  } else {\n    return Field(order, { isLE }) as unknown as IField<T>;\n  }\n}\nexport type FpFn<T> = { Fp: IField<T>; Fn: IField<bigint> };\n\n/** Validates CURVE opts and creates fields */\nexport function _createCurveFields<T>(\n  type: 'weierstrass' | 'edwards',\n  CURVE: ValidCurveParams<T>,\n  curveOpts: Partial<FpFn<T>> = {},\n  FpFnLE?: boolean\n): FpFn<T> & { CURVE: ValidCurveParams<T> } {\n  if (FpFnLE === undefined) FpFnLE = type === 'edwards';\n  if (!CURVE || typeof CURVE !== 'object') throw new Error(`expected valid ${type} CURVE object`);\n  for (const p of ['p', 'n', 'h'] as const) {\n    const val = CURVE[p];\n    if (!(typeof val === 'bigint' && val > _0n))\n      throw new Error(`CURVE.${p} must be positive bigint`);\n  }\n  const Fp = createField(CURVE.p, curveOpts.Fp, FpFnLE);\n  const Fn = createField(CURVE.n, curveOpts.Fn, FpFnLE);\n  const _b: 'b' | 'd' = type === 'weierstrass' ? 'b' : 'd';\n  const params = ['Gx', 'Gy', 'a', _b] as const;\n  for (const p of params) {\n    // @ts-ignore\n    if (!Fp.isValid(CURVE[p]))\n      throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);\n  }\n  CURVE = Object.freeze(Object.assign({}, CURVE));\n  return { CURVE, Fp, Fn };\n}\n","/**\n * Short Weierstrass curve methods. The formula is: y = x + ax + b.\n *\n * ### Design rationale for types\n *\n * * Interaction between classes from different curves should fail:\n *   `k256.Point.BASE.add(p256.Point.BASE)`\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\n * * Different calls of `curve()` would return different classes -\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\n *   it won't affect others\n *\n * TypeScript can't infer types for classes created inside a function. Classes is one instance\n * of nominative types in TypeScript and interfaces only check for shape, so it's hard to create\n * unique type for every function call.\n *\n * We can use generic types via some param, like curve opts, but that would:\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\n *     which is hard to debug.\n *     2. Params can be generic and we can't enforce them to be constant value:\n *     if somebody creates curve from non-constant params,\n *     it would be allowed to interact with other curves with non-constant params\n *\n * @todo https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac as nobleHmac } from '@noble/hashes/hmac.js';\nimport { ahash } from '@noble/hashes/utils';\nimport {\n  _validateObject,\n  _abool2 as abool,\n  _abytes2 as abytes,\n  aInRange,\n  bitLen,\n  bitMask,\n  bytesToHex,\n  bytesToNumberBE,\n  concatBytes,\n  createHmacDrbg,\n  ensureBytes,\n  hexToBytes,\n  inRange,\n  isBytes,\n  memoized,\n  numberToHexUnpadded,\n  randomBytes as randomBytesWeb,\n  type CHash,\n  type Hex,\n  type PrivKey,\n} from '../utils.ts';\nimport {\n  _createCurveFields,\n  mulEndoUnsafe,\n  negateCt,\n  normalizeZ,\n  pippenger,\n  wNAF,\n  type AffinePoint,\n  type BasicCurve,\n  type CurveLengths,\n  type CurvePoint,\n  type CurvePointCons,\n} from './curve.ts';\nimport {\n  Field,\n  FpInvertBatch,\n  getMinHashLength,\n  mapHashToField,\n  nLength,\n  validateField,\n  type IField,\n  type NLength,\n} from './modular.ts';\n\nexport type { AffinePoint };\nexport type HmacFnSync = (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array;\n\ntype EndoBasis = [[bigint, bigint], [bigint, bigint]];\n/**\n * When Weierstrass curve has `a=0`, it becomes Koblitz curve.\n * Koblitz curves allow using **efficiently-computable GLV endomorphism **.\n * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n *\n * Endomorphism consists of beta, lambda and splitScalar:\n *\n * 1. GLV endomorphism  transforms a point: `P = (x, y)  (P) = (x mod p, y)`\n * 2. GLV scalar decomposition transforms a scalar: `k  k + k (mod n)`\n * 3. Then these are combined: `kP = kP + k(P)`\n * 4. Two 128-bit point-by-scalar multiplications + one point addition is faster than\n *    one 256-bit multiplication.\n *\n * where\n * * beta:   F with  = 1,   1\n * * lambda:   F with  = 1,   1\n * * splitScalar decomposes k  k, k, by using reduced basis vectors.\n *   Gauss lattice reduction calculates them from initial basis vectors `(n, 0), (-, 0)`\n *\n * Check out `test/misc/endomorphism.js` and\n * [gist](https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066).\n */\nexport type EndomorphismOpts = {\n  beta: bigint;\n  basises?: EndoBasis;\n  splitScalar?: (k: bigint) => { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\n};\n\n// We construct basis in such way that den is always positive and equals n, but num sign depends on basis (not on secret value)\nconst divNearest = (num: bigint, den: bigint) => (num + (num >= 0 ? den : -den) / _2n) / den;\n\nexport type ScalarEndoParts = { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\n\n/**\n * Splits scalar for GLV endomorphism.\n */\nexport function _splitEndoScalar(k: bigint, basis: EndoBasis, n: bigint): ScalarEndoParts {\n  // Split scalar into two such that part is ~half bits: `abs(part) < sqrt(N)`\n  // Since part can be negative, we need to do this on point.\n  // TODO: verifyScalar function which consumes lambda\n  const [[a1, b1], [a2, b2]] = basis;\n  const c1 = divNearest(b2 * k, n);\n  const c2 = divNearest(-b1 * k, n);\n  // |k1|/|k2| is < sqrt(N), but can be negative.\n  // If we do `k1 mod N`, we'll get big scalar (`> sqrt(N)`): so, we do cheaper negation instead.\n  let k1 = k - c1 * a1 - c2 * a2;\n  let k2 = -c1 * b1 - c2 * b2;\n  const k1neg = k1 < _0n;\n  const k2neg = k2 < _0n;\n  if (k1neg) k1 = -k1;\n  if (k2neg) k2 = -k2;\n  // Double check that resulting scalar less than half bits of N: otherwise wNAF will fail.\n  // This should only happen on wrong basises. Also, math inside is too complex and I don't trust it.\n  const MAX_NUM = bitMask(Math.ceil(bitLen(n) / 2)) + _1n; // Half bits of N\n  if (k1 < _0n || k1 >= MAX_NUM || k2 < _0n || k2 >= MAX_NUM) {\n    throw new Error('splitScalar (endomorphism): failed, k=' + k);\n  }\n  return { k1neg, k1, k2neg, k2 };\n}\n\nexport type ECDSASigFormat = 'compact' | 'recovered' | 'der';\nexport type ECDSARecoverOpts = {\n  prehash?: boolean;\n};\nexport type ECDSAVerifyOpts = {\n  prehash?: boolean;\n  lowS?: boolean;\n  format?: ECDSASigFormat;\n};\nexport type ECDSASignOpts = {\n  prehash?: boolean;\n  lowS?: boolean;\n  format?: ECDSASigFormat;\n  extraEntropy?: Uint8Array | boolean;\n};\n\nfunction validateSigFormat(format: string): ECDSASigFormat {\n  if (!['compact', 'recovered', 'der'].includes(format))\n    throw new Error('Signature format must be \"compact\", \"recovered\", or \"der\"');\n  return format as ECDSASigFormat;\n}\n\nfunction validateSigOpts<T extends ECDSASignOpts, D extends Required<ECDSASignOpts>>(\n  opts: T,\n  def: D\n): Required<ECDSASignOpts> {\n  const optsn: ECDSASignOpts = {};\n  for (let optName of Object.keys(def)) {\n    // @ts-ignore\n    optsn[optName] = opts[optName] === undefined ? def[optName] : opts[optName];\n  }\n  abool(optsn.lowS!, 'lowS');\n  abool(optsn.prehash!, 'prehash');\n  if (optsn.format !== undefined) validateSigFormat(optsn.format);\n  return optsn as Required<ECDSASignOpts>;\n}\n\n/** Instance methods for 3D XYZ projective points. */\nexport interface WeierstrassPoint<T> extends CurvePoint<T, WeierstrassPoint<T>> {\n  /** projective X coordinate. Different from affine x. */\n  readonly X: T;\n  /** projective Y coordinate. Different from affine y. */\n  readonly Y: T;\n  /** projective z coordinate */\n  readonly Z: T;\n  /** affine x coordinate. Different from projective X. */\n  get x(): T;\n  /** affine y coordinate. Different from projective Y. */\n  get y(): T;\n  /** Encodes point using IEEE P1363 (DER) encoding. First byte is 2/3/4. Default = isCompressed. */\n  toBytes(isCompressed?: boolean): Uint8Array;\n  toHex(isCompressed?: boolean): string;\n\n  /** @deprecated use `.X` */\n  readonly px: T;\n  /** @deprecated use `.Y` */\n  readonly py: T;\n  /** @deprecated use `.Z` */\n  readonly pz: T;\n  /** @deprecated use `toBytes` */\n  toRawBytes(isCompressed?: boolean): Uint8Array;\n  /** @deprecated use `multiplyUnsafe` */\n  multiplyAndAddUnsafe(\n    Q: WeierstrassPoint<T>,\n    a: bigint,\n    b: bigint\n  ): WeierstrassPoint<T> | undefined;\n  /** @deprecated use `p.y % 2n === 0n` */\n  hasEvenY(): boolean;\n  /** @deprecated use `p.precompute(windowSize)` */\n  _setWindowSize(windowSize: number): void;\n}\n\n/** Static methods for 3D XYZ projective points. */\nexport interface WeierstrassPointCons<T> extends CurvePointCons<WeierstrassPoint<T>> {\n  /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n  new (X: T, Y: T, Z: T): WeierstrassPoint<T>;\n  CURVE(): WeierstrassOpts<T>;\n  /** @deprecated use `Point.BASE.multiply(Point.Fn.fromBytes(privateKey))` */\n  fromPrivateKey(privateKey: PrivKey): WeierstrassPoint<T>;\n  /** @deprecated use `import { normalizeZ } from '@noble/curves/abstract/curve.js';` */\n  normalizeZ(points: WeierstrassPoint<T>[]): WeierstrassPoint<T>[];\n  /** @deprecated use `import { pippenger } from '@noble/curves/abstract/curve.js';` */\n  msm(points: WeierstrassPoint<T>[], scalars: bigint[]): WeierstrassPoint<T>;\n}\n\n/**\n * Weierstrass curve options.\n *\n * * p: prime characteristic (order) of finite field, in which arithmetics is done\n * * n: order of prime subgroup a.k.a total amount of valid curve points\n * * h: cofactor, usually 1. h*n is group order; n is subgroup order\n * * a: formula param, must be in field of p\n * * b: formula param, must be in field of p\n * * Gx: x coordinate of generator point a.k.a. base point\n * * Gy: y coordinate of generator point\n */\nexport type WeierstrassOpts<T> = Readonly<{\n  p: bigint;\n  n: bigint;\n  h: bigint;\n  a: T;\n  b: T;\n  Gx: T;\n  Gy: T;\n}>;\n\n// When a cofactor != 1, there can be an effective methods to:\n// 1. Determine whether a point is torsion-free\n// 2. Clear torsion component\n// wrapPrivateKey: bls12-381 requires mod(n) instead of rejecting keys >= n\nexport type WeierstrassExtraOpts<T> = Partial<{\n  Fp: IField<T>;\n  Fn: IField<bigint>;\n  allowInfinityPoint: boolean;\n  endo: EndomorphismOpts;\n  isTorsionFree: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\n  clearCofactor: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\n  fromBytes: (bytes: Uint8Array) => AffinePoint<T>;\n  toBytes: (\n    c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ) => Uint8Array;\n}>;\n\n/**\n * Options for ECDSA signatures over a Weierstrass curve.\n *\n * * lowS: (default: true) whether produced / verified signatures occupy low half of ecdsaOpts.p. Prevents malleability.\n * * hmac: (default: noble-hashes hmac) function, would be used to init hmac-drbg for k generation.\n * * randomBytes: (default: webcrypto os-level CSPRNG) custom method for fetching secure randomness.\n * * bits2int, bits2int_modN: used in sigs, sometimes overridden by curves\n */\nexport type ECDSAOpts = Partial<{\n  lowS: boolean;\n  hmac: HmacFnSync;\n  randomBytes: (bytesLength?: number) => Uint8Array;\n  bits2int: (bytes: Uint8Array) => bigint;\n  bits2int_modN: (bytes: Uint8Array) => bigint;\n}>;\n\n/**\n * Elliptic Curve Diffie-Hellman interface.\n * Provides keygen, secret-to-public conversion, calculating shared secrets.\n */\nexport interface ECDH {\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n  getPublicKey: (secretKey: PrivKey, isCompressed?: boolean) => Uint8Array;\n  getSharedSecret: (secretKeyA: PrivKey, publicKeyB: Hex, isCompressed?: boolean) => Uint8Array;\n  Point: WeierstrassPointCons<bigint>;\n  utils: {\n    isValidSecretKey: (secretKey: PrivKey) => boolean;\n    isValidPublicKey: (publicKey: Uint8Array, isCompressed?: boolean) => boolean;\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `isValidSecretKey` */\n    isValidPrivateKey: (secretKey: PrivKey) => boolean;\n    /** @deprecated use `Point.Fn.fromBytes()` */\n    normPrivateKeyToScalar: (key: PrivKey) => bigint;\n    /** @deprecated use `point.precompute()` */\n    precompute: (windowSize?: number, point?: WeierstrassPoint<bigint>) => WeierstrassPoint<bigint>;\n  };\n  lengths: CurveLengths;\n}\n\n/**\n * ECDSA interface.\n * Only supported for prime fields, not Fp2 (extension fields).\n */\nexport interface ECDSA extends ECDH {\n  sign: (message: Hex, secretKey: PrivKey, opts?: ECDSASignOpts) => ECDSASigRecovered;\n  verify: (\n    signature: Uint8Array,\n    message: Uint8Array,\n    publicKey: Uint8Array,\n    opts?: ECDSAVerifyOpts\n  ) => boolean;\n  recoverPublicKey(signature: Uint8Array, message: Uint8Array, opts?: ECDSARecoverOpts): Uint8Array;\n  Signature: ECDSASignatureCons;\n}\nexport class DERErr extends Error {\n  constructor(m = '') {\n    super(m);\n  }\n}\nexport type IDER = {\n  // asn.1 DER encoding utils\n  Err: typeof DERErr;\n  // Basic building block is TLV (Tag-Length-Value)\n  _tlv: {\n    encode: (tag: number, data: string) => string;\n    // v - value, l - left bytes (unparsed)\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array };\n  };\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n  // since we always use positive integers here. It must always be empty:\n  // - add zero byte if exists\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n  _int: {\n    encode(num: bigint): string;\n    decode(data: Uint8Array): bigint;\n  };\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint };\n  hexFromSig(sig: { r: bigint; s: bigint }): string;\n};\n/**\n * ASN.1 DER encoding utilities. ASN is very complex & fragile. Format:\n *\n *     [0x30 (SEQUENCE), bytelength, 0x02 (INTEGER), intLength, R, 0x02 (INTEGER), intLength, S]\n *\n * Docs: https://letsencrypt.org/docs/a-warm-welcome-to-asn1-and-der/, https://luca.ntop.org/Teaching/Appunti/asn1.html\n */\nexport const DER: IDER = {\n  // asn.1 DER encoding utils\n  Err: DERErr,\n  // Basic building block is TLV (Tag-Length-Value)\n  _tlv: {\n    encode: (tag: number, data: string): string => {\n      const { Err: E } = DER;\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\n      if (data.length & 1) throw new E('tlv.encode: unpadded data');\n      const dataLen = data.length / 2;\n      const len = numberToHexUnpadded(dataLen);\n      if ((len.length / 2) & 0b1000_0000) throw new E('tlv.encode: long form length too big');\n      // length of length with long form flag\n      const lenLen = dataLen > 127 ? numberToHexUnpadded((len.length / 2) | 0b1000_0000) : '';\n      const t = numberToHexUnpadded(tag);\n      return t + lenLen + len + data;\n    },\n    // v - value, l - left bytes (unparsed)\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array } {\n      const { Err: E } = DER;\n      let pos = 0;\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\n      if (data.length < 2 || data[pos++] !== tag) throw new E('tlv.decode: wrong tlv');\n      const first = data[pos++];\n      const isLong = !!(first & 0b1000_0000); // First bit of first length byte is flag for short/long form\n      let length = 0;\n      if (!isLong) length = first;\n      else {\n        // Long form: [longFlag(1bit), lengthLength(7bit), length (BE)]\n        const lenLen = first & 0b0111_1111;\n        if (!lenLen) throw new E('tlv.decode(long): indefinite length not supported');\n        if (lenLen > 4) throw new E('tlv.decode(long): byte length is too big'); // this will overflow u32 in js\n        const lengthBytes = data.subarray(pos, pos + lenLen);\n        if (lengthBytes.length !== lenLen) throw new E('tlv.decode: length bytes not complete');\n        if (lengthBytes[0] === 0) throw new E('tlv.decode(long): zero leftmost byte');\n        for (const b of lengthBytes) length = (length << 8) | b;\n        pos += lenLen;\n        if (length < 128) throw new E('tlv.decode(long): not minimal encoding');\n      }\n      const v = data.subarray(pos, pos + length);\n      if (v.length !== length) throw new E('tlv.decode: wrong value length');\n      return { v, l: data.subarray(pos + length) };\n    },\n  },\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n  // since we always use positive integers here. It must always be empty:\n  // - add zero byte if exists\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n  _int: {\n    encode(num: bigint): string {\n      const { Err: E } = DER;\n      if (num < _0n) throw new E('integer: negative integers are not allowed');\n      let hex = numberToHexUnpadded(num);\n      // Pad with zero byte if negative flag is present\n      if (Number.parseInt(hex[0], 16) & 0b1000) hex = '00' + hex;\n      if (hex.length & 1) throw new E('unexpected DER parsing assertion: unpadded hex');\n      return hex;\n    },\n    decode(data: Uint8Array): bigint {\n      const { Err: E } = DER;\n      if (data[0] & 0b1000_0000) throw new E('invalid signature integer: negative');\n      if (data[0] === 0x00 && !(data[1] & 0b1000_0000))\n        throw new E('invalid signature integer: unnecessary leading zero');\n      return bytesToNumberBE(data);\n    },\n  },\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint } {\n    // parse DER signature\n    const { Err: E, _int: int, _tlv: tlv } = DER;\n    const data = ensureBytes('signature', hex);\n    const { v: seqBytes, l: seqLeftBytes } = tlv.decode(0x30, data);\n    if (seqLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\n    const { v: rBytes, l: rLeftBytes } = tlv.decode(0x02, seqBytes);\n    const { v: sBytes, l: sLeftBytes } = tlv.decode(0x02, rLeftBytes);\n    if (sLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\n    return { r: int.decode(rBytes), s: int.decode(sBytes) };\n  },\n  hexFromSig(sig: { r: bigint; s: bigint }): string {\n    const { _tlv: tlv, _int: int } = DER;\n    const rs = tlv.encode(0x02, int.encode(sig.r));\n    const ss = tlv.encode(0x02, int.encode(sig.s));\n    const seq = rs + ss;\n    return tlv.encode(0x30, seq);\n  },\n};\n\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\n\nexport function _normFnElement(Fn: IField<bigint>, key: PrivKey): bigint {\n  const { BYTES: expected } = Fn;\n  let num: bigint;\n  if (typeof key === 'bigint') {\n    num = key;\n  } else {\n    let bytes = ensureBytes('private key', key);\n    try {\n      num = Fn.fromBytes(bytes);\n    } catch (error) {\n      throw new Error(`invalid private key: expected ui8a of size ${expected}, got ${typeof key}`);\n    }\n  }\n  if (!Fn.isValidNot0(num)) throw new Error('invalid private key: out of range [1..N-1]');\n  return num;\n}\n\n/**\n * Creates weierstrass Point constructor, based on specified curve options.\n *\n * @example\n```js\nconst opts = {\n  p: BigInt('0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff'),\n  n: BigInt('0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551'),\n  h: BigInt(1),\n  a: BigInt('0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc'),\n  b: BigInt('0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b'),\n  Gx: BigInt('0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296'),\n  Gy: BigInt('0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5'),\n};\nconst p256_Point = weierstrass(opts);\n```\n */\nexport function weierstrassN<T>(\n  params: WeierstrassOpts<T>,\n  extraOpts: WeierstrassExtraOpts<T> = {}\n): WeierstrassPointCons<T> {\n  const validated = _createCurveFields('weierstrass', params, extraOpts);\n  const { Fp, Fn } = validated;\n  let CURVE = validated.CURVE as WeierstrassOpts<T>;\n  const { h: cofactor, n: CURVE_ORDER } = CURVE;\n  _validateObject(\n    extraOpts,\n    {},\n    {\n      allowInfinityPoint: 'boolean',\n      clearCofactor: 'function',\n      isTorsionFree: 'function',\n      fromBytes: 'function',\n      toBytes: 'function',\n      endo: 'object',\n      wrapPrivateKey: 'boolean',\n    }\n  );\n\n  const { endo } = extraOpts;\n  if (endo) {\n    // validateObject(endo, { beta: 'bigint', splitScalar: 'function' });\n    if (!Fp.is0(CURVE.a) || typeof endo.beta !== 'bigint' || !Array.isArray(endo.basises)) {\n      throw new Error('invalid endo: expected \"beta\": bigint and \"basises\": array');\n    }\n  }\n\n  const lengths = getWLengths(Fp, Fn);\n\n  function assertCompressionIsSupported() {\n    if (!Fp.isOdd) throw new Error('compression is not supported: Field does not have .isOdd()');\n  }\n\n  // Implements IEEE P1363 point encoding\n  function pointToBytes(\n    _c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ): Uint8Array {\n    const { x, y } = point.toAffine();\n    const bx = Fp.toBytes(x);\n    abool(isCompressed, 'isCompressed');\n    if (isCompressed) {\n      assertCompressionIsSupported();\n      const hasEvenY = !Fp.isOdd!(y);\n      return concatBytes(pprefix(hasEvenY), bx);\n    } else {\n      return concatBytes(Uint8Array.of(0x04), bx, Fp.toBytes(y));\n    }\n  }\n  function pointFromBytes(bytes: Uint8Array) {\n    abytes(bytes, undefined, 'Point');\n    const { publicKey: comp, publicKeyUncompressed: uncomp } = lengths; // e.g. for 32-byte: 33, 65\n    const length = bytes.length;\n    const head = bytes[0];\n    const tail = bytes.subarray(1);\n    // No actual validation is done here: use .assertValidity()\n    if (length === comp && (head === 0x02 || head === 0x03)) {\n      const x = Fp.fromBytes(tail);\n      if (!Fp.isValid(x)) throw new Error('bad point: is not on curve, wrong x');\n      const y2 = weierstrassEquation(x); // y = x + ax + b\n      let y: T;\n      try {\n        y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n      } catch (sqrtError) {\n        const err = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\n        throw new Error('bad point: is not on curve, sqrt error' + err);\n      }\n      assertCompressionIsSupported();\n      const isYOdd = Fp.isOdd!(y); // (y & _1n) === _1n;\n      const isHeadOdd = (head & 1) === 1; // ECDSA-specific\n      if (isHeadOdd !== isYOdd) y = Fp.neg(y);\n      return { x, y };\n    } else if (length === uncomp && head === 0x04) {\n      // TODO: more checks\n      const L = Fp.BYTES;\n      const x = Fp.fromBytes(tail.subarray(0, L));\n      const y = Fp.fromBytes(tail.subarray(L, L * 2));\n      if (!isValidXY(x, y)) throw new Error('bad point: is not on curve');\n      return { x, y };\n    } else {\n      throw new Error(\n        `bad point: got length ${length}, expected compressed=${comp} or uncompressed=${uncomp}`\n      );\n    }\n  }\n\n  const encodePoint = extraOpts.toBytes || pointToBytes;\n  const decodePoint = extraOpts.fromBytes || pointFromBytes;\n  function weierstrassEquation(x: T): T {\n    const x2 = Fp.sqr(x); // x * x\n    const x3 = Fp.mul(x2, x); // x * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, CURVE.a)), CURVE.b); // x + a * x + b\n  }\n\n  // TODO: move top-level\n  /** Checks whether equation holds for given x, y: y == x + ax + b */\n  function isValidXY(x: T, y: T): boolean {\n    const left = Fp.sqr(y); // y\n    const right = weierstrassEquation(x); // x + ax + b\n    return Fp.eql(left, right);\n  }\n\n  // Validate whether the passed curve params are valid.\n  // Test 1: equation y = x + ax + b should work for generator point.\n  if (!isValidXY(CURVE.Gx, CURVE.Gy)) throw new Error('bad curve params: generator point');\n\n  // Test 2: discriminant  part should be non-zero: 4a + 27b != 0.\n  // Guarantees curve is genus-1, smooth (non-singular).\n  const _4a3 = Fp.mul(Fp.pow(CURVE.a, _3n), _4n);\n  const _27b2 = Fp.mul(Fp.sqr(CURVE.b), BigInt(27));\n  if (Fp.is0(Fp.add(_4a3, _27b2))) throw new Error('bad curve params: a or b');\n\n  /** Asserts coordinate is valid: 0 <= n < Fp.ORDER. */\n  function acoord(title: string, n: T, banZero = false) {\n    if (!Fp.isValid(n) || (banZero && Fp.is0(n))) throw new Error(`bad point coordinate ${title}`);\n    return n;\n  }\n\n  function aprjpoint(other: unknown) {\n    if (!(other instanceof Point)) throw new Error('ProjectivePoint expected');\n  }\n\n  function splitEndoScalarN(k: bigint) {\n    if (!endo || !endo.basises) throw new Error('no endo');\n    return _splitEndoScalar(k, endo.basises, Fn.ORDER);\n  }\n\n  // Memoized toAffine / validity check. They are heavy. Points are immutable.\n\n  // Converts Projective point to affine (x, y) coordinates.\n  // Can accept precomputed Z^-1 - for example, from invertBatch.\n  // (X, Y, Z)  (x=X/Z, y=Y/Z)\n  const toAffineMemo = memoized((p: Point, iz?: T): AffinePoint<T> => {\n    const { X, Y, Z } = p;\n    // Fast-path for normalized points\n    if (Fp.eql(Z, Fp.ONE)) return { x: X, y: Y };\n    const is0 = p.is0();\n    // If invZ was 0, we return zero point. However we still want to execute\n    // all operations, so we replace invZ with a random number, 1.\n    if (iz == null) iz = is0 ? Fp.ONE : Fp.inv(Z);\n    const x = Fp.mul(X, iz);\n    const y = Fp.mul(Y, iz);\n    const zz = Fp.mul(Z, iz);\n    if (is0) return { x: Fp.ZERO, y: Fp.ZERO };\n    if (!Fp.eql(zz, Fp.ONE)) throw new Error('invZ was invalid');\n    return { x, y };\n  });\n  // NOTE: on exception this will crash 'cached' and no value will be set.\n  // Otherwise true will be return\n  const assertValidMemo = memoized((p: Point) => {\n    if (p.is0()) {\n      // (0, 1, 0) aka ZERO is invalid in most contexts.\n      // In BLS, ZERO can be serialized, so we allow it.\n      // (0, 0, 0) is invalid representation of ZERO.\n      if (extraOpts.allowInfinityPoint && !Fp.is0(p.Y)) return;\n      throw new Error('bad point: ZERO');\n    }\n    // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n    const { x, y } = p.toAffine();\n    if (!Fp.isValid(x) || !Fp.isValid(y)) throw new Error('bad point: x or y not field elements');\n    if (!isValidXY(x, y)) throw new Error('bad point: equation left != right');\n    if (!p.isTorsionFree()) throw new Error('bad point: not in prime-order subgroup');\n    return true;\n  });\n\n  function finishEndo(\n    endoBeta: EndomorphismOpts['beta'],\n    k1p: Point,\n    k2p: Point,\n    k1neg: boolean,\n    k2neg: boolean\n  ) {\n    k2p = new Point(Fp.mul(k2p.X, endoBeta), k2p.Y, k2p.Z);\n    k1p = negateCt(k1neg, k1p);\n    k2p = negateCt(k2neg, k2p);\n    return k1p.add(k2p);\n  }\n\n  /**\n   * Projective Point works in 3d / projective (homogeneous) coordinates:(X, Y, Z)  (x=X/Z, y=Y/Z).\n   * Default Point works in 2d / affine coordinates: (x, y).\n   * We're doing calculations in projective, because its operations don't require costly inversion.\n   */\n  class Point implements WeierstrassPoint<T> {\n    // base / generator point\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    // zero / infinity / identity point\n    static readonly ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO); // 0, 1, 0\n    // math field\n    static readonly Fp = Fp;\n    // scalar field\n    static readonly Fn = Fn;\n\n    readonly X: T;\n    readonly Y: T;\n    readonly Z: T;\n\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n    constructor(X: T, Y: T, Z: T) {\n      this.X = acoord('x', X);\n      this.Y = acoord('y', Y, true);\n      this.Z = acoord('z', Z);\n      Object.freeze(this);\n    }\n\n    static CURVE(): WeierstrassOpts<T> {\n      return CURVE;\n    }\n\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n    static fromAffine(p: AffinePoint<T>): Point {\n      const { x, y } = p || {};\n      if (!p || !Fp.isValid(x) || !Fp.isValid(y)) throw new Error('invalid affine point');\n      if (p instanceof Point) throw new Error('projective point not allowed');\n      // (0, 0) would've produced (0, 0, 1) - instead, we need (0, 1, 0)\n      if (Fp.is0(x) && Fp.is0(y)) return Point.ZERO;\n      return new Point(x, y, Fp.ONE);\n    }\n\n    static fromBytes(bytes: Uint8Array): Point {\n      const P = Point.fromAffine(decodePoint(abytes(bytes, undefined, 'point')));\n      P.assertValidity();\n      return P;\n    }\n    static fromHex(hex: Hex): Point {\n      return Point.fromBytes(ensureBytes('pointHex', hex));\n    }\n\n    get x(): T {\n      return this.toAffine().x;\n    }\n    get y(): T {\n      return this.toAffine().y;\n    }\n\n    /**\n     *\n     * @param windowSize\n     * @param isLazy true will defer table computation until the first multiplication\n     * @returns\n     */\n    precompute(windowSize: number = 8, isLazy = true): Point {\n      wnaf.createCache(this, windowSize);\n      if (!isLazy) this.multiply(_3n); // random number\n      return this;\n    }\n\n    // TODO: return `this`\n    /** A point on curve is valid if it conforms to equation. */\n    assertValidity(): void {\n      assertValidMemo(this);\n    }\n\n    hasEvenY(): boolean {\n      const { y } = this.toAffine();\n      if (!Fp.isOdd) throw new Error(\"Field doesn't support isOdd\");\n      return !Fp.isOdd(y);\n    }\n\n    /** Compare one point to another. */\n    equals(other: Point): boolean {\n      aprjpoint(other);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const { X: X2, Y: Y2, Z: Z2 } = other;\n      const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n      const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n      return U1 && U2;\n    }\n\n    /** Flips point to one corresponding to (x, -y) in Affine coordinates. */\n    negate(): Point {\n      return new Point(this.X, Fp.neg(this.Y), this.Z);\n    }\n\n    // Renes-Costello-Batina exception-free doubling formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 3\n    // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n    double() {\n      const { a, b } = CURVE;\n      const b3 = Fp.mul(b, _3n);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      let t0 = Fp.mul(X1, X1); // step 1\n      let t1 = Fp.mul(Y1, Y1);\n      let t2 = Fp.mul(Z1, Z1);\n      let t3 = Fp.mul(X1, Y1);\n      t3 = Fp.add(t3, t3); // step 5\n      Z3 = Fp.mul(X1, Z1);\n      Z3 = Fp.add(Z3, Z3);\n      X3 = Fp.mul(a, Z3);\n      Y3 = Fp.mul(b3, t2);\n      Y3 = Fp.add(X3, Y3); // step 10\n      X3 = Fp.sub(t1, Y3);\n      Y3 = Fp.add(t1, Y3);\n      Y3 = Fp.mul(X3, Y3);\n      X3 = Fp.mul(t3, X3);\n      Z3 = Fp.mul(b3, Z3); // step 15\n      t2 = Fp.mul(a, t2);\n      t3 = Fp.sub(t0, t2);\n      t3 = Fp.mul(a, t3);\n      t3 = Fp.add(t3, Z3);\n      Z3 = Fp.add(t0, t0); // step 20\n      t0 = Fp.add(Z3, t0);\n      t0 = Fp.add(t0, t2);\n      t0 = Fp.mul(t0, t3);\n      Y3 = Fp.add(Y3, t0);\n      t2 = Fp.mul(Y1, Z1); // step 25\n      t2 = Fp.add(t2, t2);\n      t0 = Fp.mul(t2, t3);\n      X3 = Fp.sub(X3, t0);\n      Z3 = Fp.mul(t2, t1);\n      Z3 = Fp.add(Z3, Z3); // step 30\n      Z3 = Fp.add(Z3, Z3);\n      return new Point(X3, Y3, Z3);\n    }\n\n    // Renes-Costello-Batina exception-free addition formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 1\n    // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n    add(other: Point): Point {\n      aprjpoint(other);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const { X: X2, Y: Y2, Z: Z2 } = other;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      const a = CURVE.a;\n      const b3 = Fp.mul(CURVE.b, _3n);\n      let t0 = Fp.mul(X1, X2); // step 1\n      let t1 = Fp.mul(Y1, Y2);\n      let t2 = Fp.mul(Z1, Z2);\n      let t3 = Fp.add(X1, Y1);\n      let t4 = Fp.add(X2, Y2); // step 5\n      t3 = Fp.mul(t3, t4);\n      t4 = Fp.add(t0, t1);\n      t3 = Fp.sub(t3, t4);\n      t4 = Fp.add(X1, Z1);\n      let t5 = Fp.add(X2, Z2); // step 10\n      t4 = Fp.mul(t4, t5);\n      t5 = Fp.add(t0, t2);\n      t4 = Fp.sub(t4, t5);\n      t5 = Fp.add(Y1, Z1);\n      X3 = Fp.add(Y2, Z2); // step 15\n      t5 = Fp.mul(t5, X3);\n      X3 = Fp.add(t1, t2);\n      t5 = Fp.sub(t5, X3);\n      Z3 = Fp.mul(a, t4);\n      X3 = Fp.mul(b3, t2); // step 20\n      Z3 = Fp.add(X3, Z3);\n      X3 = Fp.sub(t1, Z3);\n      Z3 = Fp.add(t1, Z3);\n      Y3 = Fp.mul(X3, Z3);\n      t1 = Fp.add(t0, t0); // step 25\n      t1 = Fp.add(t1, t0);\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.mul(b3, t4);\n      t1 = Fp.add(t1, t2);\n      t2 = Fp.sub(t0, t2); // step 30\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.add(t4, t2);\n      t0 = Fp.mul(t1, t4);\n      Y3 = Fp.add(Y3, t0);\n      t0 = Fp.mul(t5, t4); // step 35\n      X3 = Fp.mul(t3, X3);\n      X3 = Fp.sub(X3, t0);\n      t0 = Fp.mul(t3, t1);\n      Z3 = Fp.mul(t5, Z3);\n      Z3 = Fp.add(Z3, t0); // step 40\n      return new Point(X3, Y3, Z3);\n    }\n\n    subtract(other: Point) {\n      return this.add(other.negate());\n    }\n\n    is0(): boolean {\n      return this.equals(Point.ZERO);\n    }\n\n    /**\n     * Constant time multiplication.\n     * Uses wNAF method. Windowed method may be 10% faster,\n     * but takes 2x longer to generate and consumes 2x memory.\n     * Uses precomputes when available.\n     * Uses endomorphism for Koblitz curves.\n     * @param scalar by which the point would be multiplied\n     * @returns New point\n     */\n    multiply(scalar: bigint): Point {\n      const { endo } = extraOpts;\n      if (!Fn.isValidNot0(scalar)) throw new Error('invalid scalar: out of range'); // 0 is invalid\n      let point: Point, fake: Point; // Fake point is used to const-time mult\n      const mul = (n: bigint) => wnaf.cached(this, n, (p) => normalizeZ(Point, p));\n      /** See docs for {@link EndomorphismOpts} */\n      if (endo) {\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(scalar);\n        const { p: k1p, f: k1f } = mul(k1);\n        const { p: k2p, f: k2f } = mul(k2);\n        fake = k1f.add(k2f);\n        point = finishEndo(endo.beta, k1p, k2p, k1neg, k2neg);\n      } else {\n        const { p, f } = mul(scalar);\n        point = p;\n        fake = f;\n      }\n      // Normalize `z` for both points, but return only real one\n      return normalizeZ(Point, [point, fake])[0];\n    }\n\n    /**\n     * Non-constant-time multiplication. Uses double-and-add algorithm.\n     * It's faster, but should only be used when you don't care about\n     * an exposed secret key e.g. sig verification, which works over *public* keys.\n     */\n    multiplyUnsafe(sc: bigint): Point {\n      const { endo } = extraOpts;\n      const p = this as Point;\n      if (!Fn.isValid(sc)) throw new Error('invalid scalar: out of range'); // 0 is valid\n      if (sc === _0n || p.is0()) return Point.ZERO;\n      if (sc === _1n) return p; // fast-path\n      if (wnaf.hasCache(this)) return this.multiply(sc);\n      if (endo) {\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(sc);\n        const { p1, p2 } = mulEndoUnsafe(Point, p, k1, k2); // 30% faster vs wnaf.unsafe\n        return finishEndo(endo.beta, p1, p2, k1neg, k2neg);\n      } else {\n        return wnaf.unsafe(p, sc);\n      }\n    }\n\n    multiplyAndAddUnsafe(Q: Point, a: bigint, b: bigint): Point | undefined {\n      const sum = this.multiplyUnsafe(a).add(Q.multiplyUnsafe(b));\n      return sum.is0() ? undefined : sum;\n    }\n\n    /**\n     * Converts Projective point to affine (x, y) coordinates.\n     * @param invertedZ Z^-1 (inverted zero) - optional, precomputation is useful for invertBatch\n     */\n    toAffine(invertedZ?: T): AffinePoint<T> {\n      return toAffineMemo(this, invertedZ);\n    }\n\n    /**\n     * Checks whether Point is free of torsion elements (is in prime subgroup).\n     * Always torsion-free for cofactor=1 curves.\n     */\n    isTorsionFree(): boolean {\n      const { isTorsionFree } = extraOpts;\n      if (cofactor === _1n) return true;\n      if (isTorsionFree) return isTorsionFree(Point, this);\n      return wnaf.unsafe(this, CURVE_ORDER).is0();\n    }\n\n    clearCofactor(): Point {\n      const { clearCofactor } = extraOpts;\n      if (cofactor === _1n) return this; // Fast-path\n      if (clearCofactor) return clearCofactor(Point, this) as Point;\n      return this.multiplyUnsafe(cofactor);\n    }\n\n    isSmallOrder(): boolean {\n      // can we use this.clearCofactor()?\n      return this.multiplyUnsafe(cofactor).is0();\n    }\n\n    toBytes(isCompressed = true): Uint8Array {\n      abool(isCompressed, 'isCompressed');\n      this.assertValidity();\n      return encodePoint(Point, this, isCompressed);\n    }\n\n    toHex(isCompressed = true): string {\n      return bytesToHex(this.toBytes(isCompressed));\n    }\n\n    toString() {\n      return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\n    }\n\n    // TODO: remove\n    get px(): T {\n      return this.X;\n    }\n    get py(): T {\n      return this.X;\n    }\n    get pz(): T {\n      return this.Z;\n    }\n    toRawBytes(isCompressed = true): Uint8Array {\n      return this.toBytes(isCompressed);\n    }\n    _setWindowSize(windowSize: number) {\n      this.precompute(windowSize);\n    }\n    static normalizeZ(points: Point[]): Point[] {\n      return normalizeZ(Point, points);\n    }\n    static msm(points: Point[], scalars: bigint[]): Point {\n      return pippenger(Point, Fn, points, scalars);\n    }\n    static fromPrivateKey(privateKey: PrivKey) {\n      return Point.BASE.multiply(_normFnElement(Fn, privateKey));\n    }\n  }\n  const bits = Fn.BITS;\n  const wnaf = new wNAF(Point, extraOpts.endo ? Math.ceil(bits / 2) : bits);\n  Point.BASE.precompute(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\n  return Point;\n}\n\n/** Methods of ECDSA signature instance. */\nexport interface ECDSASignature {\n  readonly r: bigint;\n  readonly s: bigint;\n  readonly recovery?: number;\n  addRecoveryBit(recovery: number): ECDSASigRecovered;\n  hasHighS(): boolean;\n  toBytes(format?: string): Uint8Array;\n  toHex(format?: string): string;\n\n  /** @deprecated */\n  assertValidity(): void;\n  /** @deprecated */\n  normalizeS(): ECDSASignature;\n  /** @deprecated use standalone method `curve.recoverPublicKey(sig.toBytes('recovered'), msg)` */\n  recoverPublicKey(msgHash: Hex): WeierstrassPoint<bigint>;\n  /** @deprecated use `.toBytes('compact')` */\n  toCompactRawBytes(): Uint8Array;\n  /** @deprecated use `.toBytes('compact')` */\n  toCompactHex(): string;\n  /** @deprecated use `.toBytes('der')` */\n  toDERRawBytes(): Uint8Array;\n  /** @deprecated use `.toBytes('der')` */\n  toDERHex(): string;\n}\nexport type ECDSASigRecovered = ECDSASignature & {\n  readonly recovery: number;\n};\n/** Methods of ECDSA signature constructor. */\nexport type ECDSASignatureCons = {\n  new (r: bigint, s: bigint, recovery?: number): ECDSASignature;\n  fromBytes(bytes: Uint8Array, format?: ECDSASigFormat): ECDSASignature;\n  fromHex(hex: string, format?: ECDSASigFormat): ECDSASignature;\n\n  /** @deprecated use `.fromBytes(bytes, 'compact')` */\n  fromCompact(hex: Hex): ECDSASignature;\n  /** @deprecated use `.fromBytes(bytes, 'der')` */\n  fromDER(hex: Hex): ECDSASignature;\n};\n\n// Points start with byte 0x02 when y is even; otherwise 0x03\nfunction pprefix(hasEvenY: boolean): Uint8Array {\n  return Uint8Array.of(hasEvenY ? 0x02 : 0x03);\n}\n\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nexport function SWUFpSqrtRatio<T>(\n  Fp: IField<T>,\n  Z: T\n): (u: T, v: T) => { isValid: boolean; value: T } {\n  // Generic implementation\n  const q = Fp.ORDER;\n  let l = _0n;\n  for (let o = q - _1n; o % _2n === _0n; o /= _2n) l += _1n;\n  const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n  // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n  // 2n ** c1 == 2n << (c1-1)\n  const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n  const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n  const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n  const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n  const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n  const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n  const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n  const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n  let sqrtRatio = (u: T, v: T): { isValid: boolean; value: T } => {\n    let tv1 = c6; // 1. tv1 = c6\n    let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n    let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n    tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n    let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n    tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n    tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n    tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n    tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n    let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n    tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n    let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n    tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n    tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n    tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n    tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n    // 17. for i in (c1, c1 - 1, ..., 2):\n    for (let i = c1; i > _1n; i--) {\n      let tv5 = i - _2n; // 18.    tv5 = i - 2\n      tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n      let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n      const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n      tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n      tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n      tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n      tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n      tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n    }\n    return { isValid: isQR, value: tv3 };\n  };\n  if (Fp.ORDER % _4n === _3n) {\n    // sqrt_ratio_3mod4(u, v)\n    const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n    const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n    sqrtRatio = (u: T, v: T) => {\n      let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n      const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n      tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n      let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n      y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n      const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n      const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n      const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n      let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n      return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n    };\n  }\n  // No curves uses that\n  // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n  return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nexport function mapToCurveSimpleSWU<T>(\n  Fp: IField<T>,\n  opts: {\n    A: T;\n    B: T;\n    Z: T;\n  }\n): (u: T) => { x: T; y: T } {\n  validateField(Fp);\n  const { A, B, Z } = opts;\n  if (!Fp.isValid(A) || !Fp.isValid(B) || !Fp.isValid(Z))\n    throw new Error('mapToCurveSimpleSWU: invalid opts');\n  const sqrtRatio = SWUFpSqrtRatio(Fp, Z);\n  if (!Fp.isOdd) throw new Error('Field does not have .isOdd()');\n  // Input: u, an element of F.\n  // Output: (x, y), a point on E.\n  return (u: T): { x: T; y: T } => {\n    // prettier-ignore\n    let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n    tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, Z); // 2.  tv1 = Z * tv1\n    tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n    tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n    tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n    tv3 = Fp.mul(tv3, B); // 6.  tv3 = B * tv3\n    tv4 = Fp.cmov(Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n    tv4 = Fp.mul(tv4, A); // 8.  tv4 = A * tv4\n    tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n    tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n    tv5 = Fp.mul(tv6, A); // 11. tv5 = A * tv6\n    tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n    tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n    tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n    tv5 = Fp.mul(tv6, B); // 15. tv5 = B * tv6\n    tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n    x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n    const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n    y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n    y = Fp.mul(y, value); // 20.   y = y * y1\n    x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n    y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n    const e1 = Fp.isOdd!(u) === Fp.isOdd!(y); // 23.  e1 = sgn0(u) == sgn0(y)\n    y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n    const tv4_inv = FpInvertBatch(Fp, [tv4], true)[0];\n    x = Fp.mul(x, tv4_inv); // 25.   x = x / tv4\n    return { x, y };\n  };\n}\n\nfunction getWLengths<T>(Fp: IField<T>, Fn: IField<bigint>) {\n  return {\n    secretKey: Fn.BYTES,\n    publicKey: 1 + Fp.BYTES,\n    publicKeyUncompressed: 1 + 2 * Fp.BYTES,\n    publicKeyHasPrefix: true,\n    signature: 2 * Fn.BYTES,\n  };\n}\n\n/**\n * Sometimes users only need getPublicKey, getSharedSecret, and secret key handling.\n * This helper ensures no signature functionality is present. Less code, smaller bundle size.\n */\nexport function ecdh(\n  Point: WeierstrassPointCons<bigint>,\n  ecdhOpts: { randomBytes?: (bytesLength?: number) => Uint8Array } = {}\n): ECDH {\n  const { Fn } = Point;\n  const randomBytes_ = ecdhOpts.randomBytes || randomBytesWeb;\n  const lengths = Object.assign(getWLengths(Point.Fp, Fn), { seed: getMinHashLength(Fn.ORDER) });\n\n  function isValidSecretKey(secretKey: PrivKey) {\n    try {\n      return !!_normFnElement(Fn, secretKey);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function isValidPublicKey(publicKey: Uint8Array, isCompressed?: boolean): boolean {\n    const { publicKey: comp, publicKeyUncompressed } = lengths;\n    try {\n      const l = publicKey.length;\n      if (isCompressed === true && l !== comp) return false;\n      if (isCompressed === false && l !== publicKeyUncompressed) return false;\n      return !!Point.fromBytes(publicKey);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Produces cryptographically secure secret key from random of size\n   * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n   */\n  function randomSecretKey(seed = randomBytes_(lengths.seed)): Uint8Array {\n    return mapHashToField(abytes(seed, lengths.seed, 'seed'), Fn.ORDER);\n  }\n\n  /**\n   * Computes public key for a secret key. Checks for validity of the secret key.\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns Public key, full when isCompressed=false; short when isCompressed=true\n   */\n  function getPublicKey(secretKey: PrivKey, isCompressed = true): Uint8Array {\n    return Point.BASE.multiply(_normFnElement(Fn, secretKey)).toBytes(isCompressed);\n  }\n\n  function keygen(seed?: Uint8Array) {\n    const secretKey = randomSecretKey(seed);\n    return { secretKey, publicKey: getPublicKey(secretKey) };\n  }\n\n  /**\n   * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n   */\n  function isProbPub(item: PrivKey | PubKey): boolean | undefined {\n    if (typeof item === 'bigint') return false;\n    if (item instanceof Point) return true;\n    const { secretKey, publicKey, publicKeyUncompressed } = lengths;\n    if (Fn.allowedLengths || secretKey === publicKey) return undefined;\n    const l = ensureBytes('key', item).length;\n    return l === publicKey || l === publicKeyUncompressed;\n  }\n\n  /**\n   * ECDH (Elliptic Curve Diffie Hellman).\n   * Computes shared public key from secret key A and public key B.\n   * Checks: 1) secret key validity 2) shared key is on-curve.\n   * Does NOT hash the result.\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns shared public key\n   */\n  function getSharedSecret(secretKeyA: PrivKey, publicKeyB: Hex, isCompressed = true): Uint8Array {\n    if (isProbPub(secretKeyA) === true) throw new Error('first arg must be private key');\n    if (isProbPub(publicKeyB) === false) throw new Error('second arg must be public key');\n    const s = _normFnElement(Fn, secretKeyA);\n    const b = Point.fromHex(publicKeyB); // checks for being on-curve\n    return b.multiply(s).toBytes(isCompressed);\n  }\n\n  const utils = {\n    isValidSecretKey,\n    isValidPublicKey,\n    randomSecretKey,\n\n    // TODO: remove\n    isValidPrivateKey: isValidSecretKey,\n    randomPrivateKey: randomSecretKey,\n    normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\n    precompute(windowSize = 8, point = Point.BASE): WeierstrassPoint<bigint> {\n      return point.precompute(windowSize, false);\n    },\n  };\n\n  return Object.freeze({ getPublicKey, getSharedSecret, keygen, Point, utils, lengths });\n}\n\n/**\n * Creates ECDSA signing interface for given elliptic curve `Point` and `hash` function.\n * We need `hash` for 2 features:\n * 1. Message prehash-ing. NOT used if `sign` / `verify` are called with `prehash: false`\n * 2. k generation in `sign`, using HMAC-drbg(hash)\n *\n * ECDSAOpts are only rarely needed.\n *\n * @example\n * ```js\n * const p256_Point = weierstrass(...);\n * const p256_sha256 = ecdsa(p256_Point, sha256);\n * const p256_sha224 = ecdsa(p256_Point, sha224);\n * const p256_sha224_r = ecdsa(p256_Point, sha224, { randomBytes: (length) => { ... } });\n * ```\n */\nexport function ecdsa(\n  Point: WeierstrassPointCons<bigint>,\n  hash: CHash,\n  ecdsaOpts: ECDSAOpts = {}\n): ECDSA {\n  ahash(hash);\n  _validateObject(\n    ecdsaOpts,\n    {},\n    {\n      hmac: 'function',\n      lowS: 'boolean',\n      randomBytes: 'function',\n      bits2int: 'function',\n      bits2int_modN: 'function',\n    }\n  );\n\n  const randomBytes = ecdsaOpts.randomBytes || randomBytesWeb;\n  const hmac: HmacFnSync =\n    ecdsaOpts.hmac ||\n    (((key, ...msgs) => nobleHmac(hash, key, concatBytes(...msgs))) satisfies HmacFnSync);\n\n  const { Fp, Fn } = Point;\n  const { ORDER: CURVE_ORDER, BITS: fnBits } = Fn;\n  const { keygen, getPublicKey, getSharedSecret, utils, lengths } = ecdh(Point, ecdsaOpts);\n  const defaultSigOpts: Required<ECDSASignOpts> = {\n    prehash: false,\n    lowS: typeof ecdsaOpts.lowS === 'boolean' ? ecdsaOpts.lowS : false,\n    format: undefined as any, //'compact' as ECDSASigFormat,\n    extraEntropy: false,\n  };\n  const defaultSigOpts_format = 'compact';\n\n  function isBiggerThanHalfOrder(number: bigint) {\n    const HALF = CURVE_ORDER >> _1n;\n    return number > HALF;\n  }\n  function validateRS(title: string, num: bigint): bigint {\n    if (!Fn.isValidNot0(num))\n      throw new Error(`invalid signature ${title}: out of range 1..Point.Fn.ORDER`);\n    return num;\n  }\n  function validateSigLength(bytes: Uint8Array, format: ECDSASigFormat) {\n    validateSigFormat(format);\n    const size = lengths.signature!;\n    const sizer = format === 'compact' ? size : format === 'recovered' ? size + 1 : undefined;\n    return abytes(bytes, sizer, `${format} signature`);\n  }\n\n  /**\n   * ECDSA signature with its (r, s) properties. Supports compact, recovered & DER representations.\n   */\n  class Signature implements ECDSASignature {\n    readonly r: bigint;\n    readonly s: bigint;\n    readonly recovery?: number;\n    constructor(r: bigint, s: bigint, recovery?: number) {\n      this.r = validateRS('r', r); // r in [1..N-1];\n      this.s = validateRS('s', s); // s in [1..N-1];\n      if (recovery != null) this.recovery = recovery;\n      Object.freeze(this);\n    }\n\n    static fromBytes(bytes: Uint8Array, format: ECDSASigFormat = defaultSigOpts_format): Signature {\n      validateSigLength(bytes, format);\n      let recid: number | undefined;\n      if (format === 'der') {\n        const { r, s } = DER.toSig(abytes(bytes));\n        return new Signature(r, s);\n      }\n      if (format === 'recovered') {\n        recid = bytes[0];\n        format = 'compact';\n        bytes = bytes.subarray(1);\n      }\n      const L = Fn.BYTES;\n      const r = bytes.subarray(0, L);\n      const s = bytes.subarray(L, L * 2);\n      return new Signature(Fn.fromBytes(r), Fn.fromBytes(s), recid);\n    }\n\n    static fromHex(hex: string, format?: ECDSASigFormat) {\n      return this.fromBytes(hexToBytes(hex), format);\n    }\n\n    addRecoveryBit(recovery: number): RecoveredSignature {\n      return new Signature(this.r, this.s, recovery) as RecoveredSignature;\n    }\n\n    recoverPublicKey(messageHash: Hex): WeierstrassPoint<bigint> {\n      const FIELD_ORDER = Fp.ORDER;\n      const { r, s, recovery: rec } = this;\n      if (rec == null || ![0, 1, 2, 3].includes(rec)) throw new Error('recovery id invalid');\n\n      // ECDSA recovery is hard for cofactor > 1 curves.\n      // In sign, `r = q.x mod n`, and here we recover q.x from r.\n      // While recovering q.x >= n, we need to add r+n for cofactor=1 curves.\n      // However, for cofactor>1, r+n may not get q.x:\n      // r+n*i would need to be done instead where i is unknown.\n      // To easily get i, we either need to:\n      // a. increase amount of valid recid values (4, 5...); OR\n      // b. prohibit non-prime-order signatures (recid > 1).\n      const hasCofactor = CURVE_ORDER * _2n < FIELD_ORDER;\n      if (hasCofactor && rec > 1) throw new Error('recovery id is ambiguous for h>1 curve');\n\n      const radj = rec === 2 || rec === 3 ? r + CURVE_ORDER : r;\n      if (!Fp.isValid(radj)) throw new Error('recovery id 2 or 3 invalid');\n      const x = Fp.toBytes(radj);\n      const R = Point.fromBytes(concatBytes(pprefix((rec & 1) === 0), x));\n      const ir = Fn.inv(radj); // r^-1\n      const h = bits2int_modN(ensureBytes('msgHash', messageHash)); // Truncate hash\n      const u1 = Fn.create(-h * ir); // -hr^-1\n      const u2 = Fn.create(s * ir); // sr^-1\n      // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1). unsafe is fine: there is no private data.\n      const Q = Point.BASE.multiplyUnsafe(u1).add(R.multiplyUnsafe(u2));\n      if (Q.is0()) throw new Error('point at infinify');\n      Q.assertValidity();\n      return Q;\n    }\n\n    // Signatures should be low-s, to prevent malleability.\n    hasHighS(): boolean {\n      return isBiggerThanHalfOrder(this.s);\n    }\n\n    toBytes(format: ECDSASigFormat = defaultSigOpts_format) {\n      validateSigFormat(format);\n      if (format === 'der') return hexToBytes(DER.hexFromSig(this));\n      const r = Fn.toBytes(this.r);\n      const s = Fn.toBytes(this.s);\n      if (format === 'recovered') {\n        if (this.recovery == null) throw new Error('recovery bit must be present');\n        return concatBytes(Uint8Array.of(this.recovery), r, s);\n      }\n      return concatBytes(r, s);\n    }\n\n    toHex(format?: ECDSASigFormat) {\n      return bytesToHex(this.toBytes(format));\n    }\n\n    // TODO: remove\n    assertValidity(): void {}\n    static fromCompact(hex: Hex) {\n      return Signature.fromBytes(ensureBytes('sig', hex), 'compact');\n    }\n    static fromDER(hex: Hex) {\n      return Signature.fromBytes(ensureBytes('sig', hex), 'der');\n    }\n    normalizeS() {\n      return this.hasHighS() ? new Signature(this.r, Fn.neg(this.s), this.recovery) : this;\n    }\n    toDERRawBytes() {\n      return this.toBytes('der');\n    }\n    toDERHex() {\n      return bytesToHex(this.toBytes('der'));\n    }\n    toCompactRawBytes() {\n      return this.toBytes('compact');\n    }\n    toCompactHex() {\n      return bytesToHex(this.toBytes('compact'));\n    }\n  }\n  type RecoveredSignature = Signature & { recovery: number };\n\n  // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n  // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n  // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n  // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n  const bits2int =\n    ecdsaOpts.bits2int ||\n    function bits2int_def(bytes: Uint8Array): bigint {\n      // Our custom check \"just in case\", for protection against DoS\n      if (bytes.length > 8192) throw new Error('input is too large');\n      // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n      // for some cases, since bytes.length * 8 is not actual bitLength.\n      const num = bytesToNumberBE(bytes); // check for == u8 done here\n      const delta = bytes.length * 8 - fnBits; // truncate to nBitLength leftmost bits\n      return delta > 0 ? num >> BigInt(delta) : num;\n    };\n  const bits2int_modN =\n    ecdsaOpts.bits2int_modN ||\n    function bits2int_modN_def(bytes: Uint8Array): bigint {\n      return Fn.create(bits2int(bytes)); // can't use bytesToNumberBE here\n    };\n  // Pads output with zero as per spec\n  const ORDER_MASK = bitMask(fnBits);\n  /** Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`. */\n  function int2octets(num: bigint): Uint8Array {\n    // IMPORTANT: the check ensures working for case `Fn.BYTES != Fn.BITS * 8`\n    aInRange('num < 2^' + fnBits, num, _0n, ORDER_MASK);\n    return Fn.toBytes(num);\n  }\n\n  function validateMsgAndHash(message: Uint8Array, prehash: boolean) {\n    abytes(message, undefined, 'message');\n    return prehash ? abytes(hash(message), undefined, 'prehashed message') : message;\n  }\n\n  /**\n   * Steps A, D of RFC6979 3.2.\n   * Creates RFC6979 seed; converts msg/privKey to numbers.\n   * Used only in sign, not in verify.\n   *\n   * Warning: we cannot assume here that message has same amount of bytes as curve order,\n   * this will be invalid at least for P521. Also it can be bigger for P224 + SHA256.\n   */\n  function prepSig(message: Uint8Array, privateKey: PrivKey, opts: ECDSASignOpts) {\n    if (['recovered', 'canonical'].some((k) => k in opts))\n      throw new Error('sign() legacy options not supported');\n    const { lowS, prehash, extraEntropy } = validateSigOpts(opts, defaultSigOpts);\n    message = validateMsgAndHash(message, prehash); // RFC6979 3.2 A: h1 = H(m)\n    // We can't later call bits2octets, since nested bits2int is broken for curves\n    // with fnBits % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n    // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n    const h1int = bits2int_modN(message);\n    const d = _normFnElement(Fn, privateKey); // validate secret key, convert to bigint\n    const seedArgs = [int2octets(d), int2octets(h1int)];\n    // extraEntropy. RFC6979 3.6: additional k' (optional).\n    if (extraEntropy != null && extraEntropy !== false) {\n      // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n      // gen random bytes OR pass as-is\n      const e = extraEntropy === true ? randomBytes(lengths.secretKey) : extraEntropy;\n      seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\n    }\n    const seed = concatBytes(...seedArgs); // Step D of RFC6979 3.2\n    const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n    // Converts signature params into point w r/s, checks result for validity.\n    // To transform k => Signature:\n    // q = kG\n    // r = q.x mod n\n    // s = k^-1(m + rd) mod n\n    // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n    // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n    // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n    function k2sig(kBytes: Uint8Array): RecoveredSignature | undefined {\n      // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n      // Important: all mod() calls here must be done over N\n      const k = bits2int(kBytes); // mod n, not mod p\n      if (!Fn.isValidNot0(k)) return; // Valid scalars (including k) must be in 1..N-1\n      const ik = Fn.inv(k); // k^-1 mod n\n      const q = Point.BASE.multiply(k).toAffine(); // q = kG\n      const r = Fn.create(q.x); // r = q.x mod n\n      if (r === _0n) return;\n      const s = Fn.create(ik * Fn.create(m + r * d)); // Not using blinding here, see comment above\n      if (s === _0n) return;\n      let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n      let normS = s;\n      if (lowS && isBiggerThanHalfOrder(s)) {\n        normS = Fn.neg(s); // if lowS was passed, ensure s is always\n        recovery ^= 1; // // in the bottom half of N\n      }\n      return new Signature(r, normS, recovery) as RecoveredSignature; // use normS, not s\n    }\n    return { seed, k2sig };\n  }\n\n  /**\n   * Signs message hash with a secret key.\n   *\n   * ```\n   * sign(m, d) where\n   *   k = rfc6979_hmac_drbg(m, d)\n   *   (x, y) = G  k\n   *   r = x mod n\n   *   s = (m + dr) / k mod n\n   * ```\n   */\n  function sign(message: Hex, secretKey: PrivKey, opts: ECDSASignOpts = {}): RecoveredSignature {\n    message = ensureBytes('message', message);\n    const { seed, k2sig } = prepSig(message, secretKey, opts); // Steps A, D of RFC6979 3.2.\n    const drbg = createHmacDrbg<RecoveredSignature>(hash.outputLen, Fn.BYTES, hmac);\n    const sig = drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    return sig;\n  }\n\n  function tryParsingSig(sg: Hex | SignatureLike) {\n    // Try to deduce format\n    let sig: Signature | undefined = undefined;\n    const isHex = typeof sg === 'string' || isBytes(sg);\n    const isObj =\n      !isHex &&\n      sg !== null &&\n      typeof sg === 'object' &&\n      typeof sg.r === 'bigint' &&\n      typeof sg.s === 'bigint';\n    if (!isHex && !isObj)\n      throw new Error('invalid signature, expected Uint8Array, hex string or Signature instance');\n    if (isObj) {\n      sig = new Signature(sg.r, sg.s);\n    } else if (isHex) {\n      try {\n        sig = Signature.fromBytes(ensureBytes('sig', sg), 'der');\n      } catch (derError) {\n        if (!(derError instanceof DER.Err)) throw derError;\n      }\n      if (!sig) {\n        try {\n          sig = Signature.fromBytes(ensureBytes('sig', sg), 'compact');\n        } catch (error) {\n          return false;\n        }\n      }\n    }\n    if (!sig) return false;\n    return sig;\n  }\n\n  /**\n   * Verifies a signature against message and public key.\n   * Rejects lowS signatures by default: see {@link ECDSAVerifyOpts}.\n   * Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n   *\n   * ```\n   * verify(r, s, h, P) where\n   *   u1 = hs^-1 mod n\n   *   u2 = rs^-1 mod n\n   *   R = u1G + u2P\n   *   mod(R.x, n) == r\n   * ```\n   */\n  function verify(\n    signature: Hex | SignatureLike,\n    message: Hex,\n    publicKey: Hex,\n    opts: ECDSAVerifyOpts = {}\n  ): boolean {\n    const { lowS, prehash, format } = validateSigOpts(opts, defaultSigOpts);\n    publicKey = ensureBytes('publicKey', publicKey);\n    message = validateMsgAndHash(ensureBytes('message', message), prehash);\n    if ('strict' in opts) throw new Error('options.strict was renamed to lowS');\n    const sig =\n      format === undefined\n        ? tryParsingSig(signature)\n        : Signature.fromBytes(ensureBytes('sig', signature as Hex), format);\n    if (sig === false) return false;\n    try {\n      const P = Point.fromBytes(publicKey);\n      if (lowS && sig.hasHighS()) return false;\n      const { r, s } = sig;\n      const h = bits2int_modN(message); // mod n, not mod p\n      const is = Fn.inv(s); // s^-1 mod n\n      const u1 = Fn.create(h * is); // u1 = hs^-1 mod n\n      const u2 = Fn.create(r * is); // u2 = rs^-1 mod n\n      const R = Point.BASE.multiplyUnsafe(u1).add(P.multiplyUnsafe(u2)); // u1G + u2P\n      if (R.is0()) return false;\n      const v = Fn.create(R.x); // v = r.x mod n\n      return v === r;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function recoverPublicKey(\n    signature: Uint8Array,\n    message: Uint8Array,\n    opts: ECDSARecoverOpts = {}\n  ): Uint8Array {\n    const { prehash } = validateSigOpts(opts, defaultSigOpts);\n    message = validateMsgAndHash(message, prehash);\n    return Signature.fromBytes(signature, 'recovered').recoverPublicKey(message).toBytes();\n  }\n\n  return Object.freeze({\n    keygen,\n    getPublicKey,\n    getSharedSecret,\n    utils,\n    lengths,\n    Point,\n    sign,\n    verify,\n    recoverPublicKey,\n    Signature,\n    hash,\n  });\n}\n\n// TODO: remove everything below\n/** @deprecated use ECDSASignature */\nexport type SignatureType = ECDSASignature;\n/** @deprecated use ECDSASigRecovered */\nexport type RecoveredSignatureType = ECDSASigRecovered;\n/** @deprecated switch to Uint8Array signatures in format 'compact' */\nexport type SignatureLike = { r: bigint; s: bigint };\nexport type ECDSAExtraEntropy = Hex | boolean;\n/** @deprecated use `ECDSAExtraEntropy` */\nexport type Entropy = Hex | boolean;\nexport type BasicWCurve<T> = BasicCurve<T> & {\n  // Params: a, b\n  a: T;\n  b: T;\n\n  // Optional params\n  allowedPrivateKeyLengths?: readonly number[]; // for P521\n  wrapPrivateKey?: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\n  endo?: EndomorphismOpts;\n  // When a cofactor != 1, there can be an effective methods to:\n  // 1. Determine whether a point is torsion-free\n  isTorsionFree?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\n  // 2. Clear torsion component\n  clearCofactor?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\n};\n/** @deprecated use ECDSASignOpts */\nexport type SignOpts = ECDSASignOpts;\n/** @deprecated use ECDSASignOpts */\nexport type VerOpts = ECDSAVerifyOpts;\n\n/** @deprecated use WeierstrassPoint */\nexport type ProjPointType<T> = WeierstrassPoint<T>;\n/** @deprecated use WeierstrassPointCons */\nexport type ProjConstructor<T> = WeierstrassPointCons<T>;\n/** @deprecated use ECDSASignatureCons */\nexport type SignatureConstructor = ECDSASignatureCons;\n\n// TODO: remove\nexport type CurvePointsType<T> = BasicWCurve<T> & {\n  fromBytes?: (bytes: Uint8Array) => AffinePoint<T>;\n  toBytes?: (\n    c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ) => Uint8Array;\n};\n\n// LegacyWeierstrassOpts\nexport type CurvePointsTypeWithLength<T> = Readonly<CurvePointsType<T> & Partial<NLength>>;\n\n// LegacyWeierstrass\nexport type CurvePointsRes<T> = {\n  Point: WeierstrassPointCons<T>;\n\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: CurvePointsType<T>;\n  /** @deprecated use `Point` */\n  ProjectivePoint: WeierstrassPointCons<T>;\n  /** @deprecated use `Point.Fn.fromBytes(privateKey)` */\n  normPrivateKeyToScalar: (key: PrivKey) => bigint;\n  /** @deprecated */\n  weierstrassEquation: (x: T) => T;\n  /** @deprecated use `Point.Fn.isValidNot0(num)` */\n  isWithinCurveOrder: (num: bigint) => boolean;\n};\n\n// Aliases to legacy types\n// export type CurveType = LegacyECDSAOpts;\n// export type CurveFn = LegacyECDSA;\n// export type CurvePointsRes<T> = LegacyWeierstrass<T>;\n// export type CurvePointsType<T> = LegacyWeierstrassOpts<T>;\n// export type CurvePointsTypeWithLength<T> = LegacyWeierstrassOpts<T>;\n// export type BasicWCurve<T> = LegacyWeierstrassOpts<T>;\n\n/** @deprecated use `Uint8Array` */\nexport type PubKey = Hex | WeierstrassPoint<bigint>;\nexport type CurveType = BasicWCurve<bigint> & {\n  hash: CHash; // CHash not FHash because we need outputLen for DRBG\n  hmac?: HmacFnSync;\n  randomBytes?: (bytesLength?: number) => Uint8Array;\n  lowS?: boolean;\n  bits2int?: (bytes: Uint8Array) => bigint;\n  bits2int_modN?: (bytes: Uint8Array) => bigint;\n};\nexport type CurveFn = {\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: CurvePointsType<bigint>;\n  keygen: ECDSA['keygen'];\n  getPublicKey: ECDSA['getPublicKey'];\n  getSharedSecret: ECDSA['getSharedSecret'];\n  sign: ECDSA['sign'];\n  verify: ECDSA['verify'];\n  Point: WeierstrassPointCons<bigint>;\n  /** @deprecated use `Point` */\n  ProjectivePoint: WeierstrassPointCons<bigint>;\n  Signature: ECDSASignatureCons;\n  utils: ECDSA['utils'];\n  lengths: ECDSA['lengths'];\n};\n/** @deprecated use `weierstrass` in newer releases */\nexport function weierstrassPoints<T>(c: CurvePointsTypeWithLength<T>): CurvePointsRes<T> {\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n  const Point = weierstrassN(CURVE, curveOpts);\n  return _weierstrass_new_output_to_legacy(c, Point);\n}\nexport type WsPointComposed<T> = {\n  CURVE: WeierstrassOpts<T>;\n  curveOpts: WeierstrassExtraOpts<T>;\n};\nexport type WsComposed = {\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: WeierstrassOpts<bigint>;\n  hash: CHash;\n  curveOpts: WeierstrassExtraOpts<bigint>;\n  ecdsaOpts: ECDSAOpts;\n};\nfunction _weierstrass_legacy_opts_to_new<T>(c: CurvePointsType<T>): WsPointComposed<T> {\n  const CURVE: WeierstrassOpts<T> = {\n    a: c.a,\n    b: c.b,\n    p: c.Fp.ORDER,\n    n: c.n,\n    h: c.h,\n    Gx: c.Gx,\n    Gy: c.Gy,\n  };\n  const Fp = c.Fp;\n  let allowedLengths = c.allowedPrivateKeyLengths\n    ? Array.from(new Set(c.allowedPrivateKeyLengths.map((l) => Math.ceil(l / 2))))\n    : undefined;\n  const Fn = Field(CURVE.n, {\n    BITS: c.nBitLength,\n    allowedLengths: allowedLengths,\n    modFromBytes: c.wrapPrivateKey,\n  });\n  const curveOpts: WeierstrassExtraOpts<T> = {\n    Fp,\n    Fn,\n    allowInfinityPoint: c.allowInfinityPoint,\n    endo: c.endo,\n    isTorsionFree: c.isTorsionFree,\n    clearCofactor: c.clearCofactor,\n    fromBytes: c.fromBytes,\n    toBytes: c.toBytes,\n  };\n  return { CURVE, curveOpts };\n}\nfunction _ecdsa_legacy_opts_to_new(c: CurveType): WsComposed {\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n  const ecdsaOpts: ECDSAOpts = {\n    hmac: c.hmac,\n    randomBytes: c.randomBytes,\n    lowS: c.lowS,\n    bits2int: c.bits2int,\n    bits2int_modN: c.bits2int_modN,\n  };\n  return { CURVE, curveOpts, hash: c.hash, ecdsaOpts };\n}\nexport function _legacyHelperEquat<T>(Fp: IField<T>, a: T, b: T): (x: T) => T {\n  /**\n   * y = x + ax + b: Short weierstrass curve formula. Takes x, returns y.\n   * @returns y\n   */\n  function weierstrassEquation(x: T): T {\n    const x2 = Fp.sqr(x); // x * x\n    const x3 = Fp.mul(x2, x); // x * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x + a * x + b\n  }\n  return weierstrassEquation;\n}\nfunction _weierstrass_new_output_to_legacy<T>(\n  c: CurvePointsType<T>,\n  Point: WeierstrassPointCons<T>\n): CurvePointsRes<T> {\n  const { Fp, Fn } = Point;\n  function isWithinCurveOrder(num: bigint): boolean {\n    return inRange(num, _1n, Fn.ORDER);\n  }\n  const weierstrassEquation = _legacyHelperEquat(Fp, c.a, c.b);\n  return Object.assign(\n    {},\n    {\n      CURVE: c,\n      Point: Point,\n      ProjectivePoint: Point,\n      normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\n      weierstrassEquation,\n      isWithinCurveOrder,\n    }\n  );\n}\nfunction _ecdsa_new_output_to_legacy(c: CurveType, _ecdsa: ECDSA): CurveFn {\n  const Point = _ecdsa.Point;\n  return Object.assign({}, _ecdsa, {\n    ProjectivePoint: Point,\n    CURVE: Object.assign({}, c, nLength(Point.Fn.ORDER, Point.Fn.BITS)),\n  });\n}\n\n// _ecdsa_legacy\nexport function weierstrass(c: CurveType): CurveFn {\n  const { CURVE, curveOpts, hash, ecdsaOpts } = _ecdsa_legacy_opts_to_new(c);\n  const Point = weierstrassN(CURVE, curveOpts);\n  const signs = ecdsa(Point, hash, ecdsaOpts);\n  return _ecdsa_new_output_to_legacy(c, signs);\n}\n","/**\n * Utilities for short weierstrass curves, combined with noble-hashes.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { type CurveFn, type CurveType, weierstrass } from './abstract/weierstrass.ts';\nimport type { CHash } from './utils.ts';\n\n/** connects noble-curves to noble-hashes */\nexport function getHash(hash: CHash): { hash: CHash } {\n  return { hash };\n}\n/** Same API as @noble/hashes, with ability to create curve with custom hash */\nexport type CurveDef = Readonly<Omit<CurveType, 'hash'>>;\nexport type CurveFnWithCreate = CurveFn & { create: (hash: CHash) => CurveFn };\n\n/** @deprecated use new `weierstrass()` and `ecdsa()` methods */\nexport function createCurve(curveDef: CurveDef, defHash: CHash): CurveFnWithCreate {\n  const create = (hash: CHash): CurveFn => weierstrass({ ...curveDef, hash: hash });\n  return { ...create(defHash), create };\n}\n","/**\n * hash-to-curve from RFC 9380.\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\n * https://www.rfc-editor.org/rfc/rfc9380\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport type { CHash } from '../utils.ts';\nimport {\n  _validateObject,\n  abytes,\n  bytesToNumberBE,\n  concatBytes,\n  isBytes,\n  isHash,\n  utf8ToBytes,\n} from '../utils.ts';\nimport type { AffinePoint, Group, GroupConstructor } from './curve.ts';\nimport { FpInvertBatch, mod, type IField } from './modular.ts';\n\nexport type UnicodeOrBytes = string | Uint8Array;\n\n/**\n * * `DST` is a domain separation tag, defined in section 2.2.5\n * * `p` characteristic of F, where F is a finite field of characteristic p and order q = p^m\n * * `m` is extension degree (1 for prime fields)\n * * `k` is the target security target in bits (e.g. 128), from section 5.1\n * * `expand` is `xmd` (SHA2, SHA3, BLAKE) or `xof` (SHAKE, BLAKE-XOF)\n * * `hash` conforming to `utils.CHash` interface, with `outputLen` / `blockLen` props\n */\nexport type H2COpts = {\n  DST: UnicodeOrBytes;\n  expand: 'xmd' | 'xof';\n  hash: CHash;\n  p: bigint;\n  m: number;\n  k: number;\n};\nexport type H2CHashOpts = {\n  expand: 'xmd' | 'xof';\n  hash: CHash;\n};\n// todo: remove\nexport type Opts = H2COpts;\n\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = bytesToNumberBE;\n\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value: number, length: number): Uint8Array {\n  anum(value);\n  anum(length);\n  if (value < 0 || value >= 1 << (8 * length)) throw new Error('invalid I2OSP input: ' + value);\n  const res = Array.from({ length }).fill(0) as number[];\n  for (let i = length - 1; i >= 0; i--) {\n    res[i] = value & 0xff;\n    value >>>= 8;\n  }\n  return new Uint8Array(res);\n}\n\nfunction strxor(a: Uint8Array, b: Uint8Array): Uint8Array {\n  const arr = new Uint8Array(a.length);\n  for (let i = 0; i < a.length; i++) {\n    arr[i] = a[i] ^ b[i];\n  }\n  return arr;\n}\n\nfunction anum(item: unknown): void {\n  if (!Number.isSafeInteger(item)) throw new Error('number expected');\n}\n\nfunction normDST(DST: UnicodeOrBytes): Uint8Array {\n  if (!isBytes(DST) && typeof DST !== 'string') throw new Error('DST must be Uint8Array or string');\n  return typeof DST === 'string' ? utf8ToBytes(DST) : DST;\n}\n\n/**\n * Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits.\n * [RFC 9380 5.3.1](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.1).\n */\nexport function expand_message_xmd(\n  msg: Uint8Array,\n  DST: UnicodeOrBytes,\n  lenInBytes: number,\n  H: CHash\n): Uint8Array {\n  abytes(msg);\n  anum(lenInBytes);\n  DST = normDST(DST);\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n  if (DST.length > 255) DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\n  const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n  const ell = Math.ceil(lenInBytes / b_in_bytes);\n  if (lenInBytes > 65535 || ell > 255) throw new Error('expand_message_xmd: invalid lenInBytes');\n  const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\n  const Z_pad = i2osp(0, r_in_bytes);\n  const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n  const b = new Array<Uint8Array>(ell);\n  const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n  b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\n  for (let i = 1; i <= ell; i++) {\n    const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n    b[i] = H(concatBytes(...args));\n  }\n  const pseudo_random_bytes = concatBytes(...b);\n  return pseudo_random_bytes.slice(0, lenInBytes);\n}\n\n/**\n * Produces a uniformly random byte string using an extendable-output function (XOF) H.\n * 1. The collision resistance of H MUST be at least k bits.\n * 2. H MUST be an XOF that has been proved indifferentiable from\n *    a random oracle under a reasonable cryptographic assumption.\n * [RFC 9380 5.3.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.2).\n */\nexport function expand_message_xof(\n  msg: Uint8Array,\n  DST: UnicodeOrBytes,\n  lenInBytes: number,\n  k: number,\n  H: CHash\n): Uint8Array {\n  abytes(msg);\n  anum(lenInBytes);\n  DST = normDST(DST);\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n  // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n  if (DST.length > 255) {\n    const dkLen = Math.ceil((2 * k) / 8);\n    DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\n  }\n  if (lenInBytes > 65535 || DST.length > 255)\n    throw new Error('expand_message_xof: invalid lenInBytes');\n  return (\n    H.create({ dkLen: lenInBytes })\n      .update(msg)\n      .update(i2osp(lenInBytes, 2))\n      // 2. DST_prime = DST || I2OSP(len(DST), 1)\n      .update(DST)\n      .update(i2osp(DST.length, 1))\n      .digest()\n  );\n}\n\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\n * [RFC 9380 5.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.2).\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nexport function hash_to_field(msg: Uint8Array, count: number, options: H2COpts): bigint[][] {\n  _validateObject(options, {\n    p: 'bigint',\n    m: 'number',\n    k: 'number',\n    hash: 'function',\n  });\n  const { p, k, m, hash, expand, DST } = options;\n  if (!isHash(options.hash)) throw new Error('expected valid hash');\n  abytes(msg);\n  anum(count);\n  const log2p = p.toString(2).length;\n  const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n  const len_in_bytes = count * m * L;\n  let prb; // pseudo_random_bytes\n  if (expand === 'xmd') {\n    prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n  } else if (expand === 'xof') {\n    prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n  } else if (expand === '_internal_pass') {\n    // for internal tests only\n    prb = msg;\n  } else {\n    throw new Error('expand must be \"xmd\" or \"xof\"');\n  }\n  const u = new Array(count);\n  for (let i = 0; i < count; i++) {\n    const e = new Array(m);\n    for (let j = 0; j < m; j++) {\n      const elm_offset = L * (j + i * m);\n      const tv = prb.subarray(elm_offset, elm_offset + L);\n      e[j] = mod(os2ip(tv), p);\n    }\n    u[i] = e;\n  }\n  return u;\n}\n\nexport type XY<T> = (x: T, y: T) => { x: T; y: T };\nexport type XYRatio<T> = [T[], T[], T[], T[]]; // xn/xd, yn/yd\nexport function isogenyMap<T, F extends IField<T>>(field: F, map: XYRatio<T>): XY<T> {\n  // Make same order as in spec\n  const coeff = map.map((i) => Array.from(i).reverse());\n  return (x: T, y: T) => {\n    const [xn, xd, yn, yd] = coeff.map((val) =>\n      val.reduce((acc, i) => field.add(field.mul(acc, x), i))\n    );\n    // 6.6.3\n    // Exceptional cases of iso_map are inputs that cause the denominator of\n    // either rational function to evaluate to zero; such cases MUST return\n    // the identity point on E.\n    const [xd_inv, yd_inv] = FpInvertBatch(field, [xd, yd], true);\n    x = field.mul(xn, xd_inv); // xNum / xDen\n    y = field.mul(y, field.mul(yn, yd_inv)); // y * (yNum / yDev)\n    return { x, y };\n  };\n}\n\n/** Point interface, which curves must implement to work correctly with the module. */\nexport interface H2CPoint<T> extends Group<H2CPoint<T>> {\n  add(rhs: H2CPoint<T>): H2CPoint<T>;\n  toAffine(iz?: bigint): AffinePoint<T>;\n  clearCofactor(): H2CPoint<T>;\n  assertValidity(): void;\n}\n\nexport interface H2CPointConstructor<T> extends GroupConstructor<H2CPoint<T>> {\n  fromAffine(ap: AffinePoint<T>): H2CPoint<T>;\n}\n\nexport type MapToCurve<T> = (scalar: bigint[]) => AffinePoint<T>;\n\n// Separated from initialization opts, so users won't accidentally change per-curve parameters\n// (changing DST is ok!)\nexport type htfBasicOpts = { DST: UnicodeOrBytes };\nexport type H2CMethod<T> = (msg: Uint8Array, options?: htfBasicOpts) => H2CPoint<T>;\n// TODO: remove\nexport type HTFMethod<T> = H2CMethod<T>;\nexport type MapMethod<T> = (scalars: bigint[]) => H2CPoint<T>;\nexport type H2CHasherBase<T> = {\n  hashToCurve: H2CMethod<T>;\n  hashToScalar: (msg: Uint8Array, options: htfBasicOpts) => bigint;\n};\n/**\n * RFC 9380 methods, with cofactor clearing. See https://www.rfc-editor.org/rfc/rfc9380#section-3.\n *\n * * hashToCurve: `map(hash(input))`, encodes RANDOM bytes to curve (WITH hashing)\n * * encodeToCurve: `map(hash(input))`, encodes NON-UNIFORM bytes to curve (WITH hashing)\n * * mapToCurve: `map(scalars)`, encodes NON-UNIFORM scalars to curve (NO hashing)\n */\nexport type H2CHasher<T> = H2CHasherBase<T> & {\n  encodeToCurve: H2CMethod<T>;\n  mapToCurve: MapMethod<T>;\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes };\n};\n// TODO: remove\nexport type Hasher<T> = H2CHasher<T>;\n\nexport const _DST_scalar: Uint8Array = utf8ToBytes('HashToScalar-');\n\n/** Creates hash-to-curve methods from EC Point and mapToCurve function. See {@link H2CHasher}. */\nexport function createHasher<T>(\n  Point: H2CPointConstructor<T>,\n  mapToCurve: MapToCurve<T>,\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes }\n): H2CHasher<T> {\n  if (typeof mapToCurve !== 'function') throw new Error('mapToCurve() must be defined');\n  function map(num: bigint[]) {\n    return Point.fromAffine(mapToCurve(num));\n  }\n  function clear(initial: H2CPoint<T>) {\n    const P = initial.clearCofactor();\n    if (P.equals(Point.ZERO)) return Point.ZERO; // zero will throw in assert\n    P.assertValidity();\n    return P;\n  }\n\n  return {\n    defaults,\n\n    hashToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\n      const opts = Object.assign({}, defaults, options);\n      const u = hash_to_field(msg, 2, opts);\n      const u0 = map(u[0]);\n      const u1 = map(u[1]);\n      return clear(u0.add(u1));\n    },\n    encodeToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\n      const optsDst = defaults.encodeDST ? { DST: defaults.encodeDST } : {};\n      const opts = Object.assign({}, defaults, optsDst, options);\n      const u = hash_to_field(msg, 1, opts);\n      const u0 = map(u[0]);\n      return clear(u0);\n    },\n    /** See {@link H2CHasher} */\n    mapToCurve(scalars: bigint[]): H2CPoint<T> {\n      if (!Array.isArray(scalars)) throw new Error('expected array of bigints');\n      for (const i of scalars)\n        if (typeof i !== 'bigint') throw new Error('expected array of bigints');\n      return clear(map(scalars));\n    },\n\n    // hash_to_scalar can produce 0: https://www.rfc-editor.org/errata/eid8393\n    // RFC 9380, draft-irtf-cfrg-bbs-signatures-08\n    hashToScalar(msg: Uint8Array, options?: htfBasicOpts): bigint {\n      // @ts-ignore\n      const N = Point.Fn.ORDER;\n      const opts = Object.assign({}, defaults, { p: N, m: 1, DST: _DST_scalar }, options);\n      return hash_to_field(msg, 1, opts)[0][0];\n    },\n  };\n}\n","/**\n * SECG secp256k1. See [pdf](https://www.secg.org/sec2-v2.pdf).\n *\n * Belongs to Koblitz curves: it has efficiently-computable GLV endomorphism ,\n * check out {@link EndomorphismOpts}. Seems to be rigid (not backdoored).\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha2.js';\nimport { randomBytes } from '@noble/hashes/utils.js';\nimport { createCurve, type CurveFnWithCreate } from './_shortw_utils.ts';\nimport type { CurveLengths } from './abstract/curve.ts';\nimport {\n  createHasher,\n  type H2CHasher,\n  type H2CMethod,\n  isogenyMap,\n} from './abstract/hash-to-curve.ts';\nimport { Field, mapHashToField, mod, pow2 } from './abstract/modular.ts';\nimport {\n  _normFnElement,\n  type EndomorphismOpts,\n  mapToCurveSimpleSWU,\n  type WeierstrassPoint as PointType,\n  type WeierstrassOpts,\n  type WeierstrassPointCons,\n} from './abstract/weierstrass.ts';\nimport type { Hex, PrivKey } from './utils.ts';\nimport {\n  bytesToNumberBE,\n  concatBytes,\n  ensureBytes,\n  inRange,\n  numberToBytesBE,\n  utf8ToBytes,\n} from './utils.ts';\n\n// Seems like generator was produced from some seed:\n// `Point.BASE.multiply(Point.Fn.inv(2n, N)).toAffine().x`\n// // gives short x 0x3b78ce563f89a0ed9414f5aa28ad0d96d6795f9c63n\nconst secp256k1_CURVE: WeierstrassOpts<bigint> = {\n  p: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n  n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n  h: BigInt(1),\n  a: BigInt(0),\n  b: BigInt(7),\n  Gx: BigInt('0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798'),\n  Gy: BigInt('0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8'),\n};\n\nconst secp256k1_ENDO: EndomorphismOpts = {\n  beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n  basises: [\n    [BigInt('0x3086d221a7d46bcde86c90e49284eb15'), -BigInt('0xe4437ed6010e88286f547fa90abfe4c3')],\n    [BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8'), BigInt('0x3086d221a7d46bcde86c90e49284eb15')],\n  ],\n};\n\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\n\n/**\n * n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y: bigint): bigint {\n  const P = secp256k1_CURVE.p;\n  // prettier-ignore\n  const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n  // prettier-ignore\n  const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n  const b2 = (y * y * y) % P; // x^3, 11\n  const b3 = (b2 * b2 * y) % P; // x^7\n  const b6 = (pow2(b3, _3n, P) * b3) % P;\n  const b9 = (pow2(b6, _3n, P) * b3) % P;\n  const b11 = (pow2(b9, _2n, P) * b2) % P;\n  const b22 = (pow2(b11, _11n, P) * b11) % P;\n  const b44 = (pow2(b22, _22n, P) * b22) % P;\n  const b88 = (pow2(b44, _44n, P) * b44) % P;\n  const b176 = (pow2(b88, _88n, P) * b88) % P;\n  const b220 = (pow2(b176, _44n, P) * b44) % P;\n  const b223 = (pow2(b220, _3n, P) * b3) % P;\n  const t1 = (pow2(b223, _23n, P) * b22) % P;\n  const t2 = (pow2(t1, _6n, P) * b2) % P;\n  const root = pow2(t2, _2n, P);\n  if (!Fpk1.eql(Fpk1.sqr(root), y)) throw new Error('Cannot find square root');\n  return root;\n}\n\nconst Fpk1 = Field(secp256k1_CURVE.p, { sqrt: sqrtMod });\n\n/**\n * secp256k1 curve, ECDSA and ECDH methods.\n *\n * Field: `2n**256n - 2n**32n - 2n**9n - 2n**8n - 2n**7n - 2n**6n - 2n**4n - 1n`\n *\n * @example\n * ```js\n * import { secp256k1 } from '@noble/curves/secp256k1';\n * const { secretKey, publicKey } = secp256k1.keygen();\n * const msg = new TextEncoder().encode('hello');\n * const sig = secp256k1.sign(msg, secretKey);\n * const isValid = secp256k1.verify(sig, msg, publicKey) === true;\n * ```\n */\nexport const secp256k1: CurveFnWithCreate = createCurve(\n  { ...secp256k1_CURVE, Fp: Fpk1, lowS: true, endo: secp256k1_ENDO },\n  sha256\n);\n\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES: { [tag: string]: Uint8Array } = {};\nfunction taggedHash(tag: string, ...messages: Uint8Array[]): Uint8Array {\n  let tagP = TAGGED_HASH_PREFIXES[tag];\n  if (tagP === undefined) {\n    const tagH = sha256(utf8ToBytes(tag));\n    tagP = concatBytes(tagH, tagH);\n    TAGGED_HASH_PREFIXES[tag] = tagP;\n  }\n  return sha256(concatBytes(tagP, ...messages));\n}\n\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point: PointType<bigint>) => point.toBytes(true).slice(1);\nconst Pointk1 = /* @__PURE__ */ (() => secp256k1.Point)();\nconst hasEven = (y: bigint) => y % _2n === _0n;\n\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv: PrivKey) {\n  const { Fn, BASE } = Pointk1;\n  const d_ = _normFnElement(Fn, priv);\n  const p = BASE.multiply(d_); // P = d'G; 0 < d' < n check is done inside\n  const scalar = hasEven(p.y) ? d_ : Fn.neg(d_);\n  return { scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x: bigint): PointType<bigint> {\n  const Fp = Fpk1;\n  if (!Fp.isValidNot0(x)) throw new Error('invalid x: Fail if x  p');\n  const xx = Fp.create(x * x);\n  const c = Fp.create(xx * x + BigInt(7)); // Let c = x + 7 mod p.\n  let y = Fp.sqrt(c); // Let y = c^(p+1)/4 mod p. Same as sqrt().\n  // Return the unique point P such that x(P) = x and\n  // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n  if (!hasEven(y)) y = Fp.neg(y);\n  const p = Pointk1.fromAffine({ x, y });\n  p.assertValidity();\n  return p;\n}\nconst num = bytesToNumberBE;\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args: Uint8Array[]): bigint {\n  return Pointk1.Fn.create(num(taggedHash('BIP0340/challenge', ...args)));\n}\n\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(secretKey: Hex): Uint8Array {\n  return schnorrGetExtPubKey(secretKey).bytes; // d'=int(sk). Fail if d'=0 or d'n. Ret bytes(d'G)\n}\n\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message: Hex, secretKey: PrivKey, auxRand: Hex = randomBytes(32)): Uint8Array {\n  const { Fn } = Pointk1;\n  const m = ensureBytes('message', message);\n  const { bytes: px, scalar: d } = schnorrGetExtPubKey(secretKey); // checks for isWithinCurveOrder\n  const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n  const t = Fn.toBytes(d ^ num(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n  const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n  // Let k' = int(rand) mod n. Fail if k' = 0. Let R = k'G\n  const { bytes: rx, scalar: k } = schnorrGetExtPubKey(rand);\n  const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n  const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n  sig.set(rx, 0);\n  sig.set(Fn.toBytes(Fn.create(k + e * d)), 32);\n  // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n  if (!schnorrVerify(sig, m, px)) throw new Error('sign: Invalid signature produced');\n  return sig;\n}\n\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature: Hex, message: Hex, publicKey: Hex): boolean {\n  const { Fn, BASE } = Pointk1;\n  const sig = ensureBytes('signature', signature, 64);\n  const m = ensureBytes('message', message);\n  const pub = ensureBytes('publicKey', publicKey, 32);\n  try {\n    const P = lift_x(num(pub)); // P = lift_x(int(pk)); fail if that fails\n    const r = num(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r  p.\n    if (!inRange(r, _1n, secp256k1_CURVE.p)) return false;\n    const s = num(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s  n.\n    if (!inRange(s, _1n, secp256k1_CURVE.n)) return false;\n    // int(challenge(bytes(r)||bytes(P)||m))%n\n    const e = challenge(Fn.toBytes(r), pointToBytes(P), m);\n    // R = sG - eP, where -eP == (n-e)P\n    const R = BASE.multiplyUnsafe(s).add(P.multiplyUnsafe(Fn.neg(e)));\n    const { x, y } = R.toAffine();\n    // Fail if is_infinite(R) / not has_even_y(R) / x(R)  r.\n    if (R.is0() || !hasEven(y) || x !== r) return false;\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport type SecpSchnorr = {\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n  getPublicKey: typeof schnorrGetPublicKey;\n  sign: typeof schnorrSign;\n  verify: typeof schnorrVerify;\n  Point: WeierstrassPointCons<bigint>;\n  utils: {\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\n    pointToBytes: (point: PointType<bigint>) => Uint8Array;\n    lift_x: typeof lift_x;\n    taggedHash: typeof taggedHash;\n\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `utils` */\n    numberToBytesBE: typeof numberToBytesBE;\n    /** @deprecated use `utils` */\n    bytesToNumberBE: typeof bytesToNumberBE;\n    /** @deprecated use `modular` */\n    mod: typeof mod;\n  };\n  lengths: CurveLengths;\n};\n/**\n * Schnorr signatures over secp256k1.\n * https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\n * @example\n * ```js\n * import { schnorr } from '@noble/curves/secp256k1';\n * const { secretKey, publicKey } = schnorr.keygen();\n * // const publicKey = schnorr.getPublicKey(secretKey);\n * const msg = new TextEncoder().encode('hello');\n * const sig = schnorr.sign(msg, secretKey);\n * const isValid = schnorr.verify(sig, msg, publicKey);\n * ```\n */\nexport const schnorr: SecpSchnorr = /* @__PURE__ */ (() => {\n  const size = 32;\n  const seedLength = 48;\n  const randomSecretKey = (seed = randomBytes(seedLength)): Uint8Array => {\n    return mapHashToField(seed, secp256k1_CURVE.n);\n  };\n  // TODO: remove\n  secp256k1.utils.randomSecretKey;\n  function keygen(seed?: Uint8Array) {\n    const secretKey = randomSecretKey(seed);\n    return { secretKey, publicKey: schnorrGetPublicKey(secretKey) };\n  }\n  return {\n    keygen,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    Point: Pointk1,\n    utils: {\n      randomSecretKey: randomSecretKey,\n      randomPrivateKey: randomSecretKey,\n      taggedHash,\n\n      // TODO: remove\n      lift_x,\n      pointToBytes,\n      numberToBytesBE,\n      bytesToNumberBE,\n      mod,\n    },\n    lengths: {\n      secretKey: size,\n      publicKey: size,\n      publicKeyHasPrefix: false,\n      signature: size * 2,\n      seed: seedLength,\n    },\n  };\n})();\n\nconst isoMap = /* @__PURE__ */ (() =>\n  isogenyMap(\n    Fpk1,\n    [\n      // xNum\n      [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n      ],\n      // xDen\n      [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n      // yNum\n      [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n      ],\n      // yDen\n      [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n    ].map((i) => i.map((j) => BigInt(j))) as [bigint[], bigint[], bigint[], bigint[]]\n  ))();\nconst mapSWU = /* @__PURE__ */ (() =>\n  mapToCurveSimpleSWU(Fpk1, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fpk1.create(BigInt('-11')),\n  }))();\n\n/** Hashing / encoding to secp256k1 points / field. RFC 9380 methods. */\nexport const secp256k1_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() =>\n  createHasher(\n    secp256k1.Point,\n    (scalars: bigint[]) => {\n      const { x, y } = mapSWU(Fpk1.create(scalars[0]));\n      return isoMap(x, y);\n    },\n    {\n      DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n      encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n      p: Fpk1.ORDER,\n      m: 1,\n      k: 128,\n      expand: 'xmd',\n      hash: sha256,\n    }\n  ))();\n\n/** @deprecated use `import { secp256k1_hasher } from '@noble/curves/secp256k1.js';` */\nexport const hashToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\n  secp256k1_hasher.hashToCurve)();\n\n/** @deprecated use `import { secp256k1_hasher } from '@noble/curves/secp256k1.js';` */\nexport const encodeToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\n  secp256k1_hasher.encodeToCurve)();\n","import { createHash } from 'crypto'\nimport wrapCryptoCreateHash from '../internal/wrapCryptoCreateHash'\n\n/**\n * Wrap node's native sha512 implementation in HashFn\n */\nexport const sha512 = wrapCryptoCreateHash('sha512', createHash)\n","/**\n * Deprecated module: moved from curves/abstract/utils.js to curves/utils.js\n * @module\n */\nimport * as u from '../utils.ts';\n\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport type Hex = u.Hex;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport type PrivKey = u.PrivKey;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport type CHash = u.CHash;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport type FHash = u.FHash;\n\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const abytes: typeof u.abytes = u.abytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const anumber: typeof u.anumber = u.anumber;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bytesToHex: typeof u.bytesToHex = u.bytesToHex;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bytesToUtf8: typeof u.bytesToUtf8 = u.bytesToUtf8;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const concatBytes: typeof u.concatBytes = u.concatBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const hexToBytes: typeof u.hexToBytes = u.hexToBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const isBytes: typeof u.isBytes = u.isBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const randomBytes: typeof u.randomBytes = u.randomBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const utf8ToBytes: typeof u.utf8ToBytes = u.utf8ToBytes;\n\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const abool: typeof u.abool = u.abool;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const numberToHexUnpadded: typeof u.numberToHexUnpadded = u.numberToHexUnpadded;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const hexToNumber: typeof u.hexToNumber = u.hexToNumber;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bytesToNumberBE: typeof u.bytesToNumberBE = u.bytesToNumberBE;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bytesToNumberLE: typeof u.bytesToNumberLE = u.bytesToNumberLE;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const numberToBytesBE: typeof u.numberToBytesBE = u.numberToBytesBE;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const numberToBytesLE: typeof u.numberToBytesLE = u.numberToBytesLE;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const numberToVarBytesBE: typeof u.numberToVarBytesBE = u.numberToVarBytesBE;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const ensureBytes: typeof u.ensureBytes = u.ensureBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const equalBytes: typeof u.equalBytes = u.equalBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const copyBytes: typeof u.copyBytes = u.copyBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const asciiToBytes: typeof u.asciiToBytes = u.asciiToBytes;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const inRange: typeof u.inRange = u.inRange;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const aInRange: typeof u.aInRange = u.aInRange;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bitLen: typeof u.bitLen = u.bitLen;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bitGet: typeof u.bitGet = u.bitGet;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bitSet: typeof u.bitSet = u.bitSet;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const bitMask: typeof u.bitMask = u.bitMask;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const createHmacDrbg: typeof u.createHmacDrbg = u.createHmacDrbg;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const notImplemented: typeof u.notImplemented = u.notImplemented;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const memoized: typeof u.memoized = u.memoized;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const validateObject: typeof u.validateObject = u.validateObject;\n/** @deprecated moved to `@noble/curves/utils.js` */\nexport const isHash: typeof u.isHash = u.isHash;\n","import { sha512 } from '@xrplf/isomorphic/sha512'\nimport { bytesToNumberBE } from '@noble/curves/abstract/utils'\n\ntype Input = Uint8Array | number[] | string\n\nexport default class Sha512 {\n  // instantiate empty sha512 hash\n  hash = sha512.create()\n\n  static half(input: Input): Uint8Array {\n    return new Sha512().add(input).first256()\n  }\n\n  add(bytes: Input): this {\n    this.hash.update(bytes)\n    return this\n  }\n\n  addU32(i: number): this {\n    const buffer = new Uint8Array(4)\n    new DataView(buffer.buffer).setUint32(0, i)\n    return this.add(buffer)\n  }\n\n  finish(): Uint8Array {\n    return this.hash.digest()\n  }\n\n  first256(): Uint8Array {\n    return this.finish().slice(0, 32)\n  }\n\n  first256BigInt(): bigint {\n    return bytesToNumberBE(this.first256())\n  }\n}\n","import { secp256k1 } from '@noble/curves/secp256k1'\n\nimport Sha512 from '../../utils/Sha512'\n\nconst ZERO = BigInt(0)\n\nfunction deriveScalar(bytes: Uint8Array, discrim?: number): bigint {\n  const order = secp256k1.CURVE.n\n  for (let i = 0; i <= 0xffff_ffff; i++) {\n    // We hash the bytes to find a 256-bit number, looping until we are sure it\n    // is less than the order of the curve.\n    const hasher = new Sha512().add(bytes)\n    // If the optional discriminator index was passed in, update the hash.\n    if (discrim !== undefined) {\n      hasher.addU32(discrim)\n    }\n    hasher.addU32(i)\n    const key = hasher.first256BigInt()\n    /* istanbul ignore else */\n    if (key > ZERO && key < order) {\n      return key\n    }\n  }\n  // This error is practically impossible to reach.\n  // The order of the curve describes the (finite) amount of points on the curve\n  // https://github.com/indutny/elliptic/blob/master/lib/elliptic/curves.js#L182\n  // How often will an (essentially) random number generated by Sha512 be larger than that?\n  // There's 2^32 chances (the for loop) to get a number smaller than the order,\n  // and it's rare that you'll even get past the first loop iteration.\n  // Note that in TypeScript we actually need the throw, otherwise the function signature would be bigint | undefined\n  //\n  /* istanbul ignore next */\n  throw new Error('impossible unicorn ;)')\n}\n\n/**\n * @param seed - Bytes.\n * @param [opts] - Object.\n * @param [opts.accountIndex=0] - The account number to generate.\n * @param [opts.validator=false] - Generate root key-pair,\n *                                              as used by validators.\n * @returns {bigint} 256 bit scalar value.\n *\n */\nexport function derivePrivateKey(\n  seed: Uint8Array,\n  opts: {\n    validator?: boolean\n    accountIndex?: number\n  } = {},\n): bigint {\n  const root = opts.validator\n  const order = secp256k1.CURVE.n\n\n  // This private generator represents the `root` private key, and is what's\n  // used by validators for signing when a keypair is generated from a seed.\n  const privateGen = deriveScalar(seed)\n  if (root) {\n    // As returned by validation_create for a given seed\n    return privateGen\n  }\n  const publicGen =\n    secp256k1.ProjectivePoint.BASE.multiply(privateGen).toRawBytes(true)\n  // A seed can generate many keypairs as a function of the seed and a uint32.\n  // Almost everyone just uses the first account, `0`.\n  const accountIndex = opts.accountIndex || 0\n  return (deriveScalar(publicGen, accountIndex) + privateGen) % order\n}\n\nexport function accountPublicFromPublicGenerator(publicGenBytes: Uint8Array) {\n  const rootPubPoint = secp256k1.ProjectivePoint.fromHex(publicGenBytes)\n  const scalar = deriveScalar(publicGenBytes, 0)\n  const point = secp256k1.ProjectivePoint.BASE.multiply(scalar)\n  const offset = rootPubPoint.add(point)\n  return offset.toRawBytes(true)\n}\n","const assertHelper: {\n  ok: (cond: boolean, message?: string) => asserts cond is true\n} = {\n  ok(cond, message): asserts cond is true {\n    if (!cond) {\n      throw new Error(message)\n    }\n  },\n}\n\nexport default assertHelper\n","import type { Algorithm, HexString, KeyType } from '../types'\n\nenum Prefix {\n  NONE = -1,\n  ED25519 = 0xed,\n  SECP256K1_PUB_X = 0x02,\n  SECP256K1_PUB_X_ODD_Y = 0x03,\n  SECP256K1_PUB_XY = 0x04,\n  SECP256K1_PRIVATE = 0x00,\n}\n\ntype CompositeKey = `${KeyType}_${Prefix}_${number}`\n\n/**\n * | Curve     | Type        | Prefix | Length | Description                                           | Algorithm       |\n * |-----------|-------------|:------:|:------:|-------------------------------------------------------|----------------:|\n * | ed25519   | Private     |  0xED  |   33   | prefix + Uint256LE (0 < n < order )                   |         ed25519 |\n * | ed25519   | Public      |  0xED  |   33   | prefix + 32 y-bytes                                   |         ed25519 |\n * | secp256k1 | Public (1)  |  0x02  |   33   | prefix + 32 x-bytes                                   | ecdsa-secp256k1 |\n * | secp256k1 | Public (2)  |  0x03  |   33   | prefix + 32 x-bytes (y is odd)                        | ecdsa-secp256k1 |\n * | secp256k1 | Public (3)  |  0x04  |   65   | prefix + 32 x-bytes + 32 y-bytes                      | ecdsa-secp256k1 |\n * | secp256k1 | Private (1) |  None  |   32   | Uint256BE (0 < n < order)                             | ecdsa-secp256k1 |\n * | secp256k1 | Private (2) |  0x00  |   33   | prefix + Uint256BE (0 < n < order)                    | ecdsa-secp256k1 |\n *\n * Note: The 0x00 prefix for secpk256k1 Private (2) essentially 0 pads the number\n *       and the interpreted number is the same as 32 bytes.\n */\nconst KEY_TYPES: Record<CompositeKey, Algorithm> = {\n  [`private_${Prefix.NONE}_32`]: 'ecdsa-secp256k1',\n  [`private_${Prefix.SECP256K1_PRIVATE}_33`]: 'ecdsa-secp256k1',\n  [`private_${Prefix.ED25519}_33`]: 'ed25519',\n  [`public_${Prefix.ED25519}_33`]: 'ed25519',\n  [`public_${Prefix.SECP256K1_PUB_X}_33`]: 'ecdsa-secp256k1',\n  [`public_${Prefix.SECP256K1_PUB_X_ODD_Y}_33`]: 'ecdsa-secp256k1',\n  [`public_${Prefix.SECP256K1_PUB_XY}_65`]: 'ecdsa-secp256k1',\n}\n\nfunction getKeyInfo(key: HexString) {\n  return {\n    prefix: key.length < 2 ? Prefix.NONE : parseInt(key.slice(0, 2), 16),\n    len: key.length / 2,\n  }\n}\n\nfunction prefixRepr(prefix: Prefix): string {\n  return prefix === Prefix.NONE\n    ? 'None'\n    : `0x${prefix.toString(16).padStart(2, '0')}`\n}\n\nfunction getValidFormatsTable(type: KeyType) {\n  // No need overkill with renderTable method\n  const padding = 2\n  const colWidth = {\n    algorithm: 'ecdsa-secp256k1'.length + padding,\n    prefix: '0x00'.length + padding,\n  }\n\n  return Object.entries(KEY_TYPES)\n    .filter(([key]) => key.startsWith(type))\n    .map(([key, algorithm]) => {\n      const [, prefix, length] = key.split('_')\n      const paddedAlgo = algorithm.padEnd(colWidth.algorithm)\n      const paddedPrefix = prefixRepr(Number(prefix)).padEnd(colWidth.prefix)\n      return `${paddedAlgo} - Prefix: ${paddedPrefix} Length: ${length} bytes`\n    })\n    .join('\\n')\n}\n\nfunction keyError({\n  key,\n  type,\n  prefix,\n  len,\n}: {\n  key: string\n  type: KeyType\n  prefix: number\n  len: number\n}) {\n  const validFormats = getValidFormatsTable(type)\n\n  return `invalid_key:\n\nType: ${type}\nKey: ${key}\nPrefix: ${prefixRepr(prefix)} \nLength: ${len} bytes\n\nAcceptable ${type} formats are:\n${validFormats}\n`\n}\n\n/**\n * Determines the algorithm associated with a given key (public/private).\n *\n * @param key - hexadecimal string representation of the key.\n * @param type - whether expected key is public or private\n * @returns Algorithm algorithm for signing/verifying\n * @throws Error when key is invalid\n */\nexport function getAlgorithmFromKey(key: HexString, type: KeyType): Algorithm {\n  const { prefix, len } = getKeyInfo(key)\n  // Special case back compat support for no prefix\n  const usedPrefix = type === 'private' && len === 32 ? Prefix.NONE : prefix\n  const algorithm = KEY_TYPES[`${type}_${usedPrefix}_${len}`]\n\n  if (!algorithm) {\n    throw new Error(keyError({ key, type, len, prefix: usedPrefix }))\n  }\n  return algorithm\n}\n\nexport function getAlgorithmFromPublicKey(key: HexString): Algorithm {\n  return getAlgorithmFromKey(key, 'public')\n}\n\nexport function getAlgorithmFromPrivateKey(key: HexString): Algorithm {\n  return getAlgorithmFromKey(key, 'private')\n}\n","import { numberToBytesBE } from '@noble/curves/abstract/utils'\nimport { secp256k1 as nobleSecp256k1 } from '@noble/curves/secp256k1'\nimport { bytesToHex } from '@xrplf/isomorphic/utils'\n\nimport type {\n  DeriveKeyPairOptions,\n  HexString,\n  SigningScheme,\n} from '../../types'\n\nimport { derivePrivateKey } from './utils'\nimport assert from '../../utils/assert'\nimport Sha512 from '../../utils/Sha512'\n\nconst SECP256K1_PREFIX = '00'\n\nconst secp256k1: SigningScheme = {\n  deriveKeypair(\n    entropy: Uint8Array,\n    options?: DeriveKeyPairOptions,\n  ): {\n    privateKey: string\n    publicKey: string\n  } {\n    const derived = derivePrivateKey(entropy, options)\n    const privateKey =\n      SECP256K1_PREFIX + bytesToHex(numberToBytesBE(derived, 32))\n\n    const publicKey = bytesToHex(nobleSecp256k1.getPublicKey(derived, true))\n    return { privateKey, publicKey }\n  },\n\n  sign(message: Uint8Array, privateKey: HexString): string {\n    // Some callers pass the privateKey with the prefix, others without.\n    // @noble/curves will throw if the key is not exactly 32 bytes, so we\n    // normalize it before passing to the sign method.\n    assert.ok(\n      (privateKey.length === 66 && privateKey.startsWith(SECP256K1_PREFIX)) ||\n        privateKey.length === 64,\n    )\n    const normedPrivateKey =\n      privateKey.length === 66 ? privateKey.slice(2) : privateKey\n    return nobleSecp256k1\n      .sign(Sha512.half(message), normedPrivateKey, {\n        // \"Canonical\" signatures\n        lowS: true,\n        // Would fail tests if signatures aren't deterministic\n        extraEntropy: undefined,\n      })\n      .toDERHex(true)\n      .toUpperCase()\n  },\n\n  verify(\n    message: Uint8Array,\n    signature: HexString,\n    publicKey: HexString,\n  ): boolean {\n    const decoded = nobleSecp256k1.Signature.fromDER(signature)\n    return nobleSecp256k1.verify(decoded, Sha512.half(message), publicKey)\n  },\n}\n\nexport default secp256k1\n","/**\n * Twisted Edwards curve. The formula is: ax + y = 1 + dxy.\n * For design rationale of types / exports, see weierstrass module documentation.\n * Untwisted Edwards curves exist, but they aren't used in real-world protocols.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  _validateObject,\n  _abool2 as abool,\n  _abytes2 as abytes,\n  aInRange,\n  bytesToHex,\n  bytesToNumberLE,\n  concatBytes,\n  copyBytes,\n  ensureBytes,\n  isBytes,\n  memoized,\n  notImplemented,\n  randomBytes as randomBytesWeb,\n  type FHash,\n  type Hex,\n} from '../utils.ts';\nimport {\n  _createCurveFields,\n  normalizeZ,\n  pippenger,\n  wNAF,\n  type AffinePoint,\n  type BasicCurve,\n  type CurveLengths,\n  type CurvePoint,\n  type CurvePointCons,\n} from './curve.ts';\nimport { Field, type IField, type NLength } from './modular.ts';\n\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _8n = BigInt(8);\n\nexport type UVRatio = (u: bigint, v: bigint) => { isValid: boolean; value: bigint };\n\n/** Instance of Extended Point with coordinates in X, Y, Z, T. */\nexport interface EdwardsPoint extends CurvePoint<bigint, EdwardsPoint> {\n  /** extended X coordinate. Different from affine x. */\n  readonly X: bigint;\n  /** extended Y coordinate. Different from affine y. */\n  readonly Y: bigint;\n  /** extended Z coordinate */\n  readonly Z: bigint;\n  /** extended T coordinate */\n  readonly T: bigint;\n\n  /** @deprecated use `toBytes` */\n  toRawBytes(): Uint8Array;\n  /** @deprecated use `p.precompute(windowSize)` */\n  _setWindowSize(windowSize: number): void;\n  /** @deprecated use .X */\n  readonly ex: bigint;\n  /** @deprecated use .Y */\n  readonly ey: bigint;\n  /** @deprecated use .Z */\n  readonly ez: bigint;\n  /** @deprecated use .T */\n  readonly et: bigint;\n}\n/** Static methods of Extended Point with coordinates in X, Y, Z, T. */\nexport interface EdwardsPointCons extends CurvePointCons<EdwardsPoint> {\n  new (X: bigint, Y: bigint, Z: bigint, T: bigint): EdwardsPoint;\n  CURVE(): EdwardsOpts;\n  fromBytes(bytes: Uint8Array, zip215?: boolean): EdwardsPoint;\n  fromHex(hex: Hex, zip215?: boolean): EdwardsPoint;\n  /** @deprecated use `import { pippenger } from '@noble/curves/abstract/curve.js';` */\n  msm(points: EdwardsPoint[], scalars: bigint[]): EdwardsPoint;\n}\n/** @deprecated use EdwardsPoint */\nexport type ExtPointType = EdwardsPoint;\n/** @deprecated use EdwardsPointCons */\nexport type ExtPointConstructor = EdwardsPointCons;\n\n/**\n * Twisted Edwards curve options.\n *\n * * a: formula param\n * * d: formula param\n * * p: prime characteristic (order) of finite field, in which arithmetics is done\n * * n: order of prime subgroup a.k.a total amount of valid curve points\n * * h: cofactor. h*n is group order; n is subgroup order\n * * Gx: x coordinate of generator point a.k.a. base point\n * * Gy: y coordinate of generator point\n */\nexport type EdwardsOpts = Readonly<{\n  p: bigint;\n  n: bigint;\n  h: bigint;\n  a: bigint;\n  d: bigint;\n  Gx: bigint;\n  Gy: bigint;\n}>;\n\n/**\n * Extra curve options for Twisted Edwards.\n *\n * * Fp: redefined Field over curve.p\n * * Fn: redefined Field over curve.n\n * * uvRatio: helper function for decompression, calculating (u/v)\n */\nexport type EdwardsExtraOpts = Partial<{\n  Fp: IField<bigint>;\n  Fn: IField<bigint>;\n  FpFnLE: boolean;\n  uvRatio: (u: bigint, v: bigint) => { isValid: boolean; value: bigint };\n}>;\n\n/**\n * EdDSA (Edwards Digital Signature algorithm) options.\n *\n * * hash: hash function used to hash secret keys and messages\n * * adjustScalarBytes: clears bits to get valid field element\n * * domain: Used for hashing\n * * mapToCurve: for hash-to-curve standard\n * * prehash: RFC 8032 pre-hashing of messages to sign() / verify()\n * * randomBytes: function generating random bytes, used for randomSecretKey\n */\nexport type EdDSAOpts = Partial<{\n  adjustScalarBytes: (bytes: Uint8Array) => Uint8Array;\n  domain: (data: Uint8Array, ctx: Uint8Array, phflag: boolean) => Uint8Array;\n  mapToCurve: (scalar: bigint[]) => AffinePoint<bigint>;\n  prehash: FHash;\n  randomBytes: (bytesLength?: number) => Uint8Array;\n}>;\n\n/**\n * EdDSA (Edwards Digital Signature algorithm) interface.\n *\n * Allows to create and verify signatures, create public and secret keys.\n */\nexport interface EdDSA {\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n  getPublicKey: (secretKey: Hex) => Uint8Array;\n  sign: (message: Hex, secretKey: Hex, options?: { context?: Hex }) => Uint8Array;\n  verify: (\n    sig: Hex,\n    message: Hex,\n    publicKey: Hex,\n    options?: { context?: Hex; zip215: boolean }\n  ) => boolean;\n  Point: EdwardsPointCons;\n  utils: {\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\n    isValidSecretKey: (secretKey: Uint8Array) => boolean;\n    isValidPublicKey: (publicKey: Uint8Array, zip215?: boolean) => boolean;\n\n    /**\n     * Converts ed public key to x public key.\n     *\n     * There is NO `fromMontgomery`:\n     * - There are 2 valid ed25519 points for every x25519, with flipped coordinate\n     * - Sometimes there are 0 valid ed25519 points, because x25519 *additionally*\n     *   accepts inputs on the quadratic twist, which can't be moved to ed25519\n     *\n     * @example\n     * ```js\n     * const someonesPub = ed25519.getPublicKey(ed25519.utils.randomSecretKey());\n     * const aPriv = x25519.utils.randomSecretKey();\n     * x25519.getSharedSecret(aPriv, ed25519.utils.toMontgomery(someonesPub))\n     * ```\n     */\n    toMontgomery: (publicKey: Uint8Array) => Uint8Array;\n    /**\n     * Converts ed secret key to x secret key.\n     * @example\n     * ```js\n     * const someonesPub = x25519.getPublicKey(x25519.utils.randomSecretKey());\n     * const aPriv = ed25519.utils.randomSecretKey();\n     * x25519.getSharedSecret(ed25519.utils.toMontgomerySecret(aPriv), someonesPub)\n     * ```\n     */\n    toMontgomerySecret: (privateKey: Uint8Array) => Uint8Array;\n    getExtendedPublicKey: (key: Hex) => {\n      head: Uint8Array;\n      prefix: Uint8Array;\n      scalar: bigint;\n      point: EdwardsPoint;\n      pointBytes: Uint8Array;\n    };\n\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `point.precompute()` */\n    precompute: (windowSize?: number, point?: EdwardsPoint) => EdwardsPoint;\n  };\n  lengths: CurveLengths;\n}\n\nfunction isEdValidXY(Fp: IField<bigint>, CURVE: EdwardsOpts, x: bigint, y: bigint): boolean {\n  const x2 = Fp.sqr(x);\n  const y2 = Fp.sqr(y);\n  const left = Fp.add(Fp.mul(CURVE.a, x2), y2);\n  const right = Fp.add(Fp.ONE, Fp.mul(CURVE.d, Fp.mul(x2, y2)));\n  return Fp.eql(left, right);\n}\n\nexport function edwards(params: EdwardsOpts, extraOpts: EdwardsExtraOpts = {}): EdwardsPointCons {\n  const validated = _createCurveFields('edwards', params, extraOpts, extraOpts.FpFnLE);\n  const { Fp, Fn } = validated;\n  let CURVE = validated.CURVE as EdwardsOpts;\n  const { h: cofactor } = CURVE;\n  _validateObject(extraOpts, {}, { uvRatio: 'function' });\n\n  // Important:\n  // There are some places where Fp.BYTES is used instead of nByteLength.\n  // So far, everything has been tested with curves of Fp.BYTES == nByteLength.\n  // TODO: test and find curves which behave otherwise.\n  const MASK = _2n << (BigInt(Fn.BYTES * 8) - _1n);\n  const modP = (n: bigint) => Fp.create(n); // Function overrides\n\n  // sqrt(u/v)\n  const uvRatio =\n    extraOpts.uvRatio ||\n    ((u: bigint, v: bigint) => {\n      try {\n        return { isValid: true, value: Fp.sqrt(Fp.div(u, v)) };\n      } catch (e) {\n        return { isValid: false, value: _0n };\n      }\n    });\n\n  // Validate whether the passed curve params are valid.\n  // equation ax + y = 1 + dxy should work for generator point.\n  if (!isEdValidXY(Fp, CURVE, CURVE.Gx, CURVE.Gy))\n    throw new Error('bad curve params: generator point');\n\n  /**\n   * Asserts coordinate is valid: 0 <= n < MASK.\n   * Coordinates >= Fp.ORDER are allowed for zip215.\n   */\n  function acoord(title: string, n: bigint, banZero = false) {\n    const min = banZero ? _1n : _0n;\n    aInRange('coordinate ' + title, n, min, MASK);\n    return n;\n  }\n\n  function aextpoint(other: unknown) {\n    if (!(other instanceof Point)) throw new Error('ExtendedPoint expected');\n  }\n  // Converts Extended point to default (x, y) coordinates.\n  // Can accept precomputed Z^-1 - for example, from invertBatch.\n  const toAffineMemo = memoized((p: Point, iz?: bigint): AffinePoint<bigint> => {\n    const { X, Y, Z } = p;\n    const is0 = p.is0();\n    if (iz == null) iz = is0 ? _8n : (Fp.inv(Z) as bigint); // 8 was chosen arbitrarily\n    const x = modP(X * iz);\n    const y = modP(Y * iz);\n    const zz = Fp.mul(Z, iz);\n    if (is0) return { x: _0n, y: _1n };\n    if (zz !== _1n) throw new Error('invZ was invalid');\n    return { x, y };\n  });\n  const assertValidMemo = memoized((p: Point) => {\n    const { a, d } = CURVE;\n    if (p.is0()) throw new Error('bad point: ZERO'); // TODO: optimize, with vars below?\n    // Equation in affine coordinates: ax + y = 1 + dxy\n    // Equation in projective coordinates (X/Z, Y/Z, Z):  (aX + Y)Z = Z + dXY\n    const { X, Y, Z, T } = p;\n    const X2 = modP(X * X); // X\n    const Y2 = modP(Y * Y); // Y\n    const Z2 = modP(Z * Z); // Z\n    const Z4 = modP(Z2 * Z2); // Z\n    const aX2 = modP(X2 * a); // aX\n    const left = modP(Z2 * modP(aX2 + Y2)); // (aX + Y)Z\n    const right = modP(Z4 + modP(d * modP(X2 * Y2))); // Z + dXY\n    if (left !== right) throw new Error('bad point: equation left != right (1)');\n    // In Extended coordinates we also have T, which is x*y=T/Z: check X*Y == Z*T\n    const XY = modP(X * Y);\n    const ZT = modP(Z * T);\n    if (XY !== ZT) throw new Error('bad point: equation left != right (2)');\n    return true;\n  });\n\n  // Extended Point works in extended coordinates: (X, Y, Z, T)  (x=X/Z, y=Y/Z, T=xy).\n  // https://en.wikipedia.org/wiki/Twisted_Edwards_curve#Extended_coordinates\n  class Point implements EdwardsPoint {\n    // base / generator point\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, _1n, modP(CURVE.Gx * CURVE.Gy));\n    // zero / infinity / identity point\n    static readonly ZERO = new Point(_0n, _1n, _1n, _0n); // 0, 1, 1, 0\n    // math field\n    static readonly Fp = Fp;\n    // scalar field\n    static readonly Fn = Fn;\n\n    readonly X: bigint;\n    readonly Y: bigint;\n    readonly Z: bigint;\n    readonly T: bigint;\n\n    constructor(X: bigint, Y: bigint, Z: bigint, T: bigint) {\n      this.X = acoord('x', X);\n      this.Y = acoord('y', Y);\n      this.Z = acoord('z', Z, true);\n      this.T = acoord('t', T);\n      Object.freeze(this);\n    }\n\n    static CURVE(): EdwardsOpts {\n      return CURVE;\n    }\n\n    static fromAffine(p: AffinePoint<bigint>): Point {\n      if (p instanceof Point) throw new Error('extended point not allowed');\n      const { x, y } = p || {};\n      acoord('x', x);\n      acoord('y', y);\n      return new Point(x, y, _1n, modP(x * y));\n    }\n\n    // Uses algo from RFC8032 5.1.3.\n    static fromBytes(bytes: Uint8Array, zip215 = false): Point {\n      const len = Fp.BYTES;\n      const { a, d } = CURVE;\n      bytes = copyBytes(abytes(bytes, len, 'point'));\n      abool(zip215, 'zip215');\n      const normed = copyBytes(bytes); // copy again, we'll manipulate it\n      const lastByte = bytes[len - 1]; // select last byte\n      normed[len - 1] = lastByte & ~0x80; // clear last bit\n      const y = bytesToNumberLE(normed);\n\n      // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n      // RFC8032 prohibits >= p, but ZIP215 doesn't\n      // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n      // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n      const max = zip215 ? MASK : Fp.ORDER;\n      aInRange('point.y', y, _0n, max);\n\n      // Ed25519: x = (y-1)/(dy+1) mod p. Ed448: x = (y-1)/(dy-1) mod p. Generic case:\n      // ax+y=1+dxy => y-1=dxy-ax => y-1=x(dy-a) => x=(y-1)/(dy-a)\n      const y2 = modP(y * y); // denominator is always non-0 mod p.\n      const u = modP(y2 - _1n); // u = y - 1\n      const v = modP(d * y2 - a); // v = d y + 1.\n      let { isValid, value: x } = uvRatio(u, v); // (u/v)\n      if (!isValid) throw new Error('bad point: invalid y coordinate');\n      const isXOdd = (x & _1n) === _1n; // There are 2 square roots. Use x_0 bit to select proper\n      const isLastByteOdd = (lastByte & 0x80) !== 0; // x_0, last bit\n      if (!zip215 && x === _0n && isLastByteOdd)\n        // if x=0 and x_0 = 1, fail\n        throw new Error('bad point: x=0 and x_0=1');\n      if (isLastByteOdd !== isXOdd) x = modP(-x); // if x_0 != x mod 2, set x = p-x\n      return Point.fromAffine({ x, y });\n    }\n    static fromHex(bytes: Uint8Array, zip215 = false): Point {\n      return Point.fromBytes(ensureBytes('point', bytes), zip215);\n    }\n\n    get x(): bigint {\n      return this.toAffine().x;\n    }\n    get y(): bigint {\n      return this.toAffine().y;\n    }\n\n    precompute(windowSize: number = 8, isLazy = true) {\n      wnaf.createCache(this, windowSize);\n      if (!isLazy) this.multiply(_2n); // random number\n      return this;\n    }\n\n    // Useful in fromAffine() - not for fromBytes(), which always created valid points.\n    assertValidity(): void {\n      assertValidMemo(this);\n    }\n\n    // Compare one point to another.\n    equals(other: Point): boolean {\n      aextpoint(other);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const { X: X2, Y: Y2, Z: Z2 } = other;\n      const X1Z2 = modP(X1 * Z2);\n      const X2Z1 = modP(X2 * Z1);\n      const Y1Z2 = modP(Y1 * Z2);\n      const Y2Z1 = modP(Y2 * Z1);\n      return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n    }\n\n    is0(): boolean {\n      return this.equals(Point.ZERO);\n    }\n\n    negate(): Point {\n      // Flips point sign to a negative one (-x, y in affine coords)\n      return new Point(modP(-this.X), this.Y, this.Z, modP(-this.T));\n    }\n\n    // Fast algo for doubling Extended Point.\n    // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#doubling-dbl-2008-hwcd\n    // Cost: 4M + 4S + 1*a + 6add + 1*2.\n    double(): Point {\n      const { a } = CURVE;\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const A = modP(X1 * X1); // A = X12\n      const B = modP(Y1 * Y1); // B = Y12\n      const C = modP(_2n * modP(Z1 * Z1)); // C = 2*Z12\n      const D = modP(a * A); // D = a*A\n      const x1y1 = X1 + Y1;\n      const E = modP(modP(x1y1 * x1y1) - A - B); // E = (X1+Y1)2-A-B\n      const G = D + B; // G = D+B\n      const F = G - C; // F = G-C\n      const H = D - B; // H = D-B\n      const X3 = modP(E * F); // X3 = E*F\n      const Y3 = modP(G * H); // Y3 = G*H\n      const T3 = modP(E * H); // T3 = E*H\n      const Z3 = modP(F * G); // Z3 = F*G\n      return new Point(X3, Y3, Z3, T3);\n    }\n\n    // Fast algo for adding 2 Extended Points.\n    // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#addition-add-2008-hwcd\n    // Cost: 9M + 1*a + 1*d + 7add.\n    add(other: Point) {\n      aextpoint(other);\n      const { a, d } = CURVE;\n      const { X: X1, Y: Y1, Z: Z1, T: T1 } = this;\n      const { X: X2, Y: Y2, Z: Z2, T: T2 } = other;\n      const A = modP(X1 * X2); // A = X1*X2\n      const B = modP(Y1 * Y2); // B = Y1*Y2\n      const C = modP(T1 * d * T2); // C = T1*d*T2\n      const D = modP(Z1 * Z2); // D = Z1*Z2\n      const E = modP((X1 + Y1) * (X2 + Y2) - A - B); // E = (X1+Y1)*(X2+Y2)-A-B\n      const F = D - C; // F = D-C\n      const G = D + C; // G = D+C\n      const H = modP(B - a * A); // H = B-a*A\n      const X3 = modP(E * F); // X3 = E*F\n      const Y3 = modP(G * H); // Y3 = G*H\n      const T3 = modP(E * H); // T3 = E*H\n      const Z3 = modP(F * G); // Z3 = F*G\n      return new Point(X3, Y3, Z3, T3);\n    }\n\n    subtract(other: Point): Point {\n      return this.add(other.negate());\n    }\n\n    // Constant-time multiplication.\n    multiply(scalar: bigint): Point {\n      // 1 <= scalar < L\n      if (!Fn.isValidNot0(scalar)) throw new Error('invalid scalar: expected 1 <= sc < curve.n');\n      const { p, f } = wnaf.cached(this, scalar, (p) => normalizeZ(Point, p));\n      return normalizeZ(Point, [p, f])[0];\n    }\n\n    // Non-constant-time multiplication. Uses double-and-add algorithm.\n    // It's faster, but should only be used when you don't care about\n    // an exposed private key e.g. sig verification.\n    // Does NOT allow scalars higher than CURVE.n.\n    // Accepts optional accumulator to merge with multiply (important for sparse scalars)\n    multiplyUnsafe(scalar: bigint, acc = Point.ZERO): Point {\n      // 0 <= scalar < L\n      if (!Fn.isValid(scalar)) throw new Error('invalid scalar: expected 0 <= sc < curve.n');\n      if (scalar === _0n) return Point.ZERO;\n      if (this.is0() || scalar === _1n) return this;\n      return wnaf.unsafe(this, scalar, (p) => normalizeZ(Point, p), acc);\n    }\n\n    // Checks if point is of small order.\n    // If you add something to small order point, you will have \"dirty\"\n    // point with torsion component.\n    // Multiplies point by cofactor and checks if the result is 0.\n    isSmallOrder(): boolean {\n      return this.multiplyUnsafe(cofactor).is0();\n    }\n\n    // Multiplies point by curve order and checks if the result is 0.\n    // Returns `false` is the point is dirty.\n    isTorsionFree(): boolean {\n      return wnaf.unsafe(this, CURVE.n).is0();\n    }\n\n    // Converts Extended point to default (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    toAffine(invertedZ?: bigint): AffinePoint<bigint> {\n      return toAffineMemo(this, invertedZ);\n    }\n\n    clearCofactor(): Point {\n      if (cofactor === _1n) return this;\n      return this.multiplyUnsafe(cofactor);\n    }\n\n    toBytes(): Uint8Array {\n      const { x, y } = this.toAffine();\n      // Fp.toBytes() allows non-canonical encoding of y (>= p).\n      const bytes = Fp.toBytes(y);\n      // Each y has 2 valid points: (x, y), (x,-y).\n      // When compressing, it's enough to store y and use the last byte to encode sign of x\n      bytes[bytes.length - 1] |= x & _1n ? 0x80 : 0;\n      return bytes;\n    }\n    toHex(): string {\n      return bytesToHex(this.toBytes());\n    }\n\n    toString() {\n      return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\n    }\n\n    // TODO: remove\n    get ex(): bigint {\n      return this.X;\n    }\n    get ey(): bigint {\n      return this.Y;\n    }\n    get ez(): bigint {\n      return this.Z;\n    }\n    get et(): bigint {\n      return this.T;\n    }\n    static normalizeZ(points: Point[]): Point[] {\n      return normalizeZ(Point, points);\n    }\n    static msm(points: Point[], scalars: bigint[]): Point {\n      return pippenger(Point, Fn, points, scalars);\n    }\n    _setWindowSize(windowSize: number) {\n      this.precompute(windowSize);\n    }\n    toRawBytes(): Uint8Array {\n      return this.toBytes();\n    }\n  }\n  const wnaf = new wNAF(Point, Fn.BITS);\n  Point.BASE.precompute(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\n  return Point;\n}\n\n/**\n * Base class for prime-order points like Ristretto255 and Decaf448.\n * These points eliminate cofactor issues by representing equivalence classes\n * of Edwards curve points.\n */\nexport abstract class PrimeEdwardsPoint<T extends PrimeEdwardsPoint<T>>\n  implements CurvePoint<bigint, T>\n{\n  static BASE: PrimeEdwardsPoint<any>;\n  static ZERO: PrimeEdwardsPoint<any>;\n  static Fp: IField<bigint>;\n  static Fn: IField<bigint>;\n\n  protected readonly ep: EdwardsPoint;\n\n  constructor(ep: EdwardsPoint) {\n    this.ep = ep;\n  }\n\n  // Abstract methods that must be implemented by subclasses\n  abstract toBytes(): Uint8Array;\n  abstract equals(other: T): boolean;\n\n  // Static methods that must be implemented by subclasses\n  static fromBytes(_bytes: Uint8Array): any {\n    notImplemented();\n  }\n\n  static fromHex(_hex: Hex): any {\n    notImplemented();\n  }\n\n  get x(): bigint {\n    return this.toAffine().x;\n  }\n  get y(): bigint {\n    return this.toAffine().y;\n  }\n\n  // Common implementations\n  clearCofactor(): T {\n    // no-op for prime-order groups\n    return this as any;\n  }\n\n  assertValidity(): void {\n    this.ep.assertValidity();\n  }\n\n  toAffine(invertedZ?: bigint): AffinePoint<bigint> {\n    return this.ep.toAffine(invertedZ);\n  }\n\n  toHex(): string {\n    return bytesToHex(this.toBytes());\n  }\n\n  toString(): string {\n    return this.toHex();\n  }\n\n  isTorsionFree(): boolean {\n    return true;\n  }\n\n  isSmallOrder(): boolean {\n    return false;\n  }\n\n  add(other: T): T {\n    this.assertSame(other);\n    return this.init(this.ep.add(other.ep));\n  }\n\n  subtract(other: T): T {\n    this.assertSame(other);\n    return this.init(this.ep.subtract(other.ep));\n  }\n\n  multiply(scalar: bigint): T {\n    return this.init(this.ep.multiply(scalar));\n  }\n\n  multiplyUnsafe(scalar: bigint): T {\n    return this.init(this.ep.multiplyUnsafe(scalar));\n  }\n\n  double(): T {\n    return this.init(this.ep.double());\n  }\n\n  negate(): T {\n    return this.init(this.ep.negate());\n  }\n\n  precompute(windowSize?: number, isLazy?: boolean): T {\n    return this.init(this.ep.precompute(windowSize, isLazy));\n  }\n\n  // Helper methods\n  abstract is0(): boolean;\n  protected abstract assertSame(other: T): void;\n  protected abstract init(ep: EdwardsPoint): T;\n\n  /** @deprecated use `toBytes` */\n  toRawBytes(): Uint8Array {\n    return this.toBytes();\n  }\n}\n\n/**\n * Initializes EdDSA signatures over given Edwards curve.\n */\nexport function eddsa(Point: EdwardsPointCons, cHash: FHash, eddsaOpts: EdDSAOpts = {}): EdDSA {\n  if (typeof cHash !== 'function') throw new Error('\"hash\" function param is required');\n  _validateObject(\n    eddsaOpts,\n    {},\n    {\n      adjustScalarBytes: 'function',\n      randomBytes: 'function',\n      domain: 'function',\n      prehash: 'function',\n      mapToCurve: 'function',\n    }\n  );\n\n  const { prehash } = eddsaOpts;\n  const { BASE, Fp, Fn } = Point;\n\n  const randomBytes = eddsaOpts.randomBytes || randomBytesWeb;\n  const adjustScalarBytes = eddsaOpts.adjustScalarBytes || ((bytes: Uint8Array) => bytes);\n  const domain =\n    eddsaOpts.domain ||\n    ((data: Uint8Array, ctx: Uint8Array, phflag: boolean) => {\n      abool(phflag, 'phflag');\n      if (ctx.length || phflag) throw new Error('Contexts/pre-hash are not supported');\n      return data;\n    }); // NOOP\n\n  // Little-endian SHA512 with modulo n\n  function modN_LE(hash: Uint8Array): bigint {\n    return Fn.create(bytesToNumberLE(hash)); // Not Fn.fromBytes: it has length limit\n  }\n\n  // Get the hashed private scalar per RFC8032 5.1.5\n  function getPrivateScalar(key: Hex) {\n    const len = lengths.secretKey;\n    key = ensureBytes('private key', key, len);\n    // Hash private key with curve's hash function to produce uniformingly random input\n    // Check byte lengths: ensure(64, h(ensure(32, key)))\n    const hashed = ensureBytes('hashed private key', cHash(key), 2 * len);\n    const head = adjustScalarBytes(hashed.slice(0, len)); // clear first half bits, produce FE\n    const prefix = hashed.slice(len, 2 * len); // second half is called key prefix (5.1.6)\n    const scalar = modN_LE(head); // The actual private scalar\n    return { head, prefix, scalar };\n  }\n\n  /** Convenience method that creates public key from scalar. RFC8032 5.1.5 */\n  function getExtendedPublicKey(secretKey: Hex) {\n    const { head, prefix, scalar } = getPrivateScalar(secretKey);\n    const point = BASE.multiply(scalar); // Point on Edwards curve aka public key\n    const pointBytes = point.toBytes();\n    return { head, prefix, scalar, point, pointBytes };\n  }\n\n  /** Calculates EdDSA pub key. RFC8032 5.1.5. */\n  function getPublicKey(secretKey: Hex): Uint8Array {\n    return getExtendedPublicKey(secretKey).pointBytes;\n  }\n\n  // int('LE', SHA512(dom2(F, C) || msgs)) mod N\n  function hashDomainToScalar(context: Hex = Uint8Array.of(), ...msgs: Uint8Array[]) {\n    const msg = concatBytes(...msgs);\n    return modN_LE(cHash(domain(msg, ensureBytes('context', context), !!prehash)));\n  }\n\n  /** Signs message with privateKey. RFC8032 5.1.6 */\n  function sign(msg: Hex, secretKey: Hex, options: { context?: Hex } = {}): Uint8Array {\n    msg = ensureBytes('message', msg);\n    if (prehash) msg = prehash(msg); // for ed25519ph etc.\n    const { prefix, scalar, pointBytes } = getExtendedPublicKey(secretKey);\n    const r = hashDomainToScalar(options.context, prefix, msg); // r = dom2(F, C) || prefix || PH(M)\n    const R = BASE.multiply(r).toBytes(); // R = rG\n    const k = hashDomainToScalar(options.context, R, pointBytes, msg); // R || A || PH(M)\n    const s = Fn.create(r + k * scalar); // S = (r + k * s) mod L\n    if (!Fn.isValid(s)) throw new Error('sign failed: invalid s'); // 0 <= s < L\n    const rs = concatBytes(R, Fn.toBytes(s));\n    return abytes(rs, lengths.signature, 'result');\n  }\n\n  // verification rule is either zip215 or rfc8032 / nist186-5. Consult fromHex:\n  const verifyOpts: { context?: Hex; zip215?: boolean } = { zip215: true };\n\n  /**\n   * Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\n   * An extended group equation is checked.\n   */\n  function verify(sig: Hex, msg: Hex, publicKey: Hex, options = verifyOpts): boolean {\n    const { context, zip215 } = options;\n    const len = lengths.signature;\n    sig = ensureBytes('signature', sig, len);\n    msg = ensureBytes('message', msg);\n    publicKey = ensureBytes('publicKey', publicKey, lengths.publicKey);\n    if (zip215 !== undefined) abool(zip215, 'zip215');\n    if (prehash) msg = prehash(msg); // for ed25519ph, etc\n\n    const mid = len / 2;\n    const r = sig.subarray(0, mid);\n    const s = bytesToNumberLE(sig.subarray(mid, len));\n    let A, R, SB;\n    try {\n      // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n      // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n      // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n      A = Point.fromBytes(publicKey, zip215);\n      R = Point.fromBytes(r, zip215);\n      SB = BASE.multiplyUnsafe(s); // 0 <= s < l is done inside\n    } catch (error) {\n      return false;\n    }\n    if (!zip215 && A.isSmallOrder()) return false; // zip215 allows public keys of small order\n\n    const k = hashDomainToScalar(context, R.toBytes(), A.toBytes(), msg);\n    const RkA = R.add(A.multiplyUnsafe(k));\n    // Extended group equation\n    // [8][S]B = [8]R + [8][k]A'\n    return RkA.subtract(SB).clearCofactor().is0();\n  }\n\n  const _size = Fp.BYTES; // 32 for ed25519, 57 for ed448\n  const lengths = {\n    secretKey: _size,\n    publicKey: _size,\n    signature: 2 * _size,\n    seed: _size,\n  };\n  function randomSecretKey(seed = randomBytes(lengths.seed)): Uint8Array {\n    return abytes(seed, lengths.seed, 'seed');\n  }\n  function keygen(seed?: Uint8Array) {\n    const secretKey = utils.randomSecretKey(seed);\n    return { secretKey, publicKey: getPublicKey(secretKey) };\n  }\n  function isValidSecretKey(key: Uint8Array): boolean {\n    return isBytes(key) && key.length === Fn.BYTES;\n  }\n  function isValidPublicKey(key: Uint8Array, zip215?: boolean): boolean {\n    try {\n      return !!Point.fromBytes(key, zip215);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  const utils = {\n    getExtendedPublicKey,\n    randomSecretKey,\n    isValidSecretKey,\n    isValidPublicKey,\n    /**\n     * Converts ed public key to x public key. Uses formula:\n     * - ed25519:\n     *   - `(u, v) = ((1+y)/(1-y), sqrt(-486664)*u/x)`\n     *   - `(x, y) = (sqrt(-486664)*u/v, (u-1)/(u+1))`\n     * - ed448:\n     *   - `(u, v) = ((y-1)/(y+1), sqrt(156324)*u/x)`\n     *   - `(x, y) = (sqrt(156324)*u/v, (1+u)/(1-u))`\n     */\n    toMontgomery(publicKey: Uint8Array): Uint8Array {\n      const { y } = Point.fromBytes(publicKey);\n      const size = lengths.publicKey;\n      const is25519 = size === 32;\n      if (!is25519 && size !== 57) throw new Error('only defined for 25519 and 448');\n      const u = is25519 ? Fp.div(_1n + y, _1n - y) : Fp.div(y - _1n, y + _1n);\n      return Fp.toBytes(u);\n    },\n\n    toMontgomerySecret(secretKey: Uint8Array): Uint8Array {\n      const size = lengths.secretKey;\n      abytes(secretKey, size);\n      const hashed = cHash(secretKey.subarray(0, size));\n      return adjustScalarBytes(hashed).subarray(0, size);\n    },\n\n    /** @deprecated */\n    randomPrivateKey: randomSecretKey,\n    /** @deprecated */\n    precompute(windowSize = 8, point: EdwardsPoint = Point.BASE): EdwardsPoint {\n      return point.precompute(windowSize, false);\n    },\n  };\n\n  return Object.freeze({\n    keygen,\n    getPublicKey,\n    sign,\n    verify,\n    utils,\n    Point,\n    lengths,\n  });\n}\n\n// TODO: remove everything below\nexport type CurveType = BasicCurve<bigint> & {\n  a: bigint; // curve param a\n  d: bigint; // curve param d\n  /** @deprecated the property will be removed in next release */\n  hash: FHash; // Hashing\n  randomBytes?: (bytesLength?: number) => Uint8Array; // CSPRNG\n  adjustScalarBytes?: (bytes: Uint8Array) => Uint8Array; // clears bits to get valid field elemtn\n  domain?: (data: Uint8Array, ctx: Uint8Array, phflag: boolean) => Uint8Array; // Used for hashing\n  uvRatio?: UVRatio; // Ratio (u/v)\n  prehash?: FHash; // RFC 8032 pre-hashing of messages to sign() / verify()\n  mapToCurve?: (scalar: bigint[]) => AffinePoint<bigint>; // for hash-to-curve standard\n};\nexport type CurveTypeWithLength = Readonly<CurveType & Partial<NLength>>;\nexport type CurveFn = {\n  /** @deprecated the property will be removed in next release */\n  CURVE: CurveType;\n  keygen: EdDSA['keygen'];\n  getPublicKey: EdDSA['getPublicKey'];\n  sign: EdDSA['sign'];\n  verify: EdDSA['verify'];\n  Point: EdwardsPointCons;\n  /** @deprecated use `Point` */\n  ExtendedPoint: EdwardsPointCons;\n  utils: EdDSA['utils'];\n  lengths: CurveLengths;\n};\nexport type EdComposed = {\n  CURVE: EdwardsOpts;\n  curveOpts: EdwardsExtraOpts;\n  hash: FHash;\n  eddsaOpts: EdDSAOpts;\n};\nfunction _eddsa_legacy_opts_to_new(c: CurveTypeWithLength): EdComposed {\n  const CURVE: EdwardsOpts = {\n    a: c.a,\n    d: c.d,\n    p: c.Fp.ORDER,\n    n: c.n,\n    h: c.h,\n    Gx: c.Gx,\n    Gy: c.Gy,\n  };\n  const Fp = c.Fp;\n  const Fn = Field(CURVE.n, c.nBitLength, true);\n  const curveOpts: EdwardsExtraOpts = { Fp, Fn, uvRatio: c.uvRatio };\n  const eddsaOpts: EdDSAOpts = {\n    randomBytes: c.randomBytes,\n    adjustScalarBytes: c.adjustScalarBytes,\n    domain: c.domain,\n    prehash: c.prehash,\n    mapToCurve: c.mapToCurve,\n  };\n  return { CURVE, curveOpts, hash: c.hash, eddsaOpts };\n}\nfunction _eddsa_new_output_to_legacy(c: CurveTypeWithLength, eddsa: EdDSA): CurveFn {\n  const Point = eddsa.Point;\n  const legacy = Object.assign({}, eddsa, {\n    ExtendedPoint: Point,\n    CURVE: c,\n    nBitLength: Point.Fn.BITS,\n    nByteLength: Point.Fn.BYTES,\n  });\n  return legacy;\n}\n// TODO: remove. Use eddsa\nexport function twistedEdwards(c: CurveTypeWithLength): CurveFn {\n  const { CURVE, curveOpts, hash, eddsaOpts } = _eddsa_legacy_opts_to_new(c);\n  const Point = edwards(CURVE, curveOpts);\n  const EDDSA = eddsa(Point, hash, eddsaOpts);\n  return _eddsa_new_output_to_legacy(c, EDDSA);\n}\n","/**\n * Montgomery curve methods. It's not really whole montgomery curve,\n * just bunch of very specific methods for X25519 / X448 from\n * [RFC 7748](https://www.rfc-editor.org/rfc/rfc7748)\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  _validateObject,\n  abytes,\n  aInRange,\n  bytesToNumberLE,\n  ensureBytes,\n  numberToBytesLE,\n  randomBytes,\n} from '../utils.ts';\nimport type { CurveLengths } from './curve.ts';\nimport { mod } from './modular.ts';\n\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\ntype Hex = string | Uint8Array;\n\nexport type CurveType = {\n  P: bigint; // finite field prime\n  type: 'x25519' | 'x448';\n  adjustScalarBytes: (bytes: Uint8Array) => Uint8Array;\n  powPminus2: (x: bigint) => bigint;\n  randomBytes?: (bytesLength?: number) => Uint8Array;\n};\n\nexport type MontgomeryECDH = {\n  scalarMult: (scalar: Hex, u: Hex) => Uint8Array;\n  scalarMultBase: (scalar: Hex) => Uint8Array;\n  getSharedSecret: (secretKeyA: Hex, publicKeyB: Hex) => Uint8Array;\n  getPublicKey: (secretKey: Hex) => Uint8Array;\n  utils: {\n    randomSecretKey: () => Uint8Array;\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: () => Uint8Array;\n  };\n  GuBytes: Uint8Array;\n  lengths: CurveLengths;\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n};\nexport type CurveFn = MontgomeryECDH;\n\nfunction validateOpts(curve: CurveType) {\n  _validateObject(curve, {\n    adjustScalarBytes: 'function',\n    powPminus2: 'function',\n  });\n  return Object.freeze({ ...curve } as const);\n}\n\nexport function montgomery(curveDef: CurveType): MontgomeryECDH {\n  const CURVE = validateOpts(curveDef);\n  const { P, type, adjustScalarBytes, powPminus2, randomBytes: rand } = CURVE;\n  const is25519 = type === 'x25519';\n  if (!is25519 && type !== 'x448') throw new Error('invalid type');\n  const randomBytes_ = rand || randomBytes;\n\n  const montgomeryBits = is25519 ? 255 : 448;\n  const fieldLen = is25519 ? 32 : 56;\n  const Gu = is25519 ? BigInt(9) : BigInt(5);\n  // RFC 7748 #5:\n  // The constant a24 is (486662 - 2) / 4 = 121665 for curve25519/X25519 and\n  // (156326 - 2) / 4 = 39081 for curve448/X448\n  // const a = is25519 ? 156326n : 486662n;\n  const a24 = is25519 ? BigInt(121665) : BigInt(39081);\n  // RFC: x25519 \"the resulting integer is of the form 2^254 plus\n  // eight times a value between 0 and 2^251 - 1 (inclusive)\"\n  // x448: \"2^447 plus four times a value between 0 and 2^445 - 1 (inclusive)\"\n  const minScalar = is25519 ? _2n ** BigInt(254) : _2n ** BigInt(447);\n  const maxAdded = is25519\n    ? BigInt(8) * _2n ** BigInt(251) - _1n\n    : BigInt(4) * _2n ** BigInt(445) - _1n;\n  const maxScalar = minScalar + maxAdded + _1n; // (inclusive)\n  const modP = (n: bigint) => mod(n, P);\n  const GuBytes = encodeU(Gu);\n  function encodeU(u: bigint): Uint8Array {\n    return numberToBytesLE(modP(u), fieldLen);\n  }\n  function decodeU(u: Hex): bigint {\n    const _u = ensureBytes('u coordinate', u, fieldLen);\n    // RFC: When receiving such an array, implementations of X25519\n    // (but not X448) MUST mask the most significant bit in the final byte.\n    if (is25519) _u[31] &= 127; // 0b0111_1111\n    // RFC: Implementations MUST accept non-canonical values and process them as\n    // if they had been reduced modulo the field prime.  The non-canonical\n    // values are 2^255 - 19 through 2^255 - 1 for X25519 and 2^448 - 2^224\n    // - 1 through 2^448 - 1 for X448.\n    return modP(bytesToNumberLE(_u));\n  }\n  function decodeScalar(scalar: Hex): bigint {\n    return bytesToNumberLE(adjustScalarBytes(ensureBytes('scalar', scalar, fieldLen)));\n  }\n  function scalarMult(scalar: Hex, u: Hex): Uint8Array {\n    const pu = montgomeryLadder(decodeU(u), decodeScalar(scalar));\n    // Some public keys are useless, of low-order. Curve author doesn't think\n    // it needs to be validated, but we do it nonetheless.\n    // https://cr.yp.to/ecdh.html#validate\n    if (pu === _0n) throw new Error('invalid private or public key received');\n    return encodeU(pu);\n  }\n  // Computes public key from private. By doing scalar multiplication of base point.\n  function scalarMultBase(scalar: Hex): Uint8Array {\n    return scalarMult(scalar, GuBytes);\n  }\n\n  // cswap from RFC7748 \"example code\"\n  function cswap(swap: bigint, x_2: bigint, x_3: bigint): { x_2: bigint; x_3: bigint } {\n    // dummy = mask(swap) AND (x_2 XOR x_3)\n    // Where mask(swap) is the all-1 or all-0 word of the same length as x_2\n    // and x_3, computed, e.g., as mask(swap) = 0 - swap.\n    const dummy = modP(swap * (x_2 - x_3));\n    x_2 = modP(x_2 - dummy); // x_2 = x_2 XOR dummy\n    x_3 = modP(x_3 + dummy); // x_3 = x_3 XOR dummy\n    return { x_2, x_3 };\n  }\n\n  /**\n   * Montgomery x-only multiplication ladder.\n   * @param pointU u coordinate (x) on Montgomery Curve 25519\n   * @param scalar by which the point would be multiplied\n   * @returns new Point on Montgomery curve\n   */\n  function montgomeryLadder(u: bigint, scalar: bigint): bigint {\n    aInRange('u', u, _0n, P);\n    aInRange('scalar', scalar, minScalar, maxScalar);\n    const k = scalar;\n    const x_1 = u;\n    let x_2 = _1n;\n    let z_2 = _0n;\n    let x_3 = u;\n    let z_3 = _1n;\n    let swap = _0n;\n    for (let t = BigInt(montgomeryBits - 1); t >= _0n; t--) {\n      const k_t = (k >> t) & _1n;\n      swap ^= k_t;\n      ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n      ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n      swap = k_t;\n\n      const A = x_2 + z_2;\n      const AA = modP(A * A);\n      const B = x_2 - z_2;\n      const BB = modP(B * B);\n      const E = AA - BB;\n      const C = x_3 + z_3;\n      const D = x_3 - z_3;\n      const DA = modP(D * A);\n      const CB = modP(C * B);\n      const dacb = DA + CB;\n      const da_cb = DA - CB;\n      x_3 = modP(dacb * dacb);\n      z_3 = modP(x_1 * modP(da_cb * da_cb));\n      x_2 = modP(AA * BB);\n      z_2 = modP(E * (AA + modP(a24 * E)));\n    }\n    ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n    ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n    const z2 = powPminus2(z_2); // `Fp.pow(x, P - _2n)` is much slower equivalent\n    return modP(x_2 * z2); // Return x_2 * (z_2^(p - 2))\n  }\n  const lengths = {\n    secretKey: fieldLen,\n    publicKey: fieldLen,\n    seed: fieldLen,\n  };\n  const randomSecretKey = (seed = randomBytes_(fieldLen)) => {\n    abytes(seed, lengths.seed);\n    return seed;\n  };\n  function keygen(seed?: Uint8Array) {\n    const secretKey = randomSecretKey(seed);\n    return { secretKey, publicKey: scalarMultBase(secretKey) };\n  }\n  const utils = {\n    randomSecretKey,\n    randomPrivateKey: randomSecretKey,\n  };\n  return {\n    keygen,\n    getSharedSecret: (secretKey: Hex, publicKey: Hex) => scalarMult(secretKey, publicKey),\n    getPublicKey: (secretKey: Hex): Uint8Array => scalarMultBase(secretKey),\n    scalarMult,\n    scalarMultBase,\n    utils,\n    GuBytes: GuBytes.slice(),\n    lengths,\n  };\n}\n","/**\n * ed25519 Twisted Edwards curve with following addons:\n * - X25519 ECDH\n * - Ristretto cofactor elimination\n * - Elligator hash-to-group / point indistinguishability\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha512 } from '@noble/hashes/sha2.js';\nimport { abytes, concatBytes, utf8ToBytes } from '@noble/hashes/utils.js';\nimport { pippenger, type AffinePoint } from './abstract/curve.ts';\nimport {\n  PrimeEdwardsPoint,\n  twistedEdwards,\n  type CurveFn,\n  type EdwardsOpts,\n  type EdwardsPoint,\n} from './abstract/edwards.ts';\nimport {\n  _DST_scalar,\n  createHasher,\n  expand_message_xmd,\n  type H2CHasher,\n  type H2CHasherBase,\n  type H2CMethod,\n  type htfBasicOpts,\n} from './abstract/hash-to-curve.ts';\nimport {\n  Field,\n  FpInvertBatch,\n  FpSqrtEven,\n  isNegativeLE,\n  mod,\n  pow2,\n  type IField,\n} from './abstract/modular.ts';\nimport { montgomery, type MontgomeryECDH as XCurveFn } from './abstract/montgomery.ts';\nimport { bytesToNumberLE, ensureBytes, equalBytes, type Hex } from './utils.ts';\n\n// prettier-ignore\nconst _0n = /* @__PURE__ */ BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _5n = BigInt(5), _8n = BigInt(8);\n\n// P = 2n**255n-19n\nconst ed25519_CURVE_p = BigInt(\n  '0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed'\n);\n\n// N = 2n**252n + 27742317777372353535851937790883648493n\n// a = Fp.create(BigInt(-1))\n// d = -121665/121666 a.k.a. Fp.neg(121665 * Fp.inv(121666))\nconst ed25519_CURVE: EdwardsOpts = /* @__PURE__ */ (() => ({\n  p: ed25519_CURVE_p,\n  n: BigInt('0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed'),\n  h: _8n,\n  a: BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec'),\n  d: BigInt('0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3'),\n  Gx: BigInt('0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a'),\n  Gy: BigInt('0x6666666666666666666666666666666666666666666666666666666666666658'),\n}))();\n\nfunction ed25519_pow_2_252_3(x: bigint) {\n  // prettier-ignore\n  const _10n = BigInt(10), _20n = BigInt(20), _40n = BigInt(40), _80n = BigInt(80);\n  const P = ed25519_CURVE_p;\n  const x2 = (x * x) % P;\n  const b2 = (x2 * x) % P; // x^3, 11\n  const b4 = (pow2(b2, _2n, P) * b2) % P; // x^15, 1111\n  const b5 = (pow2(b4, _1n, P) * x) % P; // x^31\n  const b10 = (pow2(b5, _5n, P) * b5) % P;\n  const b20 = (pow2(b10, _10n, P) * b10) % P;\n  const b40 = (pow2(b20, _20n, P) * b20) % P;\n  const b80 = (pow2(b40, _40n, P) * b40) % P;\n  const b160 = (pow2(b80, _80n, P) * b80) % P;\n  const b240 = (pow2(b160, _80n, P) * b80) % P;\n  const b250 = (pow2(b240, _10n, P) * b10) % P;\n  const pow_p_5_8 = (pow2(b250, _2n, P) * x) % P;\n  // ^ To pow to (p+3)/8, multiply it by x.\n  return { pow_p_5_8, b2 };\n}\n\nfunction adjustScalarBytes(bytes: Uint8Array): Uint8Array {\n  // Section 5: For X25519, in order to decode 32 random bytes as an integer scalar,\n  // set the three least significant bits of the first byte\n  bytes[0] &= 248; // 0b1111_1000\n  // and the most significant bit of the last to zero,\n  bytes[31] &= 127; // 0b0111_1111\n  // set the second most significant bit of the last byte to 1\n  bytes[31] |= 64; // 0b0100_0000\n  return bytes;\n}\n\n// (-1) aka (a) aka 2^((p-1)/4)\n// Fp.sqrt(Fp.neg(1))\nconst ED25519_SQRT_M1 = /* @__PURE__ */ BigInt(\n  '19681161376707505956807079304988542015446066515923890162744021073123829784752'\n);\n// sqrt(u/v)\nfunction uvRatio(u: bigint, v: bigint): { isValid: boolean; value: bigint } {\n  const P = ed25519_CURVE_p;\n  const v3 = mod(v * v * v, P); // v\n  const v7 = mod(v3 * v3 * v, P); // v\n  // (p+3)/8 and (p-5)/8\n  const pow = ed25519_pow_2_252_3(u * v7).pow_p_5_8;\n  let x = mod(u * v3 * pow, P); // (uv)(uv)^(p-5)/8\n  const vx2 = mod(v * x * x, P); // vx\n  const root1 = x; // First root candidate\n  const root2 = mod(x * ED25519_SQRT_M1, P); // Second root candidate\n  const useRoot1 = vx2 === u; // If vx = u (mod p), x is a square root\n  const useRoot2 = vx2 === mod(-u, P); // If vx = -u, set x <-- x * 2^((p-1)/4)\n  const noRoot = vx2 === mod(-u * ED25519_SQRT_M1, P); // There is no valid root, vx = -u(-1)\n  if (useRoot1) x = root1;\n  if (useRoot2 || noRoot) x = root2; // We return root2 anyway, for const-time\n  if (isNegativeLE(x, P)) x = mod(-x, P);\n  return { isValid: useRoot1 || useRoot2, value: x };\n}\n\nconst Fp = /* @__PURE__ */ (() => Field(ed25519_CURVE.p, { isLE: true }))();\nconst Fn = /* @__PURE__ */ (() => Field(ed25519_CURVE.n, { isLE: true }))();\n\nconst ed25519Defaults = /* @__PURE__ */ (() => ({\n  ...ed25519_CURVE,\n  Fp,\n  hash: sha512,\n  adjustScalarBytes,\n  // dom2\n  // Ratio of u to v. Allows us to combine inversion and square root. Uses algo from RFC8032 5.1.3.\n  // Constant-time, u/v\n  uvRatio,\n}))();\n\n/**\n * ed25519 curve with EdDSA signatures.\n * @example\n * import { ed25519 } from '@noble/curves/ed25519';\n * const { secretKey, publicKey } = ed25519.keygen();\n * const msg = new TextEncoder().encode('hello');\n * const sig = ed25519.sign(msg, priv);\n * ed25519.verify(sig, msg, pub); // Default mode: follows ZIP215\n * ed25519.verify(sig, msg, pub, { zip215: false }); // RFC8032 / FIPS 186-5\n */\nexport const ed25519: CurveFn = /* @__PURE__ */ (() => twistedEdwards(ed25519Defaults))();\n\nfunction ed25519_domain(data: Uint8Array, ctx: Uint8Array, phflag: boolean) {\n  if (ctx.length > 255) throw new Error('Context is too big');\n  return concatBytes(\n    utf8ToBytes('SigEd25519 no Ed25519 collisions'),\n    new Uint8Array([phflag ? 1 : 0, ctx.length]),\n    ctx,\n    data\n  );\n}\n\n/** Context of ed25519. Uses context for domain separation. */\nexport const ed25519ctx: CurveFn = /* @__PURE__ */ (() =>\n  twistedEdwards({\n    ...ed25519Defaults,\n    domain: ed25519_domain,\n  }))();\n\n/** Prehashed version of ed25519. Accepts already-hashed messages in sign() and verify(). */\nexport const ed25519ph: CurveFn = /* @__PURE__ */ (() =>\n  twistedEdwards(\n    Object.assign({}, ed25519Defaults, {\n      domain: ed25519_domain,\n      prehash: sha512,\n    })\n  ))();\n\n/**\n * ECDH using curve25519 aka x25519.\n * @example\n * import { x25519 } from '@noble/curves/ed25519';\n * const priv = 'a546e36bf0527c9d3b16154b82465edd62144c0ac1fc5a18506a2244ba449ac4';\n * const pub = 'e6db6867583030db3594c1a424b15f7c726624ec26b3353b10a903a6d0ab1c4c';\n * x25519.getSharedSecret(priv, pub) === x25519.scalarMult(priv, pub); // aliases\n * x25519.getPublicKey(priv) === x25519.scalarMultBase(priv);\n * x25519.getPublicKey(x25519.utils.randomSecretKey());\n */\nexport const x25519: XCurveFn = /* @__PURE__ */ (() => {\n  const P = Fp.ORDER;\n  return montgomery({\n    P,\n    type: 'x25519',\n    powPminus2: (x: bigint): bigint => {\n      // x^(p-2) aka x^(2^255-21)\n      const { pow_p_5_8, b2 } = ed25519_pow_2_252_3(x);\n      return mod(pow2(pow_p_5_8, _3n, P) * b2, P);\n    },\n    adjustScalarBytes,\n  });\n})();\n\n// Hash To Curve Elligator2 Map (NOTE: different from ristretto255 elligator)\n// NOTE: very important part is usage of FpSqrtEven for ELL2_C1_EDWARDS, since\n// SageMath returns different root first and everything falls apart\nconst ELL2_C1 = /* @__PURE__ */ (() => (ed25519_CURVE_p + _3n) / _8n)(); // 1. c1 = (q + 3) / 8       # Integer arithmetic\nconst ELL2_C2 = /* @__PURE__ */ (() => Fp.pow(_2n, ELL2_C1))(); // 2. c2 = 2^c1\nconst ELL2_C3 = /* @__PURE__ */ (() => Fp.sqrt(Fp.neg(Fp.ONE)))(); // 3. c3 = sqrt(-1)\n\n// prettier-ignore\nfunction map_to_curve_elligator2_curve25519(u: bigint) {\n  const ELL2_C4 = (ed25519_CURVE_p - _5n) / _8n; // 4. c4 = (q - 5) / 8       # Integer arithmetic\n  const ELL2_J = BigInt(486662);\n\n  let tv1 = Fp.sqr(u);          //  1.  tv1 = u^2\n  tv1 = Fp.mul(tv1, _2n);       //  2.  tv1 = 2 * tv1\n  let xd = Fp.add(tv1, Fp.ONE); //  3.   xd = tv1 + 1         # Nonzero: -1 is square (mod p), tv1 is not\n  let x1n = Fp.neg(ELL2_J);     //  4.  x1n = -J              # x1 = x1n / xd = -J / (1 + 2 * u^2)\n  let tv2 = Fp.sqr(xd);         //  5.  tv2 = xd^2\n  let gxd = Fp.mul(tv2, xd);    //  6.  gxd = tv2 * xd        # gxd = xd^3\n  let gx1 = Fp.mul(tv1, ELL2_J);//  7.  gx1 = J * tv1         # x1n + J * xd\n  gx1 = Fp.mul(gx1, x1n);       //  8.  gx1 = gx1 * x1n       # x1n^2 + J * x1n * xd\n  gx1 = Fp.add(gx1, tv2);       //  9.  gx1 = gx1 + tv2       # x1n^2 + J * x1n * xd + xd^2\n  gx1 = Fp.mul(gx1, x1n);       //  10. gx1 = gx1 * x1n       # x1n^3 + J * x1n^2 * xd + x1n * xd^2\n  let tv3 = Fp.sqr(gxd);        //  11. tv3 = gxd^2\n  tv2 = Fp.sqr(tv3);            //  12. tv2 = tv3^2           # gxd^4\n  tv3 = Fp.mul(tv3, gxd);       //  13. tv3 = tv3 * gxd       # gxd^3\n  tv3 = Fp.mul(tv3, gx1);       //  14. tv3 = tv3 * gx1       # gx1 * gxd^3\n  tv2 = Fp.mul(tv2, tv3);       //  15. tv2 = tv2 * tv3       # gx1 * gxd^7\n  let y11 = Fp.pow(tv2, ELL2_C4); //  16. y11 = tv2^c4        # (gx1 * gxd^7)^((p - 5) / 8)\n  y11 = Fp.mul(y11, tv3);       //  17. y11 = y11 * tv3       # gx1*gxd^3*(gx1*gxd^7)^((p-5)/8)\n  let y12 = Fp.mul(y11, ELL2_C3); //  18. y12 = y11 * c3\n  tv2 = Fp.sqr(y11);            //  19. tv2 = y11^2\n  tv2 = Fp.mul(tv2, gxd);       //  20. tv2 = tv2 * gxd\n  let e1 = Fp.eql(tv2, gx1);    //  21.  e1 = tv2 == gx1\n  let y1 = Fp.cmov(y12, y11, e1); //  22.  y1 = CMOV(y12, y11, e1)  # If g(x1) is square, this is its sqrt\n  let x2n = Fp.mul(x1n, tv1);   //  23. x2n = x1n * tv1       # x2 = x2n / xd = 2 * u^2 * x1n / xd\n  let y21 = Fp.mul(y11, u);     //  24. y21 = y11 * u\n  y21 = Fp.mul(y21, ELL2_C2);   //  25. y21 = y21 * c2\n  let y22 = Fp.mul(y21, ELL2_C3); //  26. y22 = y21 * c3\n  let gx2 = Fp.mul(gx1, tv1);   //  27. gx2 = gx1 * tv1       # g(x2) = gx2 / gxd = 2 * u^2 * g(x1)\n  tv2 = Fp.sqr(y21);            //  28. tv2 = y21^2\n  tv2 = Fp.mul(tv2, gxd);       //  29. tv2 = tv2 * gxd\n  let e2 = Fp.eql(tv2, gx2);    //  30.  e2 = tv2 == gx2\n  let y2 = Fp.cmov(y22, y21, e2); //  31.  y2 = CMOV(y22, y21, e2)  # If g(x2) is square, this is its sqrt\n  tv2 = Fp.sqr(y1);             //  32. tv2 = y1^2\n  tv2 = Fp.mul(tv2, gxd);       //  33. tv2 = tv2 * gxd\n  let e3 = Fp.eql(tv2, gx1);    //  34.  e3 = tv2 == gx1\n  let xn = Fp.cmov(x2n, x1n, e3); //  35.  xn = CMOV(x2n, x1n, e3)  # If e3, x = x1, else x = x2\n  let y = Fp.cmov(y2, y1, e3);  //  36.   y = CMOV(y2, y1, e3)    # If e3, y = y1, else y = y2\n  let e4 = Fp.isOdd!(y);         //  37.  e4 = sgn0(y) == 1        # Fix sign of y\n  y = Fp.cmov(y, Fp.neg(y), e3 !== e4); //  38.   y = CMOV(y, -y, e3 XOR e4)\n  return { xMn: xn, xMd: xd, yMn: y, yMd: _1n }; //  39. return (xn, xd, y, 1)\n}\n\nconst ELL2_C1_EDWARDS = /* @__PURE__ */ (() => FpSqrtEven(Fp, Fp.neg(BigInt(486664))))(); // sgn0(c1) MUST equal 0\nfunction map_to_curve_elligator2_edwards25519(u: bigint) {\n  const { xMn, xMd, yMn, yMd } = map_to_curve_elligator2_curve25519(u); //  1.  (xMn, xMd, yMn, yMd) =\n  // map_to_curve_elligator2_curve25519(u)\n  let xn = Fp.mul(xMn, yMd); //  2.  xn = xMn * yMd\n  xn = Fp.mul(xn, ELL2_C1_EDWARDS); //  3.  xn = xn * c1\n  let xd = Fp.mul(xMd, yMn); //  4.  xd = xMd * yMn    # xn / xd = c1 * xM / yM\n  let yn = Fp.sub(xMn, xMd); //  5.  yn = xMn - xMd\n  let yd = Fp.add(xMn, xMd); //  6.  yd = xMn + xMd    # (n / d - 1) / (n / d + 1) = (n - d) / (n + d)\n  let tv1 = Fp.mul(xd, yd); //  7. tv1 = xd * yd\n  let e = Fp.eql(tv1, Fp.ZERO); //  8.   e = tv1 == 0\n  xn = Fp.cmov(xn, Fp.ZERO, e); //  9.  xn = CMOV(xn, 0, e)\n  xd = Fp.cmov(xd, Fp.ONE, e); //  10. xd = CMOV(xd, 1, e)\n  yn = Fp.cmov(yn, Fp.ONE, e); //  11. yn = CMOV(yn, 1, e)\n  yd = Fp.cmov(yd, Fp.ONE, e); //  12. yd = CMOV(yd, 1, e)\n  const [xd_inv, yd_inv] = FpInvertBatch(Fp, [xd, yd], true); // batch division\n  return { x: Fp.mul(xn, xd_inv), y: Fp.mul(yn, yd_inv) }; //  13. return (xn, xd, yn, yd)\n}\n\n/** Hashing to ed25519 points / field. RFC 9380 methods. */\nexport const ed25519_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() =>\n  createHasher(\n    ed25519.Point,\n    (scalars: bigint[]) => map_to_curve_elligator2_edwards25519(scalars[0]),\n    {\n      DST: 'edwards25519_XMD:SHA-512_ELL2_RO_',\n      encodeDST: 'edwards25519_XMD:SHA-512_ELL2_NU_',\n      p: ed25519_CURVE_p,\n      m: 1,\n      k: 128,\n      expand: 'xmd',\n      hash: sha512,\n    }\n  ))();\n\n// (-1) aka (a) aka 2^((p-1)/4)\nconst SQRT_M1 = ED25519_SQRT_M1;\n// (ad - 1)\nconst SQRT_AD_MINUS_ONE = /* @__PURE__ */ BigInt(\n  '25063068953384623474111414158702152701244531502492656460079210482610430750235'\n);\n// 1 / (a-d)\nconst INVSQRT_A_MINUS_D = /* @__PURE__ */ BigInt(\n  '54469307008909316920995813868745141605393597292927456921205312896311721017578'\n);\n// 1-d\nconst ONE_MINUS_D_SQ = /* @__PURE__ */ BigInt(\n  '1159843021668779879193775521855586647937357759715417654439879720876111806838'\n);\n// (d-1)\nconst D_MINUS_ONE_SQ = /* @__PURE__ */ BigInt(\n  '40440834346308536858101042469323190826248399146238708352240133220865137265952'\n);\n// Calculates 1/(number)\nconst invertSqrt = (number: bigint) => uvRatio(_1n, number);\n\nconst MAX_255B = /* @__PURE__ */ BigInt(\n  '0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\n);\nconst bytes255ToNumberLE = (bytes: Uint8Array) =>\n  ed25519.Point.Fp.create(bytesToNumberLE(bytes) & MAX_255B);\n\ntype ExtendedPoint = EdwardsPoint;\n\n/**\n * Computes Elligator map for Ristretto255.\n * Described in [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#appendix-B) and on\n * the [website](https://ristretto.group/formulas/elligator.html).\n */\nfunction calcElligatorRistrettoMap(r0: bigint): ExtendedPoint {\n  const { d } = ed25519_CURVE;\n  const P = ed25519_CURVE_p;\n  const mod = (n: bigint) => Fp.create(n);\n  const r = mod(SQRT_M1 * r0 * r0); // 1\n  const Ns = mod((r + _1n) * ONE_MINUS_D_SQ); // 2\n  let c = BigInt(-1); // 3\n  const D = mod((c - d * r) * mod(r + d)); // 4\n  let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D); // 5\n  let s_ = mod(s * r0); // 6\n  if (!isNegativeLE(s_, P)) s_ = mod(-s_);\n  if (!Ns_D_is_sq) s = s_; // 7\n  if (!Ns_D_is_sq) c = r; // 8\n  const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D); // 9\n  const s2 = s * s;\n  const W0 = mod((s + s) * D); // 10\n  const W1 = mod(Nt * SQRT_AD_MINUS_ONE); // 11\n  const W2 = mod(_1n - s2); // 12\n  const W3 = mod(_1n + s2); // 13\n  return new ed25519.Point(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n}\n\nfunction ristretto255_map(bytes: Uint8Array): _RistrettoPoint {\n  abytes(bytes, 64);\n  const r1 = bytes255ToNumberLE(bytes.subarray(0, 32));\n  const R1 = calcElligatorRistrettoMap(r1);\n  const r2 = bytes255ToNumberLE(bytes.subarray(32, 64));\n  const R2 = calcElligatorRistrettoMap(r2);\n  return new _RistrettoPoint(R1.add(R2));\n}\n\n/**\n * Wrapper over Edwards Point for ristretto255.\n *\n * Each ed25519/ExtendedPoint has 8 different equivalent points. This can be\n * a source of bugs for protocols like ring signatures. Ristretto was created to solve this.\n * Ristretto point operates in X:Y:Z:T extended coordinates like ExtendedPoint,\n * but it should work in its own namespace: do not combine those two.\n * See [RFC9496](https://www.rfc-editor.org/rfc/rfc9496).\n */\nclass _RistrettoPoint extends PrimeEdwardsPoint<_RistrettoPoint> {\n  // Do NOT change syntax: the following gymnastics is done,\n  // because typescript strips comments, which makes bundlers disable tree-shaking.\n  // prettier-ignore\n  static BASE: _RistrettoPoint =\n    /* @__PURE__ */ (() => new _RistrettoPoint(ed25519.Point.BASE))();\n  // prettier-ignore\n  static ZERO: _RistrettoPoint =\n    /* @__PURE__ */ (() => new _RistrettoPoint(ed25519.Point.ZERO))();\n  // prettier-ignore\n  static Fp: IField<bigint> =\n    /* @__PURE__ */ (() => Fp)();\n  // prettier-ignore\n  static Fn: IField<bigint> =\n    /* @__PURE__ */ (() => Fn)();\n\n  constructor(ep: ExtendedPoint) {\n    super(ep);\n  }\n\n  static fromAffine(ap: AffinePoint<bigint>): _RistrettoPoint {\n    return new _RistrettoPoint(ed25519.Point.fromAffine(ap));\n  }\n\n  protected assertSame(other: _RistrettoPoint): void {\n    if (!(other instanceof _RistrettoPoint)) throw new Error('RistrettoPoint expected');\n  }\n\n  protected init(ep: EdwardsPoint): _RistrettoPoint {\n    return new _RistrettoPoint(ep);\n  }\n\n  /** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\n  static hashToCurve(hex: Hex): _RistrettoPoint {\n    return ristretto255_map(ensureBytes('ristrettoHash', hex, 64));\n  }\n\n  static fromBytes(bytes: Uint8Array): _RistrettoPoint {\n    abytes(bytes, 32);\n    const { a, d } = ed25519_CURVE;\n    const P = ed25519_CURVE_p;\n    const mod = (n: bigint) => Fp.create(n);\n    const s = bytes255ToNumberLE(bytes);\n    // 1. Check that s_bytes is the canonical encoding of a field element, or else abort.\n    // 3. Check that s is non-negative, or else abort\n    if (!equalBytes(Fp.toBytes(s), bytes) || isNegativeLE(s, P))\n      throw new Error('invalid ristretto255 encoding 1');\n    const s2 = mod(s * s);\n    const u1 = mod(_1n + a * s2); // 4 (a is -1)\n    const u2 = mod(_1n - a * s2); // 5\n    const u1_2 = mod(u1 * u1);\n    const u2_2 = mod(u2 * u2);\n    const v = mod(a * d * u1_2 - u2_2); // 6\n    const { isValid, value: I } = invertSqrt(mod(v * u2_2)); // 7\n    const Dx = mod(I * u2); // 8\n    const Dy = mod(I * Dx * v); // 9\n    let x = mod((s + s) * Dx); // 10\n    if (isNegativeLE(x, P)) x = mod(-x); // 10\n    const y = mod(u1 * Dy); // 11\n    const t = mod(x * y); // 12\n    if (!isValid || isNegativeLE(t, P) || y === _0n)\n      throw new Error('invalid ristretto255 encoding 2');\n    return new _RistrettoPoint(new ed25519.Point(x, y, _1n, t));\n  }\n\n  /**\n   * Converts ristretto-encoded string to ristretto point.\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-decode).\n   * @param hex Ristretto-encoded 32 bytes. Not every 32-byte string is valid ristretto encoding\n   */\n  static fromHex(hex: Hex): _RistrettoPoint {\n    return _RistrettoPoint.fromBytes(ensureBytes('ristrettoHex', hex, 32));\n  }\n\n  static msm(points: _RistrettoPoint[], scalars: bigint[]): _RistrettoPoint {\n    return pippenger(_RistrettoPoint, ed25519.Point.Fn, points, scalars);\n  }\n\n  /**\n   * Encodes ristretto point to Uint8Array.\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-encode).\n   */\n  toBytes(): Uint8Array {\n    let { X, Y, Z, T } = this.ep;\n    const P = ed25519_CURVE_p;\n    const mod = (n: bigint) => Fp.create(n);\n    const u1 = mod(mod(Z + Y) * mod(Z - Y)); // 1\n    const u2 = mod(X * Y); // 2\n    // Square root always exists\n    const u2sq = mod(u2 * u2);\n    const { value: invsqrt } = invertSqrt(mod(u1 * u2sq)); // 3\n    const D1 = mod(invsqrt * u1); // 4\n    const D2 = mod(invsqrt * u2); // 5\n    const zInv = mod(D1 * D2 * T); // 6\n    let D: bigint; // 7\n    if (isNegativeLE(T * zInv, P)) {\n      let _x = mod(Y * SQRT_M1);\n      let _y = mod(X * SQRT_M1);\n      X = _x;\n      Y = _y;\n      D = mod(D1 * INVSQRT_A_MINUS_D);\n    } else {\n      D = D2; // 8\n    }\n    if (isNegativeLE(X * zInv, P)) Y = mod(-Y); // 9\n    let s = mod((Z - Y) * D); // 10 (check footer's note, no sqrt(-a))\n    if (isNegativeLE(s, P)) s = mod(-s);\n    return Fp.toBytes(s); // 11\n  }\n\n  /**\n   * Compares two Ristretto points.\n   * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-equals).\n   */\n  equals(other: _RistrettoPoint): boolean {\n    this.assertSame(other);\n    const { X: X1, Y: Y1 } = this.ep;\n    const { X: X2, Y: Y2 } = other.ep;\n    const mod = (n: bigint) => Fp.create(n);\n    // (x1 * y2 == y1 * x2) | (y1 * y2 == x1 * x2)\n    const one = mod(X1 * Y2) === mod(Y1 * X2);\n    const two = mod(Y1 * Y2) === mod(X1 * X2);\n    return one || two;\n  }\n\n  is0(): boolean {\n    return this.equals(_RistrettoPoint.ZERO);\n  }\n}\n\nexport const ristretto255: {\n  Point: typeof _RistrettoPoint;\n} = { Point: _RistrettoPoint };\n\n/** Hashing to ristretto255 points / field. RFC 9380 methods. */\nexport const ristretto255_hasher: H2CHasherBase<bigint> = {\n  hashToCurve(msg: Uint8Array, options?: htfBasicOpts): _RistrettoPoint {\n    const DST = options?.DST || 'ristretto255_XMD:SHA-512_R255MAP_RO_';\n    const xmd = expand_message_xmd(msg, DST, 64, sha512);\n    return ristretto255_map(xmd);\n  },\n  hashToScalar(msg: Uint8Array, options: htfBasicOpts = { DST: _DST_scalar }) {\n    const xmd = expand_message_xmd(msg, options.DST, 64, sha512);\n    return Fn.create(bytesToNumberLE(xmd));\n  },\n};\n\n// export const ristretto255_oprf: OPRF = createORPF({\n//   name: 'ristretto255-SHA512',\n//   Point: RistrettoPoint,\n//   hash: sha512,\n//   hashToGroup: ristretto255_hasher.hashToCurve,\n//   hashToScalar: ristretto255_hasher.hashToScalar,\n// });\n\n/**\n * Weird / bogus points, useful for debugging.\n * All 8 ed25519 points of 8-torsion subgroup can be generated from the point\n * T = `26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05`.\n * T = { O, T, 2T, 3T, 4T, 5T, 6T, 7T }\n */\nexport const ED25519_TORSION_SUBGROUP: string[] = [\n  '0100000000000000000000000000000000000000000000000000000000000000',\n  'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n  '0000000000000000000000000000000000000000000000000000000000000080',\n  '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n  'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n  '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n];\n\n/** @deprecated use `ed25519.utils.toMontgomery` */\nexport function edwardsToMontgomeryPub(edwardsPub: Hex): Uint8Array {\n  return ed25519.utils.toMontgomery(ensureBytes('pub', edwardsPub));\n}\n/** @deprecated use `ed25519.utils.toMontgomery` */\nexport const edwardsToMontgomery: typeof edwardsToMontgomeryPub = edwardsToMontgomeryPub;\n\n/** @deprecated use `ed25519.utils.toMontgomerySecret` */\nexport function edwardsToMontgomeryPriv(edwardsPriv: Uint8Array): Uint8Array {\n  return ed25519.utils.toMontgomerySecret(ensureBytes('pub', edwardsPriv));\n}\n\n/** @deprecated use `ristretto255.Point` */\nexport const RistrettoPoint: typeof _RistrettoPoint = _RistrettoPoint;\n/** @deprecated use `import { ed25519_hasher } from '@noble/curves/ed25519.js';` */\nexport const hashToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() => ed25519_hasher.hashToCurve)();\n/** @deprecated use `import { ed25519_hasher } from '@noble/curves/ed25519.js';` */\nexport const encodeToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\n  ed25519_hasher.encodeToCurve)();\ntype RistHasher = (msg: Uint8Array, options: htfBasicOpts) => _RistrettoPoint;\n/** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\nexport const hashToRistretto255: RistHasher = /* @__PURE__ */ (() =>\n  ristretto255_hasher.hashToCurve as RistHasher)();\n/** @deprecated use `import { ristretto255_hasher } from '@noble/curves/ed25519.js';` */\nexport const hash_to_ristretto255: RistHasher = /* @__PURE__ */ (() =>\n  ristretto255_hasher.hashToCurve as RistHasher)();\n","import { ed25519 as nobleEd25519 } from '@noble/curves/ed25519'\nimport { bytesToHex } from '@xrplf/isomorphic/utils'\n\nimport type { HexString, SigningScheme } from '../../types'\nimport assert from '../../utils/assert'\nimport Sha512 from '../../utils/Sha512'\n\nconst ED_PREFIX = 'ED'\n\nconst ed25519: SigningScheme = {\n  deriveKeypair(entropy: Uint8Array): {\n    privateKey: string\n    publicKey: string\n  } {\n    const rawPrivateKey = Sha512.half(entropy)\n    const privateKey = ED_PREFIX + bytesToHex(rawPrivateKey)\n    const publicKey =\n      ED_PREFIX + bytesToHex(nobleEd25519.getPublicKey(rawPrivateKey))\n    return { privateKey, publicKey }\n  },\n\n  sign(message: Uint8Array, privateKey: HexString): string {\n    assert.ok(message instanceof Uint8Array, 'message must be array of octets')\n    assert.ok(\n      privateKey.length === 66,\n      'private key must be 33 bytes including prefix',\n    )\n    return bytesToHex(nobleEd25519.sign(message, privateKey.slice(2)))\n  },\n\n  verify(\n    message: Uint8Array,\n    signature: HexString,\n    publicKey: string,\n  ): boolean {\n    // Unlikely to be triggered as these are internal and guarded by getAlgorithmFromKey\n    assert.ok(\n      publicKey.length === 66,\n      'public key must be 33 bytes including prefix',\n    )\n    return nobleEd25519.verify(\n      signature,\n      message,\n      // Remove the 0xED prefix\n      publicKey.slice(2),\n      // By default, set zip215 to false for compatibility reasons.\n      // ZIP 215 is a stricter Ed25519 signature verification scheme.\n      // However, setting it to false adheres to the more commonly used\n      // RFC8032 / NIST186-5 standards, making it compatible with systems\n      // like the XRP Ledger.\n      { zip215: false },\n    )\n  },\n}\n\nexport default ed25519\n","import {\n  decodeNodePublic,\n  decodeSeed,\n  encodeAccountID,\n  encodeSeed,\n} from 'ripple-address-codec'\nimport { ripemd160 } from '@xrplf/isomorphic/ripemd160'\nimport { sha256 } from '@xrplf/isomorphic/sha256'\nimport { hexToBytes, randomBytes } from '@xrplf/isomorphic/utils'\n\nimport { accountPublicFromPublicGenerator } from './signing-schemes/secp256k1/utils'\nimport Sha512 from './utils/Sha512'\nimport assert from './utils/assert'\nimport type { Algorithm, HexString, KeyPair, SigningScheme } from './types'\nimport {\n  getAlgorithmFromPrivateKey,\n  getAlgorithmFromPublicKey,\n} from './utils/getAlgorithmFromKey'\n\nimport secp256k1 from './signing-schemes/secp256k1'\nimport ed25519 from './signing-schemes/ed25519'\n\nfunction getSigningScheme(algorithm: Algorithm): SigningScheme {\n  const schemes = { 'ecdsa-secp256k1': secp256k1, ed25519 }\n  return schemes[algorithm]\n}\n\nfunction generateSeed(\n  options: {\n    entropy?: Uint8Array\n    algorithm?: Algorithm\n  } = {},\n): string {\n  assert.ok(\n    !options.entropy || options.entropy.length >= 16,\n    'entropy too short',\n  )\n  const entropy = options.entropy\n    ? options.entropy.slice(0, 16)\n    : randomBytes(16)\n  const type = options.algorithm === 'ed25519' ? 'ed25519' : 'secp256k1'\n  return encodeSeed(entropy, type)\n}\n\nfunction deriveKeypair(\n  seed: string,\n  options?: {\n    algorithm?: Algorithm\n    validator?: boolean\n    accountIndex?: number\n  },\n): KeyPair {\n  const decoded = decodeSeed(seed)\n  const proposedAlgorithm = options?.algorithm ?? decoded.type\n  const algorithm =\n    proposedAlgorithm === 'ed25519' ? 'ed25519' : 'ecdsa-secp256k1'\n  const scheme = getSigningScheme(algorithm)\n  const keypair = scheme.deriveKeypair(decoded.bytes, options)\n  const messageToVerify = Sha512.half('This test message should verify.')\n  const signature = scheme.sign(messageToVerify, keypair.privateKey)\n  /* istanbul ignore if */\n  if (!scheme.verify(messageToVerify, signature, keypair.publicKey)) {\n    throw new Error('derived keypair did not generate verifiable signature')\n  }\n  return keypair\n}\n\nfunction sign(messageHex: HexString, privateKey: HexString): HexString {\n  const algorithm = getAlgorithmFromPrivateKey(privateKey)\n  return getSigningScheme(algorithm).sign(hexToBytes(messageHex), privateKey)\n}\n\nfunction verify(\n  messageHex: HexString,\n  signature: HexString,\n  publicKey: HexString,\n): boolean {\n  const algorithm = getAlgorithmFromPublicKey(publicKey)\n  return getSigningScheme(algorithm).verify(\n    hexToBytes(messageHex),\n    signature,\n    publicKey,\n  )\n}\n\nfunction computePublicKeyHash(publicKeyBytes: Uint8Array): Uint8Array {\n  return ripemd160(sha256(publicKeyBytes))\n}\n\nfunction deriveAddressFromBytes(publicKeyBytes: Uint8Array): string {\n  return encodeAccountID(computePublicKeyHash(publicKeyBytes))\n}\n\nfunction deriveAddress(publicKey: string): string {\n  return deriveAddressFromBytes(hexToBytes(publicKey))\n}\n\nfunction deriveNodeAddress(publicKey: string): string {\n  const generatorBytes = decodeNodePublic(publicKey)\n  const accountPublicBytes = accountPublicFromPublicGenerator(generatorBytes)\n  return deriveAddressFromBytes(accountPublicBytes)\n}\n\nexport {\n  generateSeed,\n  deriveKeypair,\n  sign,\n  verify,\n  deriveAddress,\n  deriveNodeAddress,\n  decodeSeed,\n}\n","/**\n * Hash Chain Implementation for Audit Logging\n *\n * Implements HMAC-SHA256 hash chain for tamper-evident audit logs.\n * Formula: hash(N) = HMAC-SHA256(data_N || prev_hash)\n *\n * @module audit/chain\n * @version 1.0.0\n * @since 2026-01-28\n */\n\nimport { createHmac } from 'crypto';\nimport { z } from 'zod';\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\n/**\n * Genesis constant used to compute the starting hash of a new chain\n */\nconst GENESIS_CONSTANT = 'XRPL-WALLET-MCP-GENESIS-V1';\n\n/**\n * HMAC algorithm used for hash chain\n */\nconst HMAC_ALGORITHM = 'sha256';\n\n/**\n * Required HMAC key length in bytes (256 bits)\n */\nconst HMAC_KEY_LENGTH = 32;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Current state of the hash chain\n */\nexport interface ChainState {\n  /** Current sequence number (0 if no entries) */\n  sequence: number;\n\n  /** Hash of the previous entry (or genesis hash if sequence is 0) */\n  previousHash: string;\n}\n\n/**\n * Error types that can occur during chain verification\n */\nexport type ChainErrorType =\n  | 'sequence_gap'\n  | 'chain_break'\n  | 'tampered_entry'\n  | 'invalid_timestamp';\n\n/**\n * Represents an error found during chain verification\n */\nexport interface ChainError {\n  /** Type of error detected */\n  type: ChainErrorType;\n\n  /** Sequence number where error was detected */\n  sequence: number;\n\n  /** Expected value */\n  expected: string | number;\n\n  /** Actual value found */\n  actual: string | number;\n\n  /** Human-readable description */\n  description: string;\n}\n\n/**\n * Result of chain verification\n */\nexport interface ChainVerificationResult {\n  /** Whether the chain is valid */\n  valid: boolean;\n\n  /** Number of entries verified */\n  entriesVerified: number;\n\n  /** First sequence number verified */\n  startSequence: number;\n\n  /** Last sequence number verified */\n  endSequence: number;\n\n  /** Verification duration in milliseconds */\n  durationMs: number;\n\n  /** List of detected errors */\n  errors: ChainError[];\n}\n\n/**\n * Options for chain verification\n */\nexport interface VerificationOptions {\n  /** Verify entire chain from genesis */\n  fullChain?: boolean;\n\n  /** Start sequence for range verification */\n  startSequence?: number;\n\n  /** End sequence for range verification */\n  endSequence?: number;\n\n  /** Number of recent entries to verify (default: 1000) */\n  recentEntries?: number;\n\n  /** Continue verification after finding errors */\n  continueOnError?: boolean;\n}\n\n/**\n * Data structure that can be hashed (must be JSON serializable)\n */\nexport interface HashableEntry {\n  /** Sequence number */\n  sequence: number;\n\n  /** Entry timestamp */\n  timestamp: string;\n\n  /** Hash of previous entry */\n  previousHash: string;\n\n  /** This entry's hash (excluded from hash computation) */\n  hash: string;\n\n  /** Any additional data */\n  [key: string]: unknown;\n}\n\n// ============================================================================\n// SCHEMAS\n// ============================================================================\n\n/**\n * Schema for HMAC key validation\n */\nexport const HmacKeySchema = z\n  .instanceof(Buffer)\n  .refine(\n    (buf) => buf.length === HMAC_KEY_LENGTH,\n    `HMAC key must be exactly ${HMAC_KEY_LENGTH} bytes (${HMAC_KEY_LENGTH * 8} bits)`\n  );\n\n/**\n * Schema for chain state\n */\nexport const ChainStateSchema = z.object({\n  sequence: z.number().int().min(0),\n  previousHash: z.string().length(64).regex(/^[a-f0-9]{64}$/i),\n});\n\n/**\n * Schema for verification options\n */\nexport const VerificationOptionsSchema = z.object({\n  fullChain: z.boolean().optional(),\n  startSequence: z.number().int().positive().optional(),\n  endSequence: z.number().int().positive().optional(),\n  recentEntries: z.number().int().positive().optional(),\n  continueOnError: z.boolean().optional(),\n});\n\n// ============================================================================\n// HASH CHAIN CLASS\n// ============================================================================\n\n/**\n * HashChain - Manages HMAC-SHA256 hash chain for tamper-evident logging\n *\n * The hash chain provides:\n * - Tamper detection: Any modification breaks the chain\n * - Deletion detection: Sequence gaps reveal deleted entries\n * - Cryptographic proof: HMAC-SHA256 provides strong integrity guarantee\n *\n * @example\n * ```typescript\n * const hmacKey = crypto.randomBytes(32);\n * const chain = new HashChain(hmacKey);\n *\n * const entry = chain.createEntry({ event: 'test', data: 'value' });\n * console.log(entry.hash); // HMAC-SHA256 hash\n *\n * // Later, verify entries\n * const result = chain.verifyEntries(entries);\n * if (!result.valid) {\n *   console.error('Chain tampering detected!', result.errors);\n * }\n * ```\n */\nexport class HashChain {\n  private readonly hmacKey: Buffer;\n  private state: ChainState;\n\n  /**\n   * Create a new HashChain instance\n   *\n   * @param hmacKey - 256-bit HMAC key (32 bytes)\n   * @param initialState - Optional initial chain state (for resuming)\n   * @throws Error if HMAC key is invalid\n   */\n  constructor(hmacKey: Buffer, initialState?: ChainState) {\n    // Validate HMAC key\n    const keyResult = HmacKeySchema.safeParse(hmacKey);\n    if (!keyResult.success) {\n      throw new Error(`Invalid HMAC key: ${keyResult.error.message}`);\n    }\n\n    this.hmacKey = Buffer.from(hmacKey); // Create defensive copy\n    this.state = initialState ?? {\n      sequence: 0,\n      previousHash: this.computeGenesisHash(),\n    };\n  }\n\n  /**\n   * Compute the genesis hash for a new chain\n   *\n   * The genesis hash is a well-known constant computed from the\n   * GENESIS_CONSTANT using the HMAC key. This provides a verifiable\n   * starting point for the chain.\n   *\n   * @returns Hex-encoded genesis hash\n   */\n  computeGenesisHash(): string {\n    const hmac = createHmac(HMAC_ALGORITHM, this.hmacKey);\n    hmac.update(GENESIS_CONSTANT);\n    return hmac.digest('hex');\n  }\n\n  /**\n   * Compute HMAC-SHA256 hash of entry data\n   *\n   * The hash includes all fields except 'hash' itself. Fields are\n   * sorted alphabetically for deterministic serialization.\n   *\n   * @param data - Entry data (hash field will be ignored)\n   * @returns Hex-encoded HMAC-SHA256 hash\n   */\n  computeHash(data: Record<string, unknown>): string {\n    // Create copy without hash field for hashing\n    const dataForHashing: Record<string, unknown> = {};\n    for (const key of Object.keys(data).sort()) {\n      if (key !== 'hash') {\n        dataForHashing[key] = data[key];\n      }\n    }\n\n    // Serialize with sorted keys for determinism\n    const serialized = JSON.stringify(dataForHashing, Object.keys(dataForHashing).sort());\n\n    // Compute HMAC\n    const hmac = createHmac(HMAC_ALGORITHM, this.hmacKey);\n    hmac.update(serialized);\n    return hmac.digest('hex');\n  }\n\n  /**\n   * Get the current chain state\n   *\n   * @returns Current sequence number and previous hash\n   */\n  getState(): ChainState {\n    return { ...this.state };\n  }\n\n  /**\n   * Set the chain state (for resuming from storage)\n   *\n   * @param state - Chain state to restore\n   */\n  setState(state: ChainState): void {\n    const result = ChainStateSchema.safeParse(state);\n    if (!result.success) {\n      throw new Error(`Invalid chain state: ${result.error.message}`);\n    }\n    this.state = { ...state };\n  }\n\n  /**\n   * Create the next entry in the chain\n   *\n   * Adds integrity fields (sequence, timestamp, previousHash, hash)\n   * to the provided data and updates the chain state.\n   *\n   * @param data - Entry data (without integrity fields)\n   * @returns Complete entry with hash chain fields\n   */\n  createEntry<T extends Record<string, unknown>>(data: T): T & HashableEntry {\n    const sequence = this.state.sequence + 1;\n    const timestamp = new Date().toISOString();\n    const previousHash = this.state.previousHash;\n\n    // Create entry with all fields\n    const entry = {\n      ...data,\n      sequence,\n      timestamp,\n      previousHash,\n      hash: '',\n    } as T & HashableEntry;\n\n    // Compute and set hash\n    entry.hash = this.computeHash(entry);\n\n    // Update chain state\n    this.state = {\n      sequence,\n      previousHash: entry.hash,\n    };\n\n    return entry;\n  }\n\n  /**\n   * Verify hash integrity of a single entry\n   *\n   * @param entry - Entry to verify\n   * @param expectedPrevHash - Expected previous hash (from prior entry or genesis)\n   * @returns Array of errors found (empty if valid)\n   */\n  verifyEntry(entry: HashableEntry, expectedPrevHash?: string): ChainError[] {\n    const errors: ChainError[] = [];\n\n    // Check previous hash chain\n    if (expectedPrevHash !== undefined && entry.previousHash !== expectedPrevHash) {\n      errors.push({\n        type: 'chain_break',\n        sequence: entry.sequence,\n        expected: expectedPrevHash,\n        actual: entry.previousHash,\n        description: `Chain break: previousHash does not match prior entry's hash`,\n      });\n    }\n\n    // Verify entry hash\n    const computedHash = this.computeHash(entry);\n    if (computedHash !== entry.hash) {\n      errors.push({\n        type: 'tampered_entry',\n        sequence: entry.sequence,\n        expected: computedHash,\n        actual: entry.hash,\n        description: `Entry hash mismatch: entry may have been tampered with`,\n      });\n    }\n\n    return errors;\n  }\n\n  /**\n   * Verify a sequence of entries\n   *\n   * Checks:\n   * 1. Sequence numbers are monotonic without gaps\n   * 2. Each entry's previousHash matches prior entry's hash\n   * 3. Each entry's hash can be recomputed correctly\n   * 4. Timestamps are monotonically increasing\n   *\n   * @param entries - Array of entries to verify (must be in sequence order)\n   * @param options - Verification options\n   * @returns Verification result with any detected errors\n   */\n  verifyEntries(\n    entries: HashableEntry[],\n    options: VerificationOptions = {}\n  ): ChainVerificationResult {\n    const startTime = Date.now();\n    const errors: ChainError[] = [];\n\n    if (entries.length === 0) {\n      return {\n        valid: true,\n        entriesVerified: 0,\n        startSequence: 0,\n        endSequence: 0,\n        durationMs: Date.now() - startTime,\n        errors: [],\n      };\n    }\n\n    // Get first and last entries (safe after length check)\n    const firstEntry = entries[0]!;\n    const lastEntry = entries[entries.length - 1]!;\n\n    // Determine expected previous hash for first entry\n    let expectedPrevHash: string;\n    if (firstEntry.sequence === 1) {\n      expectedPrevHash = this.computeGenesisHash();\n    } else {\n      // For partial verification, we trust the first entry's previousHash\n      // unless we have explicit starting state\n      expectedPrevHash = firstEntry.previousHash;\n    }\n\n    let expectedSequence = firstEntry.sequence;\n    let lastTimestamp = new Date(0);\n\n    for (const entry of entries) {\n      // Check 1: Sequence continuity\n      if (entry.sequence !== expectedSequence) {\n        errors.push({\n          type: 'sequence_gap',\n          sequence: entry.sequence,\n          expected: expectedSequence,\n          actual: entry.sequence,\n          description: `Expected sequence ${expectedSequence}, got ${entry.sequence}`,\n        });\n\n        if (!options.continueOnError) {\n          // Adjust expected for subsequent checks\n          expectedSequence = entry.sequence;\n        }\n      }\n\n      // Check 2: Previous hash chain\n      if (entry.previousHash !== expectedPrevHash) {\n        errors.push({\n          type: 'chain_break',\n          sequence: entry.sequence,\n          expected: expectedPrevHash,\n          actual: entry.previousHash,\n          description: `Chain break: previousHash does not match prior entry's hash`,\n        });\n      }\n\n      // Check 3: Entry hash integrity\n      const computedHash = this.computeHash(entry);\n      if (computedHash !== entry.hash) {\n        errors.push({\n          type: 'tampered_entry',\n          sequence: entry.sequence,\n          expected: computedHash,\n          actual: entry.hash,\n          description: `Entry hash mismatch: entry may have been tampered with`,\n        });\n      }\n\n      // Check 4: Timestamp ordering\n      const entryTime = new Date(entry.timestamp);\n      if (entryTime < lastTimestamp) {\n        errors.push({\n          type: 'invalid_timestamp',\n          sequence: entry.sequence,\n          expected: lastTimestamp.toISOString(),\n          actual: entry.timestamp,\n          description: `Timestamp is earlier than previous entry`,\n        });\n      }\n      lastTimestamp = entryTime;\n\n      // Update expectations for next iteration\n      expectedPrevHash = entry.hash;\n      expectedSequence = entry.sequence + 1;\n    }\n\n    return {\n      valid: errors.length === 0,\n      entriesVerified: entries.length,\n      startSequence: firstEntry.sequence,\n      endSequence: lastEntry.sequence,\n      durationMs: Date.now() - startTime,\n      errors,\n    };\n  }\n\n  /**\n   * Verify that an entry correctly links to a previous entry\n   *\n   * @param current - Current entry to verify\n   * @param previous - Previous entry in the chain\n   * @returns True if chain link is valid\n   */\n  verifyChainLink(current: HashableEntry, previous: HashableEntry): boolean {\n    return current.previousHash === previous.hash;\n  }\n\n  /**\n   * Dispose of the hash chain and zero out the HMAC key\n   *\n   * Should be called when the chain is no longer needed to\n   * prevent key material from remaining in memory.\n   */\n  dispose(): void {\n    this.hmacKey.fill(0);\n  }\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Validate that an HMAC key meets requirements\n *\n * @param key - Buffer to validate\n * @returns True if key is valid\n */\nexport function isValidHmacKey(key: Buffer): boolean {\n  return HmacKeySchema.safeParse(key).success;\n}\n\n/**\n * Generate a cryptographically secure HMAC key\n *\n * @returns 256-bit HMAC key\n */\nexport function generateHmacKey(): Buffer {\n  // Use Node.js crypto for secure random generation\n  // This is imported at the top but we reference it dynamically\n  // to allow for easy mocking in tests\n  const crypto = require('crypto');\n  return crypto.randomBytes(HMAC_KEY_LENGTH);\n}\n\n/**\n * Compute a standalone HMAC-SHA256 hash (without chain state)\n *\n * @param key - HMAC key\n * @param data - Data to hash\n * @returns Hex-encoded hash\n */\nexport function computeStandaloneHash(key: Buffer, data: string): string {\n  const hmac = createHmac(HMAC_ALGORITHM, key);\n  hmac.update(data);\n  return hmac.digest('hex');\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport { GENESIS_CONSTANT, HMAC_ALGORITHM, HMAC_KEY_LENGTH };\n","/**\n * Audit Logger Implementation\n *\n * Tamper-evident audit logging with HMAC-SHA256 hash chains.\n * Stores logs in JSON Lines format with automatic integrity verification.\n *\n * @module audit/logger\n * @version 1.0.0\n * @since 2026-01-28\n */\n\nimport { createHmac, randomUUID } from 'crypto';\nimport { EventEmitter } from 'events';\nimport * as fs from 'fs/promises';\nimport * as path from 'path';\nimport { z } from 'zod';\nimport {\n  HashChain,\n  isValidHmacKey,\n  type ChainState,\n  type ChainVerificationResult,\n  type ChainError,\n  type VerificationOptions,\n  type HashableEntry,\n} from './chain.js';\nimport {\n  AuditEventTypeSchema,\n  AuditLogEntrySchema,\n  NetworkSchema,\n  TransactionTypeSchema,\n  type AuditEventType,\n  type AuditLogEntry,\n  type Network,\n  type TransactionType,\n} from '../schemas/index.js';\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\n/**\n * Default audit log directory relative to home\n */\nconst DEFAULT_BASE_DIR = '.xrpl-wallet-mcp';\n\n/**\n * Audit subdirectory name\n */\nconst AUDIT_SUBDIR = 'audit';\n\n/**\n * Log file prefix\n */\nconst LOG_FILE_PREFIX = 'audit-';\n\n/**\n * Log file extension (JSON Lines format)\n */\nconst LOG_FILE_EXTENSION = '.jsonl';\n\n/**\n * File permissions for audit logs (owner read/write only)\n */\nconst LOG_FILE_MODE = 0o600;\n\n/**\n * Directory permissions (owner read/write/execute only)\n */\nconst DIR_MODE = 0o700;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Severity levels for audit events\n */\nexport type AuditSeverity = 'INFO' | 'WARN' | 'ERROR' | 'CRITICAL';\n\n/**\n * Event categories for filtering and analysis\n */\nexport type EventCategory = 'security' | 'operation' | 'transaction' | 'system';\n\n/**\n * Actor types that can trigger events\n */\nexport type ActorType = 'agent' | 'system' | 'human' | 'scheduled';\n\n/**\n * Operation result status\n */\nexport type OperationResult = 'success' | 'failure' | 'denied' | 'timeout';\n\n/**\n * Input for logging an audit event (without auto-generated fields)\n */\nexport interface AuditLogInput {\n  /** Event type from schema */\n  event: AuditEventType;\n\n  /** Wallet ID (if applicable) */\n  wallet_id?: string;\n\n  /** Wallet address (if applicable) */\n  wallet_address?: string;\n\n  /** Transaction type (if applicable) */\n  transaction_type?: TransactionType;\n\n  /** Amount in XRP (if applicable) */\n  amount_xrp?: string;\n\n  /** Destination address (if applicable) */\n  destination?: string;\n\n  /** Policy tier (if applicable) */\n  tier?: 1 | 2 | 3 | 4;\n\n  /** Policy decision */\n  policy_decision?: 'allowed' | 'denied' | 'pending';\n\n  /** Transaction hash (if applicable) */\n  tx_hash?: string;\n\n  /** Context from agent */\n  context?: string;\n}\n\n/**\n * Configuration for the AuditLogger\n */\nexport interface AuditLoggerConfig {\n  /** Base directory for audit logs */\n  baseDir: string;\n\n  /** Network (determines subdirectory) */\n  network: Network;\n\n  /** Enable synchronous writes (safer but slower) */\n  syncWrites: boolean;\n\n  /** Verify chain integrity on startup */\n  verifyOnStartup: boolean;\n\n  /** Number of recent entries to verify on startup */\n  startupVerificationEntries: number;\n}\n\n/**\n * Default configuration\n */\nexport const DEFAULT_AUDIT_LOGGER_CONFIG: AuditLoggerConfig = {\n  baseDir: path.join(process.env['HOME'] || '~', DEFAULT_BASE_DIR),\n  network: 'testnet',\n  syncWrites: true,\n  verifyOnStartup: true,\n  startupVerificationEntries: 1000,\n};\n\n/**\n * Provider interface for HMAC key\n */\nexport interface IHmacKeyProvider {\n  /** Get the HMAC key for audit logging */\n  getKey(): Promise<Buffer>;\n}\n\n/**\n * Options for creating an AuditLogger\n */\nexport interface AuditLoggerOptions {\n  /** Provider for HMAC key */\n  hmacKeyProvider: IHmacKeyProvider;\n\n  /** Configuration overrides */\n  config?: Partial<AuditLoggerConfig>;\n\n  /** Callback when tampering is detected */\n  onTamperDetected?: (result: ChainVerificationResult) => Promise<void>;\n}\n\n/**\n * Query parameters for searching audit logs\n */\nexport interface AuditLogQuery {\n  /** Start date (inclusive) */\n  startDate?: Date;\n\n  /** End date (inclusive) */\n  endDate?: Date;\n\n  /** Filter by event types */\n  eventTypes?: AuditEventType[];\n\n  /** Filter by wallet ID */\n  walletId?: string;\n\n  /** Filter by wallet address */\n  walletAddress?: string;\n\n  /** Filter by transaction hash */\n  txHash?: string;\n\n  /** Maximum results to return */\n  limit?: number;\n\n  /** Sort order */\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Storage statistics\n */\nexport interface AuditStorageStats {\n  /** Total entries in current file */\n  totalEntries: number;\n\n  /** Current file size in bytes */\n  currentFileSize: number;\n\n  /** Path to current log file */\n  currentFilePath: string;\n\n  /** Oldest entry timestamp */\n  oldestEntry?: string;\n\n  /** Newest entry timestamp */\n  newestEntry?: string;\n}\n\n// ============================================================================\n// SCHEMAS\n// ============================================================================\n\n/**\n * Schema for audit log input validation\n */\nexport const AuditLogInputSchema = z.object({\n  event: AuditEventTypeSchema,\n  wallet_id: z.string().optional(),\n  wallet_address: z.string().optional(),\n  transaction_type: TransactionTypeSchema.optional(),\n  amount_xrp: z.string().optional(),\n  destination: z.string().optional(),\n  tier: z.union([z.literal(1), z.literal(2), z.literal(3), z.literal(4)]).optional(),\n  policy_decision: z.enum(['allowed', 'denied', 'pending']).optional(),\n  tx_hash: z.string().optional(),\n  context: z.string().optional(),\n});\n\n// ============================================================================\n// SENSITIVE DATA SANITIZATION\n// ============================================================================\n\n/**\n * Fields that must NEVER appear in audit logs\n */\nconst REDACTED_FIELDS = new Set([\n  'password',\n  'seed',\n  'secret',\n  'privatekey',\n  'private_key',\n  'mnemonic',\n  'passphrase',\n  'encryptionkey',\n  'hmackey',\n  'masterkey',\n  'master_key',\n  'secretkey',\n  'secret_key',\n  'apikey',\n  'api_key',\n  'token',\n  'bearer',\n]);\n\n/**\n * Patterns that indicate sensitive data\n */\nconst SENSITIVE_PATTERNS = [\n  /^s[a-zA-Z0-9]{28}$/, // XRPL seed\n  /^[a-f0-9]{64}$/i, // 256-bit hex (private key)\n  /^[a-f0-9]{128}$/i, // 512-bit hex\n  /^(abandon\\s+){11}(abandon|about|above|absent)\\b/i, // BIP39 mnemonic start\n];\n\n/**\n * Sanitize object for logging - removes all sensitive data\n *\n * @param obj - Object to sanitize\n * @param depth - Current recursion depth\n * @returns Sanitized copy of object\n */\nexport function sanitizeForLogging(obj: unknown, depth = 0): unknown {\n  // Prevent infinite recursion\n  if (depth > 10) return '[MAX_DEPTH]';\n\n  // Handle null/undefined\n  if (obj === null || obj === undefined) return obj;\n\n  // Handle strings\n  if (typeof obj === 'string') {\n    // Check patterns\n    for (const pattern of SENSITIVE_PATTERNS) {\n      if (pattern.test(obj)) return '[REDACTED]';\n    }\n    // Truncate long strings\n    return obj.length > 1000 ? obj.slice(0, 100) + '...[TRUNCATED]' : obj;\n  }\n\n  // Handle primitives\n  if (typeof obj !== 'object') return obj;\n\n  // Handle arrays\n  if (Array.isArray(obj)) {\n    return obj.map((item) => sanitizeForLogging(item, depth + 1));\n  }\n\n  // Handle objects\n  const result: Record<string, unknown> = {};\n  for (const [key, value] of Object.entries(obj as Record<string, unknown>)) {\n    const lowerKey = key.toLowerCase().replace(/[-_]/g, '');\n    if (REDACTED_FIELDS.has(lowerKey)) {\n      result[key] = '[REDACTED]';\n    } else {\n      result[key] = sanitizeForLogging(value, depth + 1);\n    }\n  }\n  return result;\n}\n\n// ============================================================================\n// AUDIT LOGGER CLASS\n// ============================================================================\n\n/**\n * AuditLogger - Tamper-evident audit logging with HMAC hash chains\n *\n * Features:\n * - HMAC-SHA256 hash chain for tamper detection\n * - JSON Lines format for append-only storage\n * - Automatic integrity verification\n * - Network-isolated log directories\n * - Sensitive data sanitization\n *\n * @example\n * ```typescript\n * const logger = await AuditLogger.create({\n *   hmacKeyProvider: { getKey: async () => myHmacKey },\n *   config: { network: 'testnet' }\n * });\n *\n * await logger.log({\n *   event: 'wallet_created',\n *   wallet_id: 'wallet-123',\n *   wallet_address: 'rAddress...'\n * });\n *\n * const result = await logger.verifyChain();\n * if (!result.valid) {\n *   console.error('Tampering detected!');\n * }\n *\n * await logger.shutdown();\n * ```\n */\nexport class AuditLogger extends EventEmitter {\n  private readonly config: AuditLoggerConfig;\n  private readonly chain: HashChain;\n  private readonly logDir: string;\n  private currentLogPath: string;\n  private isInitialized: boolean = false;\n  private writeLock: Promise<void> = Promise.resolve();\n\n  /**\n   * Private constructor - use AuditLogger.create() factory method\n   */\n  private constructor(\n    hmacKey: Buffer,\n    config: AuditLoggerConfig,\n    chainState?: ChainState\n  ) {\n    super();\n    this.config = config;\n    this.chain = new HashChain(hmacKey, chainState);\n    this.logDir = path.join(config.baseDir, config.network, AUDIT_SUBDIR);\n    this.currentLogPath = this.getLogFilePath(new Date());\n  }\n\n  /**\n   * Create and initialize an AuditLogger instance\n   *\n   * Factory method ensures proper initialization:\n   * 1. Loads HMAC key from provider\n   * 2. Creates audit directory if needed\n   * 3. Restores chain state from existing logs\n   * 4. Optionally verifies chain integrity on startup\n   *\n   * @param options - Configuration options\n   * @returns Initialized AuditLogger\n   * @throws Error if initialization fails\n   */\n  static async create(options: AuditLoggerOptions): Promise<AuditLogger> {\n    // 1. Get HMAC key\n    const hmacKey = await options.hmacKeyProvider.getKey();\n    if (!isValidHmacKey(hmacKey)) {\n      throw new Error('Invalid HMAC key: must be 32 bytes (256 bits)');\n    }\n\n    // 2. Build config\n    const config: AuditLoggerConfig = {\n      ...DEFAULT_AUDIT_LOGGER_CONFIG,\n      ...options.config,\n    };\n\n    // 3. Create instance\n    const logger = new AuditLogger(hmacKey, config);\n\n    // 4. Initialize storage\n    await logger.initialize();\n\n    // 5. Restore chain state from existing logs\n    await logger.restoreChainState();\n\n    // 6. Optional startup verification\n    if (config.verifyOnStartup) {\n      const result = await logger.verifyChain({\n        recentEntries: config.startupVerificationEntries,\n      });\n\n      if (!result.valid) {\n        logger.emit('tamper_detected', result);\n        if (options.onTamperDetected) {\n          await options.onTamperDetected(result);\n        }\n      }\n    }\n\n    return logger;\n  }\n\n  /**\n   * Initialize the audit log storage\n   */\n  private async initialize(): Promise<void> {\n    // Create directory structure\n    await fs.mkdir(this.logDir, { recursive: true, mode: DIR_MODE });\n\n    // Ensure current log file exists\n    try {\n      await fs.access(this.currentLogPath);\n    } catch {\n      // Create empty file with proper permissions\n      await fs.writeFile(this.currentLogPath, '', { mode: LOG_FILE_MODE });\n    }\n\n    this.isInitialized = true;\n  }\n\n  /**\n   * Restore chain state from existing log files\n   */\n  private async restoreChainState(): Promise<void> {\n    const lastEntry = await this.getLastEntry();\n\n    if (lastEntry) {\n      this.chain.setState({\n        sequence: lastEntry.seq,\n        previousHash: lastEntry.hash,\n      });\n    }\n  }\n\n  /**\n   * Get the log file path for a given date\n   */\n  private getLogFilePath(date: Date): string {\n    const dateStr = date.toISOString().split('T')[0]; // YYYY-MM-DD\n    return path.join(this.logDir, `${LOG_FILE_PREFIX}${dateStr}${LOG_FILE_EXTENSION}`);\n  }\n\n  /**\n   * Get the last entry from the current log file\n   */\n  private async getLastEntry(): Promise<AuditLogEntry | null> {\n    try {\n      const content = await fs.readFile(this.currentLogPath, 'utf-8');\n      const lines = content.trim().split('\\n').filter(Boolean);\n\n      if (lines.length === 0) {\n        return null;\n      }\n\n      const lastLine = lines[lines.length - 1]!;\n      return JSON.parse(lastLine) as AuditLogEntry;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Log an audit event\n   *\n   * @param input - Event data\n   * @returns Complete log entry with integrity fields\n   * @throws Error if logging fails\n   */\n  async log(input: AuditLogInput): Promise<AuditLogEntry> {\n    if (!this.isInitialized) {\n      throw new Error('AuditLogger not initialized. Use AuditLogger.create()');\n    }\n\n    // Validate input\n    const validated = AuditLogInputSchema.parse(input);\n\n    // Sanitize context if provided\n    const sanitizedContext = validated.context\n      ? (sanitizeForLogging(validated.context) as string)\n      : undefined;\n\n    // Serialize write operations to maintain chain integrity\n    const writePromise = this.writeLock.then(async () => {\n      // Check if we need to rotate to a new day's file\n      const today = new Date();\n      const newLogPath = this.getLogFilePath(today);\n      if (newLogPath !== this.currentLogPath) {\n        this.currentLogPath = newLogPath;\n        try {\n          await fs.access(this.currentLogPath);\n        } catch {\n          await fs.writeFile(this.currentLogPath, '', { mode: LOG_FILE_MODE });\n        }\n      }\n\n      // Build entry data (without hash chain fields)\n      const entryData = {\n        event: validated.event,\n        wallet_id: validated.wallet_id,\n        wallet_address: validated.wallet_address,\n        transaction_type: validated.transaction_type,\n        amount_xrp: validated.amount_xrp,\n        destination: validated.destination,\n        tier: validated.tier,\n        policy_decision: validated.policy_decision,\n        tx_hash: validated.tx_hash,\n        context: sanitizedContext,\n      };\n\n      // Create entry with hash chain (adds seq, timestamp, prev_hash, hash)\n      const chainEntry = this.chain.createEntry(entryData);\n\n      // Map to AuditLogEntry schema (seq instead of sequence)\n      const entry: AuditLogEntry = {\n        seq: chainEntry.sequence,\n        timestamp: chainEntry.timestamp,\n        event: chainEntry.event,\n        wallet_id: chainEntry.wallet_id,\n        wallet_address: chainEntry.wallet_address,\n        transaction_type: chainEntry.transaction_type,\n        amount_xrp: chainEntry.amount_xrp,\n        destination: chainEntry.destination,\n        tier: chainEntry.tier,\n        policy_decision: chainEntry.policy_decision,\n        tx_hash: chainEntry.tx_hash,\n        context: chainEntry.context,\n        prev_hash: chainEntry.previousHash,\n        hash: chainEntry.hash,\n      };\n\n      // Append to log file\n      const line = JSON.stringify(entry) + '\\n';\n\n      if (this.config.syncWrites) {\n        // Use synchronous write for safety\n        const handle = await fs.open(this.currentLogPath, 'a');\n        try {\n          await handle.write(line);\n          await handle.sync();\n        } finally {\n          await handle.close();\n        }\n      } else {\n        await fs.appendFile(this.currentLogPath, line);\n      }\n\n      // Emit event\n      this.emit('entry_logged', { seq: entry.seq, event: entry.event });\n\n      return entry;\n    });\n\n    this.writeLock = writePromise.then(() => {});\n    return writePromise;\n  }\n\n  /**\n   * Verify hash chain integrity\n   *\n   * @param options - Verification options\n   * @returns Verification result with any detected errors\n   */\n  async verifyChain(options: VerificationOptions = {}): Promise<ChainVerificationResult> {\n    const entries = await this.loadEntries(options);\n\n    if (entries.length === 0) {\n      return {\n        valid: true,\n        entriesVerified: 0,\n        startSequence: 0,\n        endSequence: 0,\n        durationMs: 0,\n        errors: [],\n      };\n    }\n\n    // Convert AuditLogEntry to HashableEntry format\n    const hashableEntries: HashableEntry[] = entries.map((e) => ({\n      sequence: e.seq,\n      timestamp: e.timestamp,\n      previousHash: e.prev_hash,\n      hash: e.hash,\n      event: e.event,\n      wallet_id: e.wallet_id,\n      wallet_address: e.wallet_address,\n      transaction_type: e.transaction_type,\n      amount_xrp: e.amount_xrp,\n      destination: e.destination,\n      tier: e.tier,\n      policy_decision: e.policy_decision,\n      tx_hash: e.tx_hash,\n      context: e.context,\n    }));\n\n    const result = this.chain.verifyEntries(hashableEntries, options);\n\n    if (!result.valid) {\n      this.emit('tamper_detected', result);\n    }\n\n    return result;\n  }\n\n  /**\n   * Load entries for verification/querying\n   */\n  private async loadEntries(options: VerificationOptions = {}): Promise<AuditLogEntry[]> {\n    const entries: AuditLogEntry[] = [];\n\n    try {\n      const content = await fs.readFile(this.currentLogPath, 'utf-8');\n      const lines = content.trim().split('\\n').filter(Boolean);\n\n      for (const line of lines) {\n        try {\n          const entry = JSON.parse(line) as AuditLogEntry;\n          entries.push(entry);\n        } catch {\n          // Skip malformed lines\n          continue;\n        }\n      }\n    } catch {\n      // File doesn't exist or can't be read\n      return [];\n    }\n\n    // Apply options\n    let result = entries;\n\n    if (options.startSequence !== undefined || options.endSequence !== undefined) {\n      result = result.filter((e) => {\n        if (options.startSequence !== undefined && e.seq < options.startSequence) {\n          return false;\n        }\n        if (options.endSequence !== undefined && e.seq > options.endSequence) {\n          return false;\n        }\n        return true;\n      });\n    }\n\n    if (options.recentEntries !== undefined) {\n      result = result.slice(-options.recentEntries);\n    }\n\n    return result;\n  }\n\n  /**\n   * Query logs by criteria\n   *\n   * @param query - Query parameters\n   * @returns Matching log entries\n   */\n  async query(query: AuditLogQuery): Promise<AuditLogEntry[]> {\n    const allEntries = await this.loadEntries({});\n\n    let filtered = allEntries;\n\n    // Apply filters\n    if (query.startDate) {\n      filtered = filtered.filter((e) => new Date(e.timestamp) >= query.startDate!);\n    }\n\n    if (query.endDate) {\n      filtered = filtered.filter((e) => new Date(e.timestamp) <= query.endDate!);\n    }\n\n    if (query.eventTypes && query.eventTypes.length > 0) {\n      const eventSet = new Set(query.eventTypes);\n      filtered = filtered.filter((e) => eventSet.has(e.event));\n    }\n\n    if (query.walletId) {\n      filtered = filtered.filter((e) => e.wallet_id === query.walletId);\n    }\n\n    if (query.walletAddress) {\n      filtered = filtered.filter((e) => e.wallet_address === query.walletAddress);\n    }\n\n    if (query.txHash) {\n      filtered = filtered.filter((e) => e.tx_hash === query.txHash);\n    }\n\n    // Apply sort order\n    if (query.sortOrder === 'desc') {\n      filtered = filtered.reverse();\n    }\n\n    // Apply limit\n    if (query.limit && query.limit > 0) {\n      filtered = filtered.slice(0, query.limit);\n    }\n\n    return filtered;\n  }\n\n  /**\n   * Get current chain state\n   *\n   * @returns Current sequence number and previous hash\n   */\n  getChainState(): ChainState {\n    return this.chain.getState();\n  }\n\n  /**\n   * Get storage statistics\n   *\n   * @returns Storage statistics\n   */\n  async getStats(): Promise<AuditStorageStats> {\n    const entries = await this.loadEntries({});\n\n    let fileSize = 0;\n    try {\n      const stat = await fs.stat(this.currentLogPath);\n      fileSize = stat.size;\n    } catch {\n      // File doesn't exist\n    }\n\n    const stats: AuditStorageStats = {\n      totalEntries: entries.length,\n      currentFileSize: fileSize,\n      currentFilePath: this.currentLogPath,\n    };\n\n    if (entries.length > 0) {\n      const firstEntry = entries[0]!;\n      const lastEntry = entries[entries.length - 1]!;\n      stats.oldestEntry = firstEntry.timestamp;\n      stats.newestEntry = lastEntry.timestamp;\n    }\n\n    return stats;\n  }\n\n  /**\n   * Graceful shutdown\n   *\n   * Ensures all pending writes complete and disposes of the hash chain.\n   *\n   * @param timeout - Maximum wait time for pending writes (ms)\n   */\n  async shutdown(timeout = 5000): Promise<void> {\n    // Wait for pending writes\n    const timeoutPromise = new Promise<void>((_, reject) => {\n      setTimeout(() => reject(new Error('Shutdown timeout')), timeout);\n    });\n\n    try {\n      await Promise.race([this.writeLock, timeoutPromise]);\n    } catch {\n      // Timeout or error - continue with shutdown\n    }\n\n    // Dispose of hash chain (zeros HMAC key)\n    this.chain.dispose();\n\n    // Emit shutdown event\n    this.emit('shutdown');\n  }\n}\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\n/**\n * Create an in-memory HMAC key provider for testing\n *\n * @param key - HMAC key buffer\n * @returns HMAC key provider\n */\nexport function createMemoryKeyProvider(key: Buffer): IHmacKeyProvider {\n  return {\n    getKey: async () => key,\n  };\n}\n\n/**\n * Get the default audit log directory for a network\n *\n * @param network - XRPL network\n * @returns Directory path\n */\nexport function getDefaultAuditDir(network: Network): string {\n  const baseDir = path.join(process.env['HOME'] || '~', DEFAULT_BASE_DIR);\n  return path.join(baseDir, network, AUDIT_SUBDIR);\n}\n","/**\n * Policy Engine Type Definitions\n *\n * Core types for policy evaluation, rule matching, and tier classification.\n * These types support the OPA-inspired policy engine for the XRPL Agent Wallet.\n *\n * @module policy/types\n * @version 1.0.0\n */\n\nimport { z } from 'zod';\nimport type {\n  TransactionType,\n  ApprovalTier,\n  AgentWalletPolicy,\n} from '../schemas/index.js';\n\n// ============================================================================\n// TIER TYPES\n// ============================================================================\n\n/**\n * String representation of approval tiers for policy engine internal use.\n * Maps to ApprovalTier (1-4) for external API.\n */\nexport type Tier = 'autonomous' | 'delayed' | 'cosign' | 'prohibited';\n\n/**\n * Convert string tier to numeric ApprovalTier\n */\nexport function tierToNumeric(tier: Tier): ApprovalTier {\n  const map: Record<Tier, ApprovalTier> = {\n    autonomous: 1,\n    delayed: 2,\n    cosign: 3,\n    prohibited: 4,\n  };\n  return map[tier];\n}\n\n/**\n * Convert numeric ApprovalTier to string tier\n */\nexport function numericToTier(tier: ApprovalTier): Tier {\n  const map: Record<ApprovalTier, Tier> = {\n    1: 'autonomous',\n    2: 'delayed',\n    3: 'cosign',\n    4: 'prohibited',\n  };\n  return map[tier];\n}\n\n// ============================================================================\n// POLICY CONTEXT\n// ============================================================================\n\n/**\n * Transaction context for policy evaluation.\n * Contains all fields that can be used in policy conditions.\n */\nexport interface TransactionContext {\n  /** XRPL transaction type */\n  type: TransactionType;\n  /** Destination address (if applicable) */\n  destination?: string;\n  /** Amount in XRP */\n  amount_xrp?: number;\n  /** Amount in drops */\n  amount_drops?: bigint;\n  /** Memo content (text) */\n  memo?: string;\n  /** Memo type field */\n  memo_type?: string;\n  /** Transaction fee in drops */\n  fee_drops?: number;\n  /** Destination tag */\n  destination_tag?: number;\n  /** Source tag */\n  source_tag?: number;\n  /** Currency code (for issued currencies) */\n  currency?: string;\n  /** Token issuer address */\n  issuer?: string;\n}\n\n/**\n * Wallet context for policy evaluation.\n */\nexport interface WalletContext {\n  /** Wallet's XRPL address */\n  address: string;\n  /** Network the wallet operates on */\n  network: 'mainnet' | 'testnet' | 'devnet';\n}\n\n/**\n * Complete context for policy evaluation.\n */\nexport interface PolicyContext {\n  /** Transaction being evaluated */\n  transaction: TransactionContext;\n  /** Wallet making the transaction */\n  wallet: WalletContext;\n  /** Evaluation timestamp */\n  timestamp: Date;\n  /** Correlation ID for audit trail */\n  correlationId: string;\n}\n\n// ============================================================================\n// POLICY RESULT TYPES\n// ============================================================================\n\n/**\n * Factor that contributed to tier determination.\n */\nexport interface TierFactor {\n  /** What triggered this factor */\n  source:\n    | 'rule'\n    | 'transaction_type'\n    | 'amount_limit'\n    | 'new_destination'\n    | 'prohibited_type'\n    | 'blocklist'\n    | 'limit_exceeded'\n    | 'time_control';\n  /** Tier this factor suggests */\n  tier: Tier;\n  /** Explanation */\n  reason: string;\n}\n\n/**\n * Complete policy evaluation result.\n */\nexport interface PolicyResult {\n  /** Whether transaction can proceed (in some form) */\n  allowed: boolean;\n  /** Assigned tier determining approval workflow */\n  tier: Tier;\n  /** Numeric tier for API responses */\n  tierNumeric: ApprovalTier;\n  /** Human-readable explanation */\n  reason: string;\n  /** ID of the rule that matched */\n  matchedRule: string;\n  /** Contributing factors to tier determination */\n  factors?: TierFactor[];\n  /** Evaluation duration in milliseconds */\n  evaluationTimeMs?: number;\n\n  // Tier-specific fields\n\n  /** Delay in seconds (for delayed tier) */\n  delaySeconds?: number;\n  /** Whether veto is possible (for delayed tier) */\n  vetoEnabled?: boolean;\n  /** Required signatures (for cosign tier) */\n  signerQuorum?: number;\n  /** Approval timeout (for cosign tier) */\n  approvalTimeoutHours?: number;\n  /** Authorized signer addresses (for cosign tier) */\n  signerAddresses?: string[];\n  /** Whether to send notification */\n  notify?: boolean;\n  /** Prompt injection detected in memo */\n  injectionDetected?: boolean;\n}\n\n// ============================================================================\n// RULE TYPES\n// ============================================================================\n\n/**\n * Operators for condition evaluation.\n */\nexport type Operator =\n  | '=='\n  | '!='\n  | '>'\n  | '>='\n  | '<'\n  | '<='\n  | 'in'\n  | 'not_in'\n  | 'matches'\n  | 'contains'\n  | 'starts_with'\n  | 'ends_with'\n  | 'in_category';\n\n/**\n * Reference to a policy list (blocklist/allowlist).\n */\nexport interface ValueReference {\n  ref: string;\n}\n\n/**\n * Simple field condition.\n */\nexport interface FieldCondition {\n  field: string;\n  operator: Operator;\n  value: unknown | ValueReference;\n}\n\n/**\n * Logical AND condition.\n */\nexport interface AndCondition {\n  and: Condition[];\n}\n\n/**\n * Logical OR condition.\n */\nexport interface OrCondition {\n  or: Condition[];\n}\n\n/**\n * Logical NOT condition.\n */\nexport interface NotCondition {\n  not: Condition;\n}\n\n/**\n * Always-true condition (for default rules).\n */\nexport interface AlwaysCondition {\n  always: true;\n}\n\n/**\n * Union of all condition types.\n */\nexport type Condition =\n  | FieldCondition\n  | AndCondition\n  | OrCondition\n  | NotCondition\n  | AlwaysCondition;\n\n/**\n * Rule action - what tier to assign.\n */\nexport interface RuleAction {\n  tier: Tier;\n  reason?: string;\n  override_delay_seconds?: number;\n  notify?: boolean;\n  log_level?: 'info' | 'warn' | 'error';\n}\n\n/**\n * Policy rule definition.\n */\nexport interface PolicyRule {\n  id: string;\n  name: string;\n  description?: string;\n  priority: number;\n  enabled?: boolean;\n  condition: Condition;\n  action: RuleAction;\n}\n\n// ============================================================================\n// LIMIT TYPES\n// ============================================================================\n\n/**\n * Limit check result.\n */\nexport interface LimitCheckResult {\n  /** Whether limit was exceeded */\n  exceeded: boolean;\n  /** Human-readable reason */\n  reason?: string;\n  /** Type of limit exceeded */\n  limitType?:\n    | 'daily_count'\n    | 'hourly_count'\n    | 'daily_volume'\n    | 'unique_destinations'\n    | 'cooldown'\n    | 'per_tx_amount';\n  /** Current value */\n  currentValue?: number;\n  /** Limit value */\n  limitValue?: number;\n  /** Requested amount (if volume limit) */\n  requestedAmount?: number;\n  /** When limit resets */\n  expiresAt?: Date;\n}\n\n/**\n * Current limit state for monitoring.\n */\nexport interface LimitState {\n  daily: {\n    date: string;\n    transactionCount: number;\n    totalVolumeXrp: number;\n    uniqueDestinations: Set<string>;\n    lastTransactionTime: Date | null;\n  };\n  hourly: {\n    transactions: Array<{\n      timestamp: Date;\n      amountXrp: number;\n      destination: string;\n    }>;\n  };\n  cooldown: {\n    active: boolean;\n    reason: string | null;\n    expiresAt: Date | null;\n    triggeredBy: string | null;\n  };\n}\n\n/**\n * Limit configuration.\n */\nexport interface LimitConfig {\n  dailyResetHour: number;\n  maxTransactionsPerHour: number;\n  maxTransactionsPerDay: number;\n  maxUniqueDestinationsPerDay?: number | undefined;\n  maxTotalVolumeXrpPerDay: number;\n  maxAmountPerTxXrp?: number | undefined;\n  cooldownAfterHighValue?: {\n    enabled: boolean;\n    thresholdXrp: number;\n    cooldownSeconds: number;\n  } | undefined;\n}\n\n// ============================================================================\n// POLICY INFO & METADATA\n// ============================================================================\n\n/**\n * Policy metadata (safe to expose).\n */\nexport interface PolicyInfo {\n  name: string;\n  version: string;\n  network: string;\n  description?: string | undefined;\n  enabled: boolean;\n  loadedAt: Date;\n  hash: string;\n  ruleCount: number;\n  enabledRuleCount: number;\n}\n\n// ============================================================================\n// COMPILED RULE TYPE\n// ============================================================================\n\n/**\n * Function type for condition evaluation.\n */\nexport type ConditionEvaluator = (\n  context: PolicyContext,\n  policy: InternalPolicy\n) => boolean;\n\n/**\n * Compiled rule for efficient evaluation.\n */\nexport interface CompiledRule {\n  id: string;\n  name: string;\n  priority: number;\n  evaluator: ConditionEvaluator;\n  action: RuleAction;\n}\n\n// ============================================================================\n// INTERNAL POLICY STRUCTURE\n// ============================================================================\n\n/**\n * Internal policy structure used by the engine.\n * Extended from AgentWalletPolicy with additional fields.\n */\nexport interface InternalPolicy {\n  version: string;\n  name: string;\n  description?: string;\n  network: 'mainnet' | 'testnet' | 'devnet';\n  enabled: boolean;\n\n  tiers: {\n    autonomous?: {\n      max_amount_xrp: number;\n      daily_limit_xrp?: number;\n      require_known_destination?: boolean;\n      allowed_transaction_types?: TransactionType[];\n      max_fee_drops?: number;\n    };\n    delayed?: {\n      max_amount_xrp: number;\n      daily_limit_xrp?: number;\n      delay_seconds: number;\n      veto_enabled?: boolean;\n      notify_on_queue?: boolean;\n    };\n    cosign?: {\n      min_amount_xrp?: number;\n      new_destination_always?: boolean;\n      signer_quorum: number;\n      approval_timeout_hours?: number;\n      notify_signers?: boolean;\n      signer_addresses?: string[];\n    };\n    prohibited?: {\n      reasons?: string[];\n      prohibited_transaction_types?: TransactionType[];\n    };\n  };\n\n  rules: PolicyRule[];\n\n  blocklist?: {\n    addresses?: string[];\n    memo_patterns?: string[];\n    currency_issuers?: string[];\n  };\n\n  allowlist?: {\n    addresses?: string[];\n    trusted_tags?: number[];\n    auto_learn?: boolean;\n    exchange_addresses?: Array<{\n      address: string;\n      name?: string;\n      require_tag?: boolean;\n    }>;\n  };\n\n  limits: {\n    daily_reset_utc_hour?: number;\n    max_transactions_per_hour: number;\n    max_transactions_per_day: number;\n    max_unique_destinations_per_day?: number;\n    max_total_volume_xrp_per_day: number;\n    cooldown_after_high_value?: {\n      enabled: boolean;\n      threshold_xrp: number;\n      cooldown_seconds: number;\n    };\n  };\n\n  transaction_types?: Record<\n    TransactionType,\n    {\n      enabled?: boolean;\n      default_tier?: Tier;\n      max_amount_xrp?: number;\n      require_cosign?: boolean;\n    }\n  >;\n}\n\n// ============================================================================\n// POLICY ENGINE OPTIONS\n// ============================================================================\n\n/**\n * Options for PolicyEngine constructor.\n */\nexport interface PolicyEngineOptions {\n  /** Path for persisting limit state across restarts */\n  limitPersistencePath?: string;\n  /** Watch policy file for changes and log warnings */\n  watchForChanges?: boolean;\n  /** Custom clock for testing time-dependent logic */\n  clock?: () => Date;\n  /** Maximum regex execution time in milliseconds (ReDoS protection) */\n  regexTimeoutMs?: number;\n}\n\n// ============================================================================\n// ERROR TYPES\n// ============================================================================\n\n/**\n * Base error for policy-related failures.\n */\nexport class PolicyError extends Error {\n  constructor(\n    message: string,\n    public readonly code: string,\n    public readonly recoverable: boolean = false\n  ) {\n    super(message);\n    this.name = 'PolicyError';\n  }\n\n  toJSON(): object {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message,\n      recoverable: this.recoverable,\n    };\n  }\n}\n\n/**\n * Policy file loading failed.\n */\nexport class PolicyLoadError extends PolicyError {\n  constructor(message: string) {\n    super(message, 'POLICY_LOAD_ERROR', false);\n    this.name = 'PolicyLoadError';\n  }\n}\n\n/**\n * Policy validation against schema failed.\n */\nexport class PolicyValidationError extends PolicyError {\n  constructor(\n    message: string,\n    public readonly issues: z.ZodIssue[]\n  ) {\n    super(message, 'POLICY_VALIDATION_ERROR', false);\n    this.name = 'PolicyValidationError';\n  }\n}\n\n/**\n * Error during policy evaluation.\n */\nexport class PolicyEvaluationError extends PolicyError {\n  constructor(message: string) {\n    super(message, 'POLICY_EVALUATION_ERROR', true);\n    this.name = 'PolicyEvaluationError';\n  }\n}\n\n/**\n * Policy integrity check failed.\n */\nexport class PolicyIntegrityError extends PolicyError {\n  constructor() {\n    super('Policy integrity verification failed', 'POLICY_INTEGRITY_ERROR', false);\n    this.name = 'PolicyIntegrityError';\n  }\n}\n\n/**\n * Limit exceeded error.\n */\nexport class LimitExceededError extends PolicyError {\n  constructor(\n    message: string,\n    public readonly limitType: string,\n    public readonly currentValue: number,\n    public readonly limitValue: number\n  ) {\n    super(message, 'LIMIT_EXCEEDED', true);\n    this.name = 'LimitExceededError';\n  }\n}\n","/**\n * Rule Evaluator Implementation\n *\n * Priority-based rule matching with condition compilation for\n * efficient policy evaluation.\n *\n * @module policy/evaluator\n * @version 1.0.0\n */\n\nimport type {\n  PolicyContext,\n  InternalPolicy,\n  PolicyRule,\n  Condition,\n  FieldCondition,\n  AndCondition,\n  OrCondition,\n  NotCondition,\n  AlwaysCondition,\n  ValueReference,\n  Operator,\n  ConditionEvaluator,\n  CompiledRule,\n  RuleAction,\n  Tier,\n} from './types.js';\nimport { PolicyEvaluationError } from './types.js';\nimport type { TransactionType } from '../schemas/index.js';\n\n// ============================================================================\n// TRANSACTION CATEGORIES\n// ============================================================================\n\n/**\n * Map transaction types to categories for in_category operator.\n */\nconst TRANSACTION_CATEGORIES: Record<string, string> = {\n  // Payments\n  Payment: 'payments',\n\n  // Trustlines\n  TrustSet: 'trustlines',\n\n  // DEX\n  OfferCreate: 'dex',\n  OfferCancel: 'dex',\n\n  // Escrow\n  EscrowCreate: 'escrow',\n  EscrowFinish: 'escrow',\n  EscrowCancel: 'escrow',\n\n  // Payment Channels\n  PaymentChannelCreate: 'paychan',\n  PaymentChannelFund: 'paychan',\n  PaymentChannelClaim: 'paychan',\n\n  // Account\n  AccountSet: 'account',\n  AccountDelete: 'account',\n  SetRegularKey: 'account',\n  SignerListSet: 'account',\n  DepositPreauth: 'account',\n\n  // NFT\n  NFTokenMint: 'nft',\n  NFTokenBurn: 'nft',\n  NFTokenCreateOffer: 'nft',\n  NFTokenCancelOffer: 'nft',\n  NFTokenAcceptOffer: 'nft',\n\n  // AMM\n  AMMCreate: 'amm',\n  AMMDeposit: 'amm',\n  AMMWithdraw: 'amm',\n  AMMVote: 'amm',\n  AMMBid: 'amm',\n  AMMDelete: 'amm',\n\n  // Checks\n  CheckCreate: 'checks',\n  CheckCash: 'checks',\n  CheckCancel: 'checks',\n\n  // Tickets\n  TicketCreate: 'tickets',\n\n  // Clawback\n  Clawback: 'clawback',\n\n  // DID\n  DIDSet: 'did',\n  DIDDelete: 'did',\n\n  // Cross-chain\n  XChainAccountCreateCommit: 'xchain',\n  XChainAddClaimAttestation: 'xchain',\n  XChainClaim: 'xchain',\n  XChainCommit: 'xchain',\n  XChainCreateBridge: 'xchain',\n  XChainCreateClaimID: 'xchain',\n  XChainModifyBridge: 'xchain',\n};\n\n/**\n * Get transaction category for a transaction type.\n */\nexport function getTransactionCategory(type: string): string {\n  return TRANSACTION_CATEGORIES[type] ?? 'unknown';\n}\n\n// ============================================================================\n// RULE EVALUATOR\n// ============================================================================\n\n/**\n * Result of rule evaluation.\n */\nexport interface RuleResult {\n  matched: boolean;\n  ruleId: string;\n  ruleName: string;\n  tier: Tier;\n  reason: string;\n  overrideDelaySeconds?: number | undefined;\n  notify?: boolean | undefined;\n  logLevel?: 'info' | 'warn' | 'error' | undefined;\n}\n\n/**\n * Options for RuleEvaluator.\n */\nexport interface RuleEvaluatorOptions {\n  /** Maximum regex execution time in ms (ReDoS protection) */\n  regexTimeoutMs?: number;\n  /** Maximum input length for regex matching */\n  maxRegexInputLength?: number;\n}\n\n/**\n * Evaluates policy rules in priority order.\n *\n * Features:\n * - Rule compilation for efficient repeated evaluation\n * - Priority-based evaluation (lower = higher priority)\n * - Logical operators (AND, OR, NOT)\n * - Field comparisons with multiple operators\n * - Reference resolution for blocklist/allowlist\n * - Regex caching with ReDoS protection\n */\nexport class RuleEvaluator {\n  private readonly compiledRules: Map<string, CompiledRule> = new Map();\n  private readonly regexCache: Map<string, RegExp> = new Map();\n  private readonly options: Required<RuleEvaluatorOptions>;\n\n  constructor(options?: RuleEvaluatorOptions) {\n    this.options = {\n      regexTimeoutMs: options?.regexTimeoutMs ?? 100,\n      maxRegexInputLength: options?.maxRegexInputLength ?? 10000,\n    };\n  }\n\n  /**\n   * Compile rules for efficient evaluation.\n   * Rules are sorted by priority (lower = higher priority).\n   */\n  compileRules(rules: PolicyRule[]): void {\n    this.compiledRules.clear();\n\n    // Filter enabled rules and sort by priority\n    const enabledRules = rules\n      .filter((rule) => rule.enabled !== false)\n      .sort((a, b) => a.priority - b.priority);\n\n    for (const rule of enabledRules) {\n      const compiled = this.compileRule(rule);\n      this.compiledRules.set(rule.id, compiled);\n    }\n  }\n\n  /**\n   * Compile a single rule.\n   */\n  private compileRule(rule: PolicyRule): CompiledRule {\n    return {\n      id: rule.id,\n      name: rule.name,\n      priority: rule.priority,\n      evaluator: this.compileCondition(rule.condition),\n      action: rule.action,\n    };\n  }\n\n  /**\n   * Compile a condition into an evaluator function.\n   */\n  private compileCondition(condition: Condition): ConditionEvaluator {\n    // Always condition\n    if (this.isAlwaysCondition(condition)) {\n      return () => true;\n    }\n\n    // Logical AND\n    if (this.isAndCondition(condition)) {\n      const subEvaluators = condition.and.map((c) => this.compileCondition(c));\n      return (ctx, policy) => subEvaluators.every((evaluator) => evaluator(ctx, policy));\n    }\n\n    // Logical OR\n    if (this.isOrCondition(condition)) {\n      const subEvaluators = condition.or.map((c) => this.compileCondition(c));\n      return (ctx, policy) => subEvaluators.some((evaluator) => evaluator(ctx, policy));\n    }\n\n    // Logical NOT\n    if (this.isNotCondition(condition)) {\n      const subEvaluator = this.compileCondition(condition.not);\n      return (ctx, policy) => !subEvaluator(ctx, policy);\n    }\n\n    // Field condition\n    if (this.isFieldCondition(condition)) {\n      return this.compileFieldCondition(condition);\n    }\n\n    throw new PolicyEvaluationError(\n      `Unknown condition type: ${JSON.stringify(condition)}`\n    );\n  }\n\n  /**\n   * Compile a field condition.\n   */\n  private compileFieldCondition(condition: FieldCondition): ConditionEvaluator {\n    const { field, operator, value } = condition;\n\n    return (context: PolicyContext, policy: InternalPolicy) => {\n      // Extract field value from context\n      const fieldValue = this.extractFieldValue(field, context, policy);\n\n      // Resolve value (may be a reference to policy lists)\n      const compareValue = this.resolveValue(value, policy);\n\n      // Evaluate operator\n      return this.evaluateOperator(operator, fieldValue, compareValue);\n    };\n  }\n\n  /**\n   * Extract a field value from the policy context.\n   */\n  private extractFieldValue(\n    field: string,\n    context: PolicyContext,\n    policy: InternalPolicy\n  ): unknown {\n    switch (field) {\n      // Transaction fields\n      case 'destination':\n        return context.transaction.destination;\n      case 'amount_xrp':\n        return context.transaction.amount_xrp ?? 0;\n      case 'amount_drops':\n        return context.transaction.amount_drops ?? 0n;\n      case 'transaction_type':\n        return context.transaction.type;\n      case 'transaction_category':\n        return getTransactionCategory(context.transaction.type);\n      case 'memo':\n        return context.transaction.memo ?? '';\n      case 'memo_type':\n        return context.transaction.memo_type ?? '';\n      case 'fee_drops':\n        return context.transaction.fee_drops ?? 0;\n      case 'destination_tag':\n        return context.transaction.destination_tag;\n      case 'source_tag':\n        return context.transaction.source_tag;\n      case 'currency':\n        return context.transaction.currency;\n      case 'issuer':\n        return context.transaction.issuer;\n\n      // Wallet fields\n      case 'wallet_address':\n        return context.wallet.address;\n      case 'network':\n        return context.wallet.network;\n\n      // Derived fields\n      case 'is_new_destination':\n        // This requires limit tracker integration\n        // For now, check against allowlist\n        if (!context.transaction.destination) return false;\n        const allowlist = policy.allowlist?.addresses ?? [];\n        return !allowlist.includes(context.transaction.destination);\n\n      default:\n        throw new PolicyEvaluationError(`Unknown field: ${field}`);\n    }\n  }\n\n  /**\n   * Resolve a value (may be a reference to policy lists).\n   */\n  private resolveValue(value: unknown, policy: InternalPolicy): unknown {\n    // Check if value is a reference\n    if (this.isValueReference(value)) {\n      return this.resolveReference(value.ref, policy);\n    }\n    return value;\n  }\n\n  /**\n   * Resolve a reference to a policy list.\n   */\n  private resolveReference(ref: string, policy: InternalPolicy): unknown {\n    switch (ref) {\n      case 'blocklist.addresses':\n        return policy.blocklist?.addresses ?? [];\n      case 'blocklist.memo_patterns':\n        return policy.blocklist?.memo_patterns ?? [];\n      case 'blocklist.currency_issuers':\n        return policy.blocklist?.currency_issuers ?? [];\n      case 'allowlist.addresses':\n        return policy.allowlist?.addresses ?? [];\n      case 'allowlist.trusted_tags':\n        return policy.allowlist?.trusted_tags ?? [];\n      default:\n        throw new PolicyEvaluationError(`Unknown reference: ${ref}`);\n    }\n  }\n\n  /**\n   * Evaluate an operator.\n   */\n  private evaluateOperator(\n    operator: Operator,\n    fieldValue: unknown,\n    compareValue: unknown\n  ): boolean {\n    switch (operator) {\n      // Equality operators\n      case '==':\n        return fieldValue === compareValue;\n      case '!=':\n        return fieldValue !== compareValue;\n\n      // Numeric comparison operators\n      case '>':\n        return this.asNumber(fieldValue) > this.asNumber(compareValue);\n      case '>=':\n        return this.asNumber(fieldValue) >= this.asNumber(compareValue);\n      case '<':\n        return this.asNumber(fieldValue) < this.asNumber(compareValue);\n      case '<=':\n        return this.asNumber(fieldValue) <= this.asNumber(compareValue);\n\n      // Array operators\n      case 'in':\n        return this.asArray(compareValue).includes(fieldValue);\n      case 'not_in':\n        return !this.asArray(compareValue).includes(fieldValue);\n\n      // String operators\n      case 'matches':\n        return this.matchesRegex(this.asString(fieldValue), this.asString(compareValue));\n      case 'contains':\n        return this.asString(fieldValue).includes(this.asString(compareValue));\n      case 'starts_with':\n        return this.asString(fieldValue).startsWith(this.asString(compareValue));\n      case 'ends_with':\n        return this.asString(fieldValue).endsWith(this.asString(compareValue));\n\n      // Category operator\n      case 'in_category':\n        return this.isInCategory(this.asString(fieldValue), this.asString(compareValue));\n\n      default:\n        throw new PolicyEvaluationError(`Unknown operator: ${operator}`);\n    }\n  }\n\n  /**\n   * Check if a regex pattern is potentially vulnerable to ReDoS.\n   *\n   * Detects common ReDoS patterns:\n   * - Nested quantifiers: (a+)+, (a*)*\n   * - Overlapping alternation: (a|a)+\n   * - Exponential backtracking patterns\n   */\n  private isReDoSVulnerable(pattern: string): boolean {\n    // Patterns that indicate potential ReDoS vulnerability\n    const dangerousPatterns = [\n      /\\([^)]*[+*][^)]*\\)[+*]/, // Nested quantifiers: (a+)+, (.*)*\n      /\\([^)]*\\|[^)]*\\)[+*]{2,}/, // Alternation with repeated quantifiers\n      /\\(\\.\\*\\)[+*]/, // (.*)+\n      /\\(\\.\\+\\)[+*]/, // (.+)+\n      /\\[[^\\]]*\\][+*]{2,}[^\\s]*\\[[^\\]]*\\][+*]{2,}/, // Multiple char classes with quantifiers\n    ];\n\n    for (const dangerous of dangerousPatterns) {\n      if (dangerous.test(pattern)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Match a value against a regex pattern.\n   */\n  private matchesRegex(value: string, pattern: string): boolean {\n    // Get or compile regex\n    let regex = this.regexCache.get(pattern);\n    if (!regex) {\n      // Check for ReDoS vulnerability before compiling\n      if (this.isReDoSVulnerable(pattern)) {\n        throw new PolicyEvaluationError(\n          `Regex pattern rejected due to potential ReDoS vulnerability: ${pattern}`\n        );\n      }\n\n      try {\n        regex = new RegExp(pattern, 'i');\n        this.regexCache.set(pattern, regex);\n      } catch (error) {\n        throw new PolicyEvaluationError(`Invalid regex pattern: ${pattern}`);\n      }\n    }\n\n    // Limit input length for ReDoS protection\n    const truncatedValue =\n      value.length > this.options.maxRegexInputLength\n        ? value.slice(0, this.options.maxRegexInputLength)\n        : value;\n\n    return regex.test(truncatedValue);\n  }\n\n  /**\n   * Check if a transaction type is in a category.\n   */\n  private isInCategory(txType: string, category: string): boolean {\n    return getTransactionCategory(txType) === category;\n  }\n\n  // ============================================================================\n  // TYPE GUARDS\n  // ============================================================================\n\n  private isAlwaysCondition(condition: Condition): condition is AlwaysCondition {\n    return 'always' in condition && condition.always === true;\n  }\n\n  private isAndCondition(condition: Condition): condition is AndCondition {\n    return 'and' in condition;\n  }\n\n  private isOrCondition(condition: Condition): condition is OrCondition {\n    return 'or' in condition;\n  }\n\n  private isNotCondition(condition: Condition): condition is NotCondition {\n    return 'not' in condition;\n  }\n\n  private isFieldCondition(condition: Condition): condition is FieldCondition {\n    return 'field' in condition;\n  }\n\n  private isValueReference(value: unknown): value is ValueReference {\n    return (\n      typeof value === 'object' &&\n      value !== null &&\n      'ref' in value &&\n      typeof (value as ValueReference).ref === 'string'\n    );\n  }\n\n  // ============================================================================\n  // TYPE CONVERSIONS\n  // ============================================================================\n\n  private asNumber(value: unknown): number {\n    if (typeof value === 'number') return value;\n    if (typeof value === 'bigint') return Number(value);\n    if (typeof value === 'string') {\n      const parsed = parseFloat(value);\n      if (isNaN(parsed)) {\n        throw new PolicyEvaluationError(`Cannot convert \"${value}\" to number`);\n      }\n      return parsed;\n    }\n    throw new PolicyEvaluationError(`Cannot convert ${typeof value} to number`);\n  }\n\n  private asString(value: unknown): string {\n    if (typeof value === 'string') return value;\n    if (value === null || value === undefined) return '';\n    return String(value);\n  }\n\n  private asArray(value: unknown): unknown[] {\n    if (Array.isArray(value)) return value;\n    throw new PolicyEvaluationError(`Expected array, got ${typeof value}`);\n  }\n\n  // ============================================================================\n  // PUBLIC EVALUATION METHODS\n  // ============================================================================\n\n  /**\n   * Evaluate rules against a context.\n   * Returns the first matching rule's result.\n   */\n  evaluate(context: PolicyContext, policy: InternalPolicy): RuleResult {\n    // Rules are pre-sorted by priority during compilation\n    for (const [ruleId, compiled] of this.compiledRules) {\n      try {\n        const matches = compiled.evaluator(context, policy);\n\n        if (matches) {\n          return {\n            matched: true,\n            ruleId: compiled.id,\n            ruleName: compiled.name,\n            tier: compiled.action.tier,\n            reason: compiled.action.reason ?? `Matched rule: ${compiled.name}`,\n            overrideDelaySeconds: compiled.action.override_delay_seconds,\n            notify: compiled.action.notify,\n            logLevel: compiled.action.log_level,\n          };\n        }\n      } catch (error) {\n        // Log error but continue to next rule\n        // Fail-secure: if rule evaluation errors, don't match it\n        console.error(`Rule evaluation error for ${ruleId}:`, error);\n      }\n    }\n\n    // No rule matched - default deny\n    return {\n      matched: false,\n      ruleId: 'default-deny',\n      ruleName: 'No matching rule',\n      tier: 'prohibited',\n      reason: 'No matching rule (default deny)',\n    };\n  }\n\n  /**\n   * Get the number of compiled rules.\n   */\n  getRuleCount(): number {\n    return this.compiledRules.size;\n  }\n\n  /**\n   * Clear compiled rules and caches.\n   */\n  clear(): void {\n    this.compiledRules.clear();\n    this.regexCache.clear();\n  }\n}\n\n// ============================================================================\n// BLOCKLIST CHECKER\n// ============================================================================\n\n/**\n * Check if a transaction matches blocklist criteria.\n */\nexport interface BlocklistCheckResult {\n  blocked: boolean;\n  reason?: string;\n  matchedRule?: string;\n  injectionDetected?: boolean;\n}\n\n/**\n * Check transaction against blocklist.\n *\n * This is a separate check from rule evaluation because\n * blocklist should ALWAYS be checked first, regardless of rules.\n */\nexport function checkBlocklist(\n  context: PolicyContext,\n  policy: InternalPolicy,\n  regexCache?: Map<string, RegExp>\n): BlocklistCheckResult {\n  const blocklist = policy.blocklist;\n  if (!blocklist) {\n    return { blocked: false };\n  }\n\n  // Check destination address\n  if (\n    context.transaction.destination &&\n    blocklist.addresses?.includes(context.transaction.destination)\n  ) {\n    return {\n      blocked: true,\n      reason: 'Destination address is blocklisted',\n      matchedRule: 'blocklist-address',\n    };\n  }\n\n  // Check currency issuer\n  if (\n    context.transaction.issuer &&\n    blocklist.currency_issuers?.includes(context.transaction.issuer)\n  ) {\n    return {\n      blocked: true,\n      reason: 'Token issuer is blocklisted',\n      matchedRule: 'blocklist-issuer',\n    };\n  }\n\n  // Check memo patterns (prompt injection detection)\n  if (context.transaction.memo && blocklist.memo_patterns?.length) {\n    const cache = regexCache ?? new Map<string, RegExp>();\n\n    for (const pattern of blocklist.memo_patterns) {\n      let regex = cache.get(pattern);\n      if (!regex) {\n        try {\n          regex = new RegExp(pattern, 'i');\n          cache.set(pattern, regex);\n        } catch {\n          // Invalid regex pattern - skip\n          continue;\n        }\n      }\n\n      // Limit memo length for ReDoS protection\n      const memo =\n        context.transaction.memo.length > 10000\n          ? context.transaction.memo.slice(0, 10000)\n          : context.transaction.memo;\n\n      if (regex.test(memo)) {\n        return {\n          blocked: true,\n          reason: 'Memo contains blocked pattern (potential injection)',\n          matchedRule: 'blocklist-memo-pattern',\n          injectionDetected: true,\n        };\n      }\n    }\n  }\n\n  return { blocked: false };\n}\n\n/**\n * Check if a destination is in the allowlist.\n */\nexport function isInAllowlist(\n  context: PolicyContext,\n  policy: InternalPolicy\n): boolean {\n  const allowlist = policy.allowlist;\n  if (!allowlist) return false;\n\n  // Check if destination is in allowlist\n  if (\n    context.transaction.destination &&\n    allowlist.addresses?.includes(context.transaction.destination)\n  ) {\n    return true;\n  }\n\n  // Check exchange addresses with special handling\n  if (context.transaction.destination && allowlist.exchange_addresses) {\n    const exchange = allowlist.exchange_addresses.find(\n      (ex) => ex.address === context.transaction.destination\n    );\n    if (exchange) {\n      // Exchange addresses may require destination tag\n      if (exchange.require_tag && !context.transaction.destination_tag) {\n        return false; // Missing required tag\n      }\n      return true;\n    }\n  }\n\n  // Check trusted tags\n  if (\n    context.transaction.destination_tag !== undefined &&\n    allowlist.trusted_tags?.includes(context.transaction.destination_tag)\n  ) {\n    return true;\n  }\n\n  return false;\n}\n","/**\n * Limit Tracker Implementation\n *\n * Token bucket rate limiting with rolling window counters for\n * transaction count, volume, and destination tracking.\n *\n * @module policy/limits\n * @version 1.0.0\n */\n\nimport type {\n  LimitConfig,\n  LimitState,\n  LimitCheckResult,\n  PolicyContext,\n} from './types.js';\n\n// ============================================================================\n// LIMIT TRACKER\n// ============================================================================\n\n/**\n * Options for LimitTracker construction.\n */\nexport interface LimitTrackerOptions {\n  /** Limit configuration */\n  config: LimitConfig;\n  /** Path for persisting state (optional) */\n  persistencePath?: string | undefined;\n  /** Custom clock for testing */\n  clock?: (() => Date) | undefined;\n}\n\n/**\n * Tracks transaction limits using rolling windows and daily resets.\n *\n * Features:\n * - Daily transaction count limits (resets at configured UTC hour)\n * - Hourly transaction count limits (sliding 1-hour window)\n * - Daily XRP volume limits\n * - Unique destination tracking per day\n * - Optional cooldown after high-value transactions\n * - State persistence across restarts (optional)\n */\nexport class LimitTracker {\n  private state: LimitState;\n  private readonly config: LimitConfig;\n  private readonly persistencePath: string | undefined;\n  private readonly clock: () => Date;\n  private resetInterval: ReturnType<typeof setInterval> | undefined;\n\n  constructor(options: LimitTrackerOptions) {\n    this.config = options.config;\n    this.persistencePath = options.persistencePath;\n    this.clock = options.clock ?? (() => new Date());\n\n    // Initialize fresh state\n    this.state = this.createFreshState();\n\n    // Schedule periodic reset checks (every minute)\n    this.schedulePeriodicCheck();\n  }\n\n  /**\n   * Create fresh limit state.\n   */\n  private createFreshState(): LimitState {\n    const now = this.clock();\n    return {\n      daily: {\n        date: this.getDateString(now),\n        transactionCount: 0,\n        totalVolumeXrp: 0,\n        uniqueDestinations: new Set(),\n        lastTransactionTime: null,\n      },\n      hourly: {\n        transactions: [],\n      },\n      cooldown: {\n        active: false,\n        reason: null,\n        expiresAt: null,\n        triggeredBy: null,\n      },\n    };\n  }\n\n  /**\n   * Check if a transaction would exceed any limits.\n   * Does NOT record the transaction - call recordTransaction after successful signing.\n   */\n  checkLimits(context: PolicyContext): LimitCheckResult {\n    const now = this.clock();\n\n    // Ensure state is current\n    this.maybeResetDaily(now);\n    this.pruneHourlyWindow(now);\n\n    // Check cooldown\n    if (this.state.cooldown.active) {\n      if (this.state.cooldown.expiresAt && now < this.state.cooldown.expiresAt) {\n        return {\n          exceeded: true,\n          reason: `Cooldown active: ${this.state.cooldown.reason}`,\n          limitType: 'cooldown',\n          currentValue: 0,\n          limitValue: 0,\n          expiresAt: this.state.cooldown.expiresAt,\n        };\n      } else {\n        this.clearCooldown();\n      }\n    }\n\n    // Check per-transaction amount limit\n    const txAmountXrp = context.transaction.amount_xrp ?? 0;\n    if (\n      this.config.maxAmountPerTxXrp !== undefined &&\n      txAmountXrp > this.config.maxAmountPerTxXrp\n    ) {\n      return {\n        exceeded: true,\n        reason: `Transaction amount ${txAmountXrp} XRP exceeds per-tx limit of ${this.config.maxAmountPerTxXrp} XRP`,\n        limitType: 'per_tx_amount',\n        currentValue: txAmountXrp,\n        limitValue: this.config.maxAmountPerTxXrp,\n      };\n    }\n\n    // Check daily transaction count\n    if (this.state.daily.transactionCount >= this.config.maxTransactionsPerDay) {\n      return {\n        exceeded: true,\n        reason: `Daily transaction count limit (${this.config.maxTransactionsPerDay}) exceeded`,\n        limitType: 'daily_count',\n        currentValue: this.state.daily.transactionCount,\n        limitValue: this.config.maxTransactionsPerDay,\n      };\n    }\n\n    // Check hourly transaction count\n    const hourlyCount = this.state.hourly.transactions.length;\n    if (hourlyCount >= this.config.maxTransactionsPerHour) {\n      return {\n        exceeded: true,\n        reason: `Hourly transaction count limit (${this.config.maxTransactionsPerHour}) exceeded`,\n        limitType: 'hourly_count',\n        currentValue: hourlyCount,\n        limitValue: this.config.maxTransactionsPerHour,\n      };\n    }\n\n    // Check daily volume\n    const projectedVolume = this.state.daily.totalVolumeXrp + txAmountXrp;\n    if (projectedVolume > this.config.maxTotalVolumeXrpPerDay) {\n      return {\n        exceeded: true,\n        reason: `Daily XRP volume limit (${this.config.maxTotalVolumeXrpPerDay} XRP) would be exceeded`,\n        limitType: 'daily_volume',\n        currentValue: this.state.daily.totalVolumeXrp,\n        limitValue: this.config.maxTotalVolumeXrpPerDay,\n        requestedAmount: txAmountXrp,\n      };\n    }\n\n    // Check unique destinations limit\n    const destination = context.transaction.destination;\n    if (\n      this.config.maxUniqueDestinationsPerDay !== undefined &&\n      destination &&\n      !this.state.daily.uniqueDestinations.has(destination) &&\n      this.state.daily.uniqueDestinations.size >= this.config.maxUniqueDestinationsPerDay\n    ) {\n      return {\n        exceeded: true,\n        reason: `Daily unique destination limit (${this.config.maxUniqueDestinationsPerDay}) exceeded`,\n        limitType: 'unique_destinations',\n        currentValue: this.state.daily.uniqueDestinations.size,\n        limitValue: this.config.maxUniqueDestinationsPerDay,\n      };\n    }\n\n    return { exceeded: false };\n  }\n\n  /**\n   * Record a successfully signed transaction.\n   * Call this AFTER signing succeeds, not before.\n   */\n  recordTransaction(context: PolicyContext): void {\n    const now = this.clock();\n\n    // Ensure state is current\n    this.maybeResetDaily(now);\n    this.pruneHourlyWindow(now);\n\n    const txAmountXrp = context.transaction.amount_xrp ?? 0;\n    const destination = context.transaction.destination;\n\n    // Update daily stats\n    this.state.daily.transactionCount++;\n    this.state.daily.totalVolumeXrp += txAmountXrp;\n    this.state.daily.lastTransactionTime = now;\n    if (destination) {\n      this.state.daily.uniqueDestinations.add(destination);\n    }\n\n    // Update hourly window\n    this.state.hourly.transactions.push({\n      timestamp: now,\n      amountXrp: txAmountXrp,\n      destination: destination ?? '',\n    });\n\n    // Check if cooldown should be triggered\n    const cooldownConfig = this.config.cooldownAfterHighValue;\n    if (\n      cooldownConfig?.enabled &&\n      txAmountXrp >= cooldownConfig.thresholdXrp\n    ) {\n      this.activateCooldown(\n        `High-value transaction (${txAmountXrp} XRP)`,\n        cooldownConfig.cooldownSeconds,\n        context.transaction.type\n      );\n    }\n  }\n\n  /**\n   * Check if daily reset should happen.\n   */\n  private maybeResetDaily(now: Date): void {\n    const currentDate = this.getDateString(now);\n    const currentHour = now.getUTCHours();\n\n    // Check if we've crossed the reset boundary\n    const shouldReset =\n      this.state.daily.date !== currentDate ||\n      (this.state.daily.date === currentDate &&\n        currentHour >= this.config.dailyResetHour &&\n        this.state.daily.lastTransactionTime &&\n        this.state.daily.lastTransactionTime.getUTCHours() < this.config.dailyResetHour);\n\n    if (shouldReset) {\n      this.state.daily = {\n        date: currentDate,\n        transactionCount: 0,\n        totalVolumeXrp: 0,\n        uniqueDestinations: new Set(),\n        lastTransactionTime: null,\n      };\n    }\n  }\n\n  /**\n   * Remove transactions older than 1 hour from sliding window.\n   */\n  private pruneHourlyWindow(now: Date): void {\n    const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);\n\n    this.state.hourly.transactions = this.state.hourly.transactions.filter(\n      (tx) => tx.timestamp > oneHourAgo\n    );\n  }\n\n  /**\n   * Activate cooldown period.\n   */\n  private activateCooldown(\n    reason: string,\n    durationSeconds: number,\n    triggeredBy: string\n  ): void {\n    const now = this.clock();\n    this.state.cooldown = {\n      active: true,\n      reason,\n      expiresAt: new Date(now.getTime() + durationSeconds * 1000),\n      triggeredBy,\n    };\n  }\n\n  /**\n   * Clear active cooldown.\n   */\n  private clearCooldown(): void {\n    this.state.cooldown = {\n      active: false,\n      reason: null,\n      expiresAt: null,\n      triggeredBy: null,\n    };\n  }\n\n  /**\n   * Schedule periodic check for daily reset.\n   */\n  private schedulePeriodicCheck(): void {\n    // Check every minute\n    this.resetInterval = setInterval(() => {\n      this.maybeResetDaily(this.clock());\n    }, 60 * 1000);\n  }\n\n  /** Track disposal state */\n  private isDisposed: boolean = false;\n\n  /**\n   * Stop periodic checks (for cleanup).\n   */\n  dispose(): void {\n    if (this.isDisposed) {\n      return; // Already disposed\n    }\n\n    if (this.resetInterval) {\n      clearInterval(this.resetInterval);\n      this.resetInterval = undefined;\n    }\n\n    this.isDisposed = true;\n  }\n\n  /**\n   * Check if the tracker has been disposed.\n   */\n  get disposed(): boolean {\n    return this.isDisposed;\n  }\n\n  // ============================================================================\n  // GETTERS FOR RULE EVALUATION\n  // ============================================================================\n\n  /**\n   * Get current daily XRP volume.\n   */\n  getDailyVolumeXrp(): number {\n    this.maybeResetDaily(this.clock());\n    return this.state.daily.totalVolumeXrp;\n  }\n\n  /**\n   * Get transactions in the last hour.\n   */\n  getHourlyCount(): number {\n    const now = this.clock();\n    this.pruneHourlyWindow(now);\n    return this.state.hourly.transactions.length;\n  }\n\n  /**\n   * Get daily transaction count.\n   */\n  getDailyCount(): number {\n    this.maybeResetDaily(this.clock());\n    return this.state.daily.transactionCount;\n  }\n\n  /**\n   * Get unique destination count for today.\n   */\n  getUniqueDestinationCount(): number {\n    this.maybeResetDaily(this.clock());\n    return this.state.daily.uniqueDestinations.size;\n  }\n\n  /**\n   * Check if a destination has been used before today.\n   */\n  isDestinationKnown(destination: string): boolean {\n    this.maybeResetDaily(this.clock());\n    return this.state.daily.uniqueDestinations.has(destination);\n  }\n\n  /**\n   * Get complete limit state (copy for safety).\n   */\n  getState(): LimitState {\n    const now = this.clock();\n    this.maybeResetDaily(now);\n    this.pruneHourlyWindow(now);\n\n    return {\n      daily: {\n        ...this.state.daily,\n        uniqueDestinations: new Set(this.state.daily.uniqueDestinations),\n      },\n      hourly: {\n        transactions: [...this.state.hourly.transactions],\n      },\n      cooldown: { ...this.state.cooldown },\n    };\n  }\n\n  /**\n   * Get remaining limits for current period.\n   */\n  getRemainingLimits(): {\n    dailyTxRemaining: number;\n    hourlyTxRemaining: number;\n    dailyVolumeRemainingXrp: number;\n    uniqueDestinationsRemaining: number;\n  } {\n    const now = this.clock();\n    this.maybeResetDaily(now);\n    this.pruneHourlyWindow(now);\n\n    return {\n      dailyTxRemaining: Math.max(\n        0,\n        this.config.maxTransactionsPerDay - this.state.daily.transactionCount\n      ),\n      hourlyTxRemaining: Math.max(\n        0,\n        this.config.maxTransactionsPerHour - this.state.hourly.transactions.length\n      ),\n      dailyVolumeRemainingXrp: Math.max(\n        0,\n        this.config.maxTotalVolumeXrpPerDay - this.state.daily.totalVolumeXrp\n      ),\n      uniqueDestinationsRemaining: Math.max(\n        0,\n        (this.config.maxUniqueDestinationsPerDay ?? Infinity) -\n          this.state.daily.uniqueDestinations.size\n      ),\n    };\n  }\n\n  /**\n   * Reset all limits. Requires confirmation string for safety.\n   */\n  reset(confirmation: string): void {\n    if (confirmation !== 'CONFIRM_LIMIT_RESET') {\n      throw new Error('Invalid confirmation string for limit reset');\n    }\n    this.state = this.createFreshState();\n  }\n\n  /**\n   * Get date string in YYYY-MM-DD format.\n   */\n  private getDateString(date: Date): string {\n    // ISO date format is always YYYY-MM-DDTHH:mm:ss.sssZ, so split always produces [date, time]\n    return date.toISOString().split('T')[0]!;\n  }\n}\n\n// ============================================================================\n// FACTORY FUNCTION\n// ============================================================================\n\n/**\n * Create a LimitTracker from policy limits configuration.\n */\nexport function createLimitTracker(\n  limits: {\n    max_tx_per_hour: number;\n    max_tx_per_day: number;\n    max_daily_volume_drops: string;\n    max_amount_per_tx_drops: string;\n  },\n  options?: {\n    dailyResetHour?: number | undefined;\n    maxUniqueDestinationsPerDay?: number | undefined;\n    cooldownAfterHighValue?: {\n      enabled: boolean;\n      thresholdXrp: number;\n      cooldownSeconds: number;\n    } | undefined;\n    clock?: (() => Date) | undefined;\n  }\n): LimitTracker {\n  // Convert drops to XRP\n  const dropsToXrp = (drops: string): number => {\n    return Number(BigInt(drops)) / 1_000_000;\n  };\n\n  const config: LimitConfig = {\n    dailyResetHour: options?.dailyResetHour ?? 0,\n    maxTransactionsPerHour: limits.max_tx_per_hour,\n    maxTransactionsPerDay: limits.max_tx_per_day,\n    maxTotalVolumeXrpPerDay: dropsToXrp(limits.max_daily_volume_drops),\n    maxAmountPerTxXrp: dropsToXrp(limits.max_amount_per_tx_drops),\n    maxUniqueDestinationsPerDay: options?.maxUniqueDestinationsPerDay,\n    cooldownAfterHighValue: options?.cooldownAfterHighValue,\n  };\n\n  const trackerOptions: LimitTrackerOptions = {\n    config,\n  };\n  if (options?.clock) {\n    trackerOptions.clock = options.clock;\n  }\n\n  return new LimitTracker(trackerOptions);\n}\n","/**\n * Policy Engine Implementation\n *\n * The core policy engine that evaluates transactions against declarative\n * policies before allowing signing operations. Implements an OPA-inspired\n * rule evaluation system entirely in TypeScript.\n *\n * @module policy/engine\n * @version 1.0.0\n */\n\nimport { createHash } from 'crypto';\nimport type {\n  PolicyContext,\n  PolicyResult,\n  PolicyInfo,\n  InternalPolicy,\n  PolicyEngineOptions,\n  Tier,\n  TierFactor,\n  LimitState,\n  PolicyRule,\n  TransactionContext,\n} from './types.js';\nimport {\n  PolicyError,\n  PolicyLoadError,\n  PolicyValidationError,\n  PolicyEvaluationError,\n  tierToNumeric,\n} from './types.js';\nimport { RuleEvaluator, checkBlocklist, isInAllowlist, type RuleEvaluatorOptions } from './evaluator.js';\nimport { LimitTracker, type LimitTrackerOptions } from './limits.js';\nimport type { AgentWalletPolicy, ApprovalTier, TransactionType } from '../schemas/index.js';\n\n// ============================================================================\n// POLICY ENGINE INTERFACE\n// ============================================================================\n\n/**\n * Simple transaction context for tool-based evaluation.\n * Used by MCP tools that don't have full PolicyContext.\n */\nexport interface SimpleTransactionContext {\n  /** XRPL transaction type */\n  type: string;\n  /** Destination address */\n  destination?: string;\n  /** Amount in drops (as string) */\n  amount_drops?: string;\n  /** Memo content */\n  memo?: string;\n}\n\n/**\n * Simplified evaluation result for tools.\n */\nexport interface SimpleEvaluationResult {\n  /** Tier (1=autonomous, 2=delayed, 3=cosign, 4=prohibited) */\n  tier: 1 | 2 | 3 | 4;\n  /** Reason for decision */\n  reason: string;\n  /** Policy violations (for prohibited) */\n  violations?: string[];\n  /** Warnings (non-blocking) */\n  warnings?: string[];\n  /** Whether transaction is allowed */\n  allowed: boolean;\n}\n\n/**\n * Core policy engine interface.\n * All evaluation methods are synchronous and deterministic.\n */\nexport interface IPolicyEngine {\n  /**\n   * Evaluate a transaction against the loaded policy.\n   * This is the primary entry point for all transaction authorization.\n   */\n  evaluate(context: PolicyContext): PolicyResult;\n\n  /**\n   * Simplified transaction evaluation for MCP tools.\n   * Creates a PolicyContext internally from the simple transaction context.\n   *\n   * @param policyId - Policy ID (for validation)\n   * @param txContext - Simple transaction context from decoded transaction\n   * @returns Simplified evaluation result with tier and violations\n   */\n  evaluateTransaction(policyId: string, txContext: SimpleTransactionContext): Promise<SimpleEvaluationResult>;\n\n  /**\n   * Set or update the policy configuration.\n   * SECURITY: In production, this should require approval workflow.\n   *\n   * @param policy - New policy configuration\n   */\n  setPolicy(policy: AgentWalletPolicy): Promise<void>;\n\n  /**\n   * Get the SHA-256 hash of the currently loaded policy.\n   * Used for integrity verification and audit logging.\n   */\n  getPolicyHash(): string;\n\n  /**\n   * Get policy metadata without exposing internal rules.\n   */\n  getPolicyInfo(): PolicyInfo;\n\n  /**\n   * Verify policy integrity against stored hash.\n   * Should be called periodically and before signing operations.\n   */\n  verifyIntegrity(): boolean;\n\n  /**\n   * Get current limit state for monitoring/debugging.\n   * Does not expose sensitive policy details.\n   */\n  getLimitState(): LimitState;\n\n  /**\n   * Reset limit counters. Only for testing or administrative override.\n   * Requires explicit confirmation and is logged.\n   */\n  resetLimits(confirmation: string): void;\n\n  /**\n   * Record a successful transaction for limit tracking.\n   */\n  recordTransaction(context: PolicyContext): void;\n\n  /**\n   * Clean up resources (intervals, etc).\n   */\n  dispose(): void;\n}\n\n// ============================================================================\n// POLICY ENGINE IMPLEMENTATION\n// ============================================================================\n\n/**\n * Policy Engine - Security boundary for transaction authorization.\n *\n * Features:\n * - Immutable policy after loading\n * - Priority-based rule evaluation\n * - 4-tier classification (autonomous, delayed, co-sign, prohibited)\n * - Blocklist/allowlist support\n * - Memo pattern detection for prompt injection\n * - Rate and volume limiting\n * - Policy integrity verification\n *\n * Security Guarantees:\n * - LLM/agent cannot modify policies at runtime\n * - Policy integrity verified on each evaluation\n * - Fail-secure: any error results in denial\n * - Hard limits enforce absolute ceilings\n */\nexport class PolicyEngine implements IPolicyEngine {\n  /** Frozen policy data */\n  private readonly policy: Readonly<InternalPolicy>;\n  /** SHA-256 hash of serialized policy */\n  private readonly policyHash: string;\n  /** When policy was loaded */\n  private readonly loadedAt: Date;\n  /** Rule evaluator */\n  private readonly ruleEvaluator: RuleEvaluator;\n  /** Limit tracker */\n  private readonly limitTracker: LimitTracker;\n  /** Custom clock for testing */\n  private readonly clock: () => Date;\n  /** Regex cache for blocklist patterns */\n  private readonly regexCache: Map<string, RegExp> = new Map();\n\n  constructor(policy: InternalPolicy, options?: PolicyEngineOptions) {\n    this.clock = options?.clock ?? (() => new Date());\n    this.loadedAt = this.clock();\n\n    // Compute hash before freezing\n    this.policyHash = this.computeHash(policy);\n\n    // Deep freeze the policy to prevent modifications\n    this.policy = this.deepFreeze(policy);\n\n    // Initialize rule evaluator\n    const evaluatorOptions: RuleEvaluatorOptions = {};\n    if (options?.regexTimeoutMs !== undefined) {\n      evaluatorOptions.regexTimeoutMs = options.regexTimeoutMs;\n    }\n    this.ruleEvaluator = new RuleEvaluator(evaluatorOptions);\n\n    // Compile rules\n    this.ruleEvaluator.compileRules(this.policy.rules);\n\n    // Initialize limit tracker\n    const limitTrackerOptions: LimitTrackerOptions = {\n      config: {\n        dailyResetHour: this.policy.limits.daily_reset_utc_hour ?? 0,\n        maxTransactionsPerHour: this.policy.limits.max_transactions_per_hour,\n        maxTransactionsPerDay: this.policy.limits.max_transactions_per_day,\n        maxTotalVolumeXrpPerDay: this.policy.limits.max_total_volume_xrp_per_day,\n        maxUniqueDestinationsPerDay:\n          this.policy.limits.max_unique_destinations_per_day,\n        cooldownAfterHighValue: this.policy.limits.cooldown_after_high_value\n          ? {\n              enabled: this.policy.limits.cooldown_after_high_value.enabled,\n              thresholdXrp:\n                this.policy.limits.cooldown_after_high_value.threshold_xrp,\n              cooldownSeconds:\n                this.policy.limits.cooldown_after_high_value.cooldown_seconds,\n            }\n          : undefined,\n      },\n      clock: this.clock,\n    };\n    this.limitTracker = new LimitTracker(limitTrackerOptions);\n  }\n\n  /**\n   * Evaluate a transaction against the loaded policy.\n   */\n  evaluate(context: PolicyContext): PolicyResult {\n    const startTime = performance.now();\n\n    try {\n      // Step 1: Verify policy integrity\n      if (!this.verifyIntegrity()) {\n        return this.createProhibitedResult(\n          'Policy integrity check failed',\n          'integrity-check',\n          startTime\n        );\n      }\n\n      // Step 2: Check if policy is enabled\n      if (this.policy.enabled === false) {\n        return this.createProhibitedResult(\n          'Policy is disabled',\n          'policy-disabled',\n          startTime\n        );\n      }\n\n      // Step 3: Check global limits first (hard ceiling)\n      const limitResult = this.checkGlobalLimits(context);\n      if (limitResult) {\n        return {\n          ...limitResult,\n          evaluationTimeMs: performance.now() - startTime,\n        };\n      }\n\n      // Step 4: Check blocklist (highest priority)\n      const blocklistResult = checkBlocklist(context, this.policy, this.regexCache);\n      if (blocklistResult.blocked) {\n        return this.createProhibitedResult(\n          blocklistResult.reason!,\n          blocklistResult.matchedRule!,\n          startTime,\n          blocklistResult.injectionDetected\n        );\n      }\n\n      // Step 5: Check transaction type restrictions\n      const typeResult = this.checkTransactionType(context);\n      if (typeResult) {\n        return {\n          ...typeResult,\n          evaluationTimeMs: performance.now() - startTime,\n        };\n      }\n\n      // Step 6: Evaluate rules in priority order\n      const ruleResult = this.ruleEvaluator.evaluate(context, this.policy);\n\n      // Step 7: Apply tier-specific constraints and amount escalation\n      const finalResult = this.applyTierConstraints(ruleResult, context);\n\n      return {\n        ...finalResult,\n        evaluationTimeMs: performance.now() - startTime,\n      };\n    } catch (error) {\n      // Log error with safe details only (no sensitive data)\n      console.error('Policy evaluation error:', {\n        correlationId: context.correlationId,\n        errorType: error instanceof Error ? error.name : 'Unknown',\n        errorMessage: error instanceof Error ? error.message : String(error),\n        transactionType: context.transaction.type,\n        // Never log amounts, addresses, or other transaction details\n      });\n\n      // Fail-secure: return prohibited on any error\n      if (error instanceof PolicyError) {\n        return this.createProhibitedResult(\n          `Policy error: ${error.code}`,\n          'error-handler',\n          startTime\n        );\n      }\n\n      return this.createProhibitedResult(\n        'Internal policy engine error',\n        'error-handler',\n        startTime\n      );\n    }\n  }\n\n  /**\n   * Check global limits.\n   */\n  private checkGlobalLimits(context: PolicyContext): PolicyResult | null {\n    const limitCheck = this.limitTracker.checkLimits(context);\n\n    if (limitCheck.exceeded) {\n      return {\n        allowed: false,\n        tier: 'prohibited',\n        tierNumeric: 4,\n        reason: limitCheck.reason!,\n        matchedRule: `limit-${limitCheck.limitType}`,\n        factors: [\n          {\n            source: 'limit_exceeded',\n            tier: 'prohibited',\n            reason: limitCheck.reason!,\n          },\n        ],\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Check transaction type restrictions.\n   */\n  private checkTransactionType(context: PolicyContext): PolicyResult | null {\n    const txType = context.transaction.type;\n\n    // Check prohibited transaction types\n    const prohibitedTypes =\n      this.policy.tiers.prohibited?.prohibited_transaction_types ?? [];\n    if (prohibitedTypes.includes(txType)) {\n      return {\n        allowed: false,\n        tier: 'prohibited',\n        tierNumeric: 4,\n        reason: `Transaction type ${txType} is prohibited`,\n        matchedRule: 'prohibited-type',\n        factors: [\n          {\n            source: 'prohibited_type',\n            tier: 'prohibited',\n            reason: `Transaction type ${txType} is prohibited`,\n          },\n        ],\n      };\n    }\n\n    // Check per-type configuration\n    const typeConfig = this.policy.transaction_types?.[txType];\n    if (typeConfig?.enabled === false) {\n      return {\n        allowed: false,\n        tier: 'prohibited',\n        tierNumeric: 4,\n        reason: `Transaction type ${txType} is disabled`,\n        matchedRule: 'type-disabled',\n        factors: [\n          {\n            source: 'transaction_type',\n            tier: 'prohibited',\n            reason: `Transaction type ${txType} is disabled`,\n          },\n        ],\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Apply tier-specific constraints and amount escalation.\n   */\n  private applyTierConstraints(\n    ruleResult: {\n      matched: boolean;\n      ruleId: string;\n      ruleName: string;\n      tier: Tier;\n      reason: string;\n      overrideDelaySeconds?: number | undefined;\n      notify?: boolean | undefined;\n    },\n    context: PolicyContext\n  ): PolicyResult {\n    let tier: Tier = ruleResult.tier;\n    const factors: TierFactor[] = [\n      {\n        source: 'rule',\n        tier: ruleResult.tier,\n        reason: ruleResult.reason,\n      },\n    ];\n\n    // Check per-type configuration for require_cosign\n    const typeConfig = this.policy.transaction_types?.[context.transaction.type];\n    if (typeConfig?.require_cosign && tier !== 'prohibited') {\n      tier = this.compareTiers('cosign', tier);\n      if (tier === 'cosign') {\n        factors.push({\n          source: 'transaction_type',\n          tier: 'cosign',\n          reason: `Type ${context.transaction.type} requires co-sign`,\n        });\n      }\n    }\n\n    // Apply amount-based tier escalation\n    tier = this.applyAmountEscalation(tier, context, factors);\n\n    // Check new destination escalation\n    tier = this.applyNewDestinationEscalation(tier, context, factors);\n\n    // Build final result\n    const result: PolicyResult = {\n      allowed: tier !== 'prohibited',\n      tier,\n      tierNumeric: tierToNumeric(tier),\n      reason: factors.find((f) => f.tier === tier)?.reason ?? ruleResult.reason,\n      matchedRule: ruleResult.ruleId,\n      factors,\n    };\n\n    // Add tier-specific details\n    switch (tier) {\n      case 'delayed':\n        result.delaySeconds =\n          ruleResult.overrideDelaySeconds ??\n          this.policy.tiers.delayed?.delay_seconds ??\n          300;\n        result.vetoEnabled = this.policy.tiers.delayed?.veto_enabled ?? true;\n        result.notify =\n          ruleResult.notify ?? this.policy.tiers.delayed?.notify_on_queue ?? true;\n        break;\n\n      case 'cosign':\n        result.signerQuorum = this.policy.tiers.cosign?.signer_quorum ?? 2;\n        result.approvalTimeoutHours =\n          this.policy.tiers.cosign?.approval_timeout_hours ?? 24;\n        result.signerAddresses = this.policy.tiers.cosign?.signer_addresses ?? [];\n        result.notify = ruleResult.notify ?? true;\n        break;\n\n      case 'autonomous':\n        result.notify = ruleResult.notify ?? false;\n        break;\n    }\n\n    return result;\n  }\n\n  /**\n   * Apply amount-based tier escalation.\n   */\n  private applyAmountEscalation(\n    currentTier: Tier,\n    context: PolicyContext,\n    factors: TierFactor[]\n  ): Tier {\n    const amountXrp = context.transaction.amount_xrp ?? 0;\n    const tiers = this.policy.tiers;\n\n    // Check if amount exceeds delayed tier max -> escalate to cosign\n    if (\n      tiers.delayed?.max_amount_xrp !== undefined &&\n      amountXrp > tiers.delayed.max_amount_xrp\n    ) {\n      if (currentTier === 'autonomous' || currentTier === 'delayed') {\n        factors.push({\n          source: 'amount_limit',\n          tier: 'cosign',\n          reason: `Amount ${amountXrp} XRP exceeds delayed tier max (${tiers.delayed.max_amount_xrp})`,\n        });\n        return 'cosign';\n      }\n    }\n\n    // Check if amount exceeds autonomous tier max -> escalate to delayed\n    if (\n      tiers.autonomous?.max_amount_xrp !== undefined &&\n      amountXrp > tiers.autonomous.max_amount_xrp\n    ) {\n      if (currentTier === 'autonomous') {\n        // Check if within delayed range\n        if (\n          tiers.delayed?.max_amount_xrp === undefined ||\n          amountXrp <= tiers.delayed.max_amount_xrp\n        ) {\n          factors.push({\n            source: 'amount_limit',\n            tier: 'delayed',\n            reason: `Amount ${amountXrp} XRP exceeds autonomous tier max (${tiers.autonomous.max_amount_xrp})`,\n          });\n          return 'delayed';\n        }\n      }\n    }\n\n    // Check per-type amount limits\n    const typeConfig = this.policy.transaction_types?.[context.transaction.type];\n    if (typeConfig?.max_amount_xrp !== undefined && amountXrp > typeConfig.max_amount_xrp) {\n      if (currentTier === 'autonomous') {\n        factors.push({\n          source: 'amount_limit',\n          tier: 'delayed',\n          reason: `Amount ${amountXrp} XRP exceeds ${context.transaction.type} limit (${typeConfig.max_amount_xrp})`,\n        });\n        return 'delayed';\n      }\n    }\n\n    return currentTier;\n  }\n\n  /**\n   * Apply new destination escalation.\n   */\n  private applyNewDestinationEscalation(\n    currentTier: Tier,\n    context: PolicyContext,\n    factors: TierFactor[]\n  ): Tier {\n    // Skip if no destination or already prohibited\n    if (!context.transaction.destination || currentTier === 'prohibited') {\n      return currentTier;\n    }\n\n    // Check if destination is in allowlist\n    if (isInAllowlist(context, this.policy)) {\n      return currentTier;\n    }\n\n    let resultTier = currentTier;\n\n    // Check if autonomous tier requires known destination\n    if (\n      resultTier === 'autonomous' &&\n      this.policy.tiers.autonomous?.require_known_destination\n    ) {\n      factors.push({\n        source: 'new_destination',\n        tier: 'delayed',\n        reason: 'Destination not in allowlist (require_known_destination enabled)',\n      });\n      resultTier = 'delayed';\n    }\n\n    // Check if cosign always required for new destinations\n    // This can further escalate from autonomous or delayed to cosign\n    if (this.policy.tiers.cosign?.new_destination_always) {\n      // Check if destination is known from today's transactions\n      const isKnown = this.limitTracker.isDestinationKnown(\n        context.transaction.destination\n      );\n\n      if (!isKnown) {\n        const newTier = this.compareTiers('cosign', resultTier);\n        if (newTier === 'cosign' && resultTier !== 'cosign') {\n          factors.push({\n            source: 'new_destination',\n            tier: 'cosign',\n            reason: 'First transaction to new destination',\n          });\n          resultTier = 'cosign';\n        }\n      }\n    }\n\n    return resultTier;\n  }\n\n  /**\n   * Compare two tiers and return the more restrictive one.\n   */\n  private compareTiers(tier1: Tier, tier2: Tier): Tier {\n    const tierOrder: Record<Tier, number> = {\n      autonomous: 1,\n      delayed: 2,\n      cosign: 3,\n      prohibited: 4,\n    };\n\n    return tierOrder[tier1] > tierOrder[tier2] ? tier1 : tier2;\n  }\n\n  /**\n   * Create a prohibited result.\n   */\n  private createProhibitedResult(\n    reason: string,\n    matchedRule: string,\n    startTime: number,\n    injectionDetected?: boolean\n  ): PolicyResult {\n    const result: PolicyResult = {\n      allowed: false,\n      tier: 'prohibited',\n      tierNumeric: 4,\n      reason,\n      matchedRule,\n      evaluationTimeMs: performance.now() - startTime,\n    };\n    if (injectionDetected !== undefined) {\n      result.injectionDetected = injectionDetected;\n    }\n    return result;\n  }\n\n  // ============================================================================\n  // PUBLIC METHODS\n  // ============================================================================\n\n  /**\n   * Get policy hash.\n   */\n  getPolicyHash(): string {\n    return this.policyHash;\n  }\n\n  /**\n   * Get policy info.\n   */\n  getPolicyInfo(): PolicyInfo {\n    const info: PolicyInfo = {\n      name: this.policy.name,\n      version: this.policy.version,\n      network: this.policy.network,\n      enabled: this.policy.enabled,\n      loadedAt: this.loadedAt,\n      hash: this.policyHash.slice(0, 16),\n      ruleCount: this.policy.rules.length,\n      enabledRuleCount: this.ruleEvaluator.getRuleCount(),\n    };\n    if (this.policy.description !== undefined) {\n      info.description = this.policy.description;\n    }\n    return info;\n  }\n\n  /**\n   * Verify policy integrity.\n   */\n  verifyIntegrity(): boolean {\n    const currentHash = this.computeHash(this.policy);\n    return currentHash === this.policyHash;\n  }\n\n  /**\n   * Get limit state.\n   */\n  getLimitState(): LimitState {\n    return this.limitTracker.getState();\n  }\n\n  /**\n   * Reset limits.\n   */\n  resetLimits(confirmation: string): void {\n    this.limitTracker.reset(confirmation);\n  }\n\n  /**\n   * Record a successful transaction.\n   */\n  recordTransaction(context: PolicyContext): void {\n    this.limitTracker.recordTransaction(context);\n  }\n\n  /**\n   * Dispose of resources.\n   */\n  dispose(): void {\n    this.limitTracker.dispose();\n  }\n\n  /**\n   * Simplified transaction evaluation for MCP tools.\n   * Creates a PolicyContext internally from the simple transaction context.\n   */\n  async evaluateTransaction(\n    policyId: string,\n    txContext: SimpleTransactionContext\n  ): Promise<SimpleEvaluationResult> {\n    // Validate policy ID matches (basic check)\n    const policyInfo = this.getPolicyInfo();\n    if (policyId !== policyInfo.name && policyId !== policyInfo.hash) {\n      // Policy mismatch is a warning, not a failure\n      console.warn(`Policy ID mismatch: expected ${policyInfo.name}, got ${policyId}`);\n    }\n\n    // Convert amount_drops to XRP\n    let amountXrp: number | undefined;\n    if (txContext.amount_drops) {\n      amountXrp = Number(BigInt(txContext.amount_drops)) / 1_000_000;\n    }\n\n    // Create full PolicyContext from simple context\n    // Build transaction context, only including defined properties\n    const transactionCtx: TransactionContext = {\n      type: txContext.type as TransactionType,\n    };\n    if (txContext.destination !== undefined) {\n      transactionCtx.destination = txContext.destination;\n    }\n    if (amountXrp !== undefined) {\n      transactionCtx.amount_xrp = amountXrp;\n    }\n    if (txContext.memo !== undefined) {\n      transactionCtx.memo = txContext.memo;\n    }\n\n    const fullContext: PolicyContext = {\n      transaction: transactionCtx,\n      wallet: {\n        address: '', // Not relevant for policy evaluation\n        network: this.policy.network,\n      },\n      timestamp: new Date(),\n      correlationId: `eval_${Date.now()}_${Math.random().toString(36).slice(2, 10)}`,\n    };\n\n    // Evaluate using the full engine\n    const result = this.evaluate(fullContext);\n\n    // Convert to simple result\n    const simpleResult: SimpleEvaluationResult = {\n      tier: result.tierNumeric,\n      reason: result.reason,\n      allowed: result.allowed,\n    };\n\n    // Add violations for prohibited tier\n    if (result.tier === 'prohibited') {\n      simpleResult.violations = [result.reason];\n      if (result.injectionDetected) {\n        simpleResult.violations.push('Potential prompt injection detected in memo');\n      }\n    }\n\n    // Add warnings from factors\n    if (result.factors && result.factors.length > 1) {\n      simpleResult.warnings = result.factors\n        .filter(f => f.tier !== result.tier)\n        .map(f => f.reason);\n    }\n\n    return simpleResult;\n  }\n\n  /**\n   * Set or update the policy configuration.\n   *\n   * NOTE: PolicyEngine is IMMUTABLE by design (ADR-003 security requirement).\n   * This method throws an error to prevent silent failures.\n   *\n   * To update a policy, you must:\n   * 1. Create a new PolicyEngine instance with the new policy\n   * 2. Replace the old engine atomically at the server level\n   * 3. Consider requiring human approval for policy changes\n   *\n   * @throws PolicyLoadError always - policies cannot be changed at runtime\n   */\n  async setPolicy(policy: AgentWalletPolicy): Promise<void> {\n    // PolicyEngine is immutable by design (security requirement per ADR-003).\n    // This prevents an LLM/agent from modifying its own policies at runtime.\n    //\n    // To change a policy:\n    // 1. Stop the server\n    // 2. Update the policy configuration file\n    // 3. Restart the server with the new policy\n    //\n    // Or implement a controlled reload mechanism at the server level that:\n    // 1. Creates a new PolicyEngine with the new policy\n    // 2. Swaps the engines atomically\n    // 3. Logs the change to the audit trail\n    throw new PolicyLoadError(\n      `Policy updates are not supported at runtime (ADR-003 immutability requirement). ` +\n        `Requested policy: ${policy.policy_id} v${policy.policy_version}. ` +\n        `To update policies, restart the server with the new policy configuration.`\n    );\n  }\n\n  // ============================================================================\n  // PRIVATE HELPERS\n  // ============================================================================\n\n  /**\n   * Compute SHA-256 hash of policy.\n   */\n  private computeHash(policy: InternalPolicy | Readonly<InternalPolicy>): string {\n    const content = JSON.stringify(policy);\n    return createHash('sha256').update(content).digest('hex');\n  }\n\n  /**\n   * Deep freeze an object.\n   */\n  private deepFreeze<T extends object>(obj: T): Readonly<T> {\n    const propNames = Object.getOwnPropertyNames(obj);\n\n    for (const name of propNames) {\n      const value = (obj as Record<string, unknown>)[name];\n      if (value && typeof value === 'object') {\n        this.deepFreeze(value as object);\n      }\n    }\n\n    return Object.freeze(obj);\n  }\n}\n\n// ============================================================================\n// FACTORY FUNCTIONS\n// ============================================================================\n\n/**\n * Create a PolicyEngine from an AgentWalletPolicy.\n */\nexport function createPolicyEngine(\n  policy: AgentWalletPolicy,\n  options?: PolicyEngineOptions\n): PolicyEngine {\n  // Convert AgentWalletPolicy to InternalPolicy format\n  const internalPolicy: InternalPolicy = {\n    version: policy.policy_version,\n    name: policy.policy_id,\n    network: 'mainnet', // Default, should be provided externally\n    enabled: true,\n    tiers: {\n      autonomous: {\n        max_amount_xrp: dropsToXrp(policy.limits.max_amount_per_tx_drops),\n        daily_limit_xrp: dropsToXrp(policy.limits.max_daily_volume_drops),\n        require_known_destination:\n          policy.destinations.mode === 'allowlist' ||\n          !policy.destinations.allow_new_destinations,\n        allowed_transaction_types: policy.transaction_types.allowed,\n      },\n      delayed: {\n        max_amount_xrp: dropsToXrp(policy.escalation.amount_threshold_drops),\n        delay_seconds: policy.escalation.delay_seconds ?? 300,\n        veto_enabled: true,\n        notify_on_queue: true,\n      },\n      cosign: {\n        signer_quorum: 2,\n        new_destination_always: policy.escalation.new_destination === 3,\n        approval_timeout_hours: 24,\n      },\n      prohibited: {\n        prohibited_transaction_types: policy.transaction_types.blocked ?? [],\n      },\n    },\n    rules: buildRulesFromPolicy(policy),\n    blocklist: {\n      addresses: policy.destinations.blocklist ?? [],\n    },\n    allowlist: {\n      addresses:\n        policy.destinations.mode === 'allowlist'\n          ? policy.destinations.allowlist ?? []\n          : [],\n    },\n    limits: {\n      daily_reset_utc_hour: 0,\n      max_transactions_per_hour: policy.limits.max_tx_per_hour,\n      max_transactions_per_day: policy.limits.max_tx_per_day,\n      max_total_volume_xrp_per_day: dropsToXrp(policy.limits.max_daily_volume_drops),\n    },\n  };\n\n  return new PolicyEngine(internalPolicy, options);\n}\n\n/**\n * Convert drops string to XRP number.\n */\nfunction dropsToXrp(drops: string): number {\n  return Number(BigInt(drops)) / 1_000_000;\n}\n\n/**\n * Build rules from AgentWalletPolicy.\n */\nfunction buildRulesFromPolicy(policy: AgentWalletPolicy): PolicyRule[] {\n  const rules: PolicyRule[] = [];\n  let priority = 1;\n\n  // Rule: Check blocklist first\n  if (policy.destinations.blocklist && policy.destinations.blocklist.length > 0) {\n    rules.push({\n      id: 'blocklist-check',\n      name: 'Blocklist Check',\n      priority: priority++,\n      condition: {\n        field: 'destination',\n        operator: 'in',\n        value: { ref: 'blocklist.addresses' },\n      },\n      action: {\n        tier: 'prohibited',\n        reason: 'Destination is blocklisted',\n      },\n    });\n  }\n\n  // Rule: Check blocked transaction types\n  if (policy.transaction_types.blocked && policy.transaction_types.blocked.length > 0) {\n    for (const txType of policy.transaction_types.blocked) {\n      rules.push({\n        id: `block-${txType.toLowerCase()}`,\n        name: `Block ${txType}`,\n        priority: priority++,\n        condition: {\n          field: 'transaction_type',\n          operator: '==',\n          value: txType,\n        },\n        action: {\n          tier: 'prohibited',\n          reason: `Transaction type ${txType} is not allowed`,\n        },\n      });\n    }\n  }\n\n  // Rule: Require approval transaction types\n  if (\n    policy.transaction_types.require_approval &&\n    policy.transaction_types.require_approval.length > 0\n  ) {\n    for (const txType of policy.transaction_types.require_approval) {\n      rules.push({\n        id: `require-approval-${txType.toLowerCase()}`,\n        name: `Require Approval for ${txType}`,\n        priority: priority++,\n        condition: {\n          field: 'transaction_type',\n          operator: '==',\n          value: txType,\n        },\n        action: {\n          tier: 'cosign',\n          reason: `Transaction type ${txType} requires approval`,\n        },\n      });\n    }\n  }\n\n  // Rule: High value transactions\n  const thresholdXrp = dropsToXrp(policy.escalation.amount_threshold_drops);\n  rules.push({\n    id: 'high-value-cosign',\n    name: 'High Value Transaction',\n    priority: priority++,\n    condition: {\n      field: 'amount_xrp',\n      operator: '>=',\n      value: thresholdXrp,\n    },\n    action: {\n      tier: policy.escalation.new_destination === 3 ? 'cosign' : 'delayed',\n      reason: `Amount exceeds ${thresholdXrp} XRP threshold`,\n    },\n  });\n\n  // Rule: New destination handling\n  if (\n    policy.destinations.mode === 'allowlist' ||\n    !policy.destinations.allow_new_destinations\n  ) {\n    rules.push({\n      id: 'new-destination-check',\n      name: 'New Destination Check',\n      priority: priority++,\n      condition: {\n        not: {\n          field: 'destination',\n          operator: 'in',\n          value: { ref: 'allowlist.addresses' },\n        },\n      },\n      action: {\n        tier:\n          policy.destinations.new_destination_tier === 3\n            ? 'cosign'\n            : policy.destinations.new_destination_tier === 2\n              ? 'delayed'\n              : 'prohibited',\n        reason: 'Destination not in allowlist',\n      },\n    });\n  }\n\n  // Rule: Default allow for configured types\n  rules.push({\n    id: 'default-allow',\n    name: 'Default Allow',\n    priority: 999,\n    condition: {\n      always: true,\n    },\n    action: {\n      tier: 'autonomous',\n      reason: 'Transaction within policy limits',\n    },\n  });\n\n  return rules;\n}\n\n/**\n * Create a simple test policy for development.\n */\nexport function createTestPolicy(\n  network: 'mainnet' | 'testnet' | 'devnet' = 'testnet',\n  overrides?: Partial<InternalPolicy>\n): InternalPolicy {\n  const basePolicy: InternalPolicy = {\n    version: '1.0',\n    name: `${network}-test-policy`,\n    description: 'Test policy for development',\n    network,\n    enabled: true,\n    tiers: {\n      autonomous: {\n        max_amount_xrp: network === 'mainnet' ? 100 : 10000,\n        daily_limit_xrp: network === 'mainnet' ? 1000 : 100000,\n        require_known_destination: network === 'mainnet',\n        allowed_transaction_types: ['Payment', 'EscrowFinish', 'EscrowCancel'],\n      },\n      delayed: {\n        max_amount_xrp: network === 'mainnet' ? 1000 : 100000,\n        delay_seconds: network === 'mainnet' ? 300 : 60,\n        veto_enabled: true,\n        notify_on_queue: true,\n      },\n      cosign: {\n        signer_quorum: 2,\n        new_destination_always: network === 'mainnet',\n        approval_timeout_hours: 24,\n      },\n      prohibited: {\n        prohibited_transaction_types: ['Clawback'],\n      },\n    },\n    rules: [\n      {\n        id: 'default-allow',\n        name: 'Default Allow',\n        priority: 999,\n        condition: { always: true },\n        action: { tier: 'autonomous', reason: 'Within policy limits' },\n      },\n    ],\n    blocklist: {\n      addresses: [],\n      memo_patterns: ['ignore.*previous', '\\\\[INST\\\\]', '<<SYS>>'],\n    },\n    allowlist: {\n      addresses: [],\n    },\n    limits: {\n      daily_reset_utc_hour: 0,\n      max_transactions_per_hour: network === 'mainnet' ? 50 : 1000,\n      max_transactions_per_day: network === 'mainnet' ? 200 : 10000,\n      max_unique_destinations_per_day: network === 'mainnet' ? 20 : 500,\n      max_total_volume_xrp_per_day: network === 'mainnet' ? 5000 : 10000000,\n    },\n  };\n\n  // Merge overrides\n  if (overrides) {\n    return deepMerge(basePolicy, overrides) as InternalPolicy;\n  }\n\n  return basePolicy;\n}\n\n/**\n * Deep merge two objects.\n */\nfunction deepMerge<T extends object>(target: T, source: Partial<T>): T {\n  const result = { ...target };\n\n  for (const key of Object.keys(source) as (keyof T)[]) {\n    const sourceValue = source[key];\n    const targetValue = target[key];\n\n    if (\n      sourceValue !== undefined &&\n      typeof sourceValue === 'object' &&\n      sourceValue !== null &&\n      !Array.isArray(sourceValue) &&\n      typeof targetValue === 'object' &&\n      targetValue !== null &&\n      !Array.isArray(targetValue)\n    ) {\n      (result as Record<string, unknown>)[key as string] = deepMerge(\n        targetValue as object,\n        sourceValue as object\n      );\n    } else if (sourceValue !== undefined) {\n      (result as Record<string, unknown>)[key as string] = sourceValue;\n    }\n  }\n\n  return result;\n}\n","/**\n * SecureBuffer - Memory-safe container for sensitive cryptographic data.\n *\n * This class provides controlled access to sensitive data (private keys, seeds)\n * with automatic memory zeroing and serialization prevention.\n *\n * Security Features:\n * - Automatic zeroing of source buffer on creation\n * - Explicit disposal with multiple overwrite passes\n * - Prevention of accidental serialization (JSON, toString)\n * - Clear lifecycle tracking\n *\n * @module keystore/secure-buffer\n * @version 1.0.0\n */\n\n/**\n * SecureBuffer provides memory-safe handling of sensitive data.\n *\n * USAGE:\n * ```typescript\n * const secure = SecureBuffer.from(sensitiveData);\n * try {\n *   // Use secure.getBuffer() for operations\n *   const result = someOperation(secure.getBuffer());\n * } finally {\n *   secure.dispose(); // Always dispose when done\n * }\n * ```\n *\n * SECURITY NOTES:\n * - Source buffer is zeroed when creating from existing data\n * - Buffer contents are overwritten with multiple passes on dispose\n * - Serialization methods throw to prevent accidental exposure\n */\nexport class SecureBuffer {\n  private buffer: Buffer;\n  private isDisposed: boolean = false;\n\n  /**\n   * Private constructor - use static factory methods.\n   */\n  private constructor(size: number) {\n    // Use allocUnsafe for performance since we'll fill it immediately\n    this.buffer = Buffer.allocUnsafe(size);\n  }\n\n  /**\n   * Creates a new SecureBuffer with uninitialized content of specified size.\n   *\n   * @param size - Size in bytes\n   * @returns New SecureBuffer instance\n   */\n  static alloc(size: number): SecureBuffer {\n    if (size <= 0) {\n      throw new Error('SecureBuffer size must be positive');\n    }\n    const secure = new SecureBuffer(size);\n    // Fill with zeros for safety\n    secure.buffer.fill(0);\n    return secure;\n  }\n\n  /**\n   * Creates a SecureBuffer from existing data.\n   *\n   * IMPORTANT: The source buffer is zeroed immediately after copying\n   * to prevent the original data from remaining in memory.\n   *\n   * @param data - Source buffer (will be zeroed)\n   * @param verify - If true, verify source was zeroed (default: false for performance)\n   * @returns New SecureBuffer containing the copied data\n   */\n  static from(data: Buffer, verify: boolean = false): SecureBuffer {\n    if (!Buffer.isBuffer(data)) {\n      throw new Error('SecureBuffer.from requires a Buffer');\n    }\n    if (data.length === 0) {\n      throw new Error('SecureBuffer cannot be empty');\n    }\n\n    const secure = new SecureBuffer(data.length);\n    // Copy data to secure buffer\n    data.copy(secure.buffer);\n    // Zero the source buffer immediately\n    data.fill(0);\n\n    // Optionally verify the source was zeroed\n    if (verify) {\n      const zeroBuffer = Buffer.alloc(data.length, 0);\n      if (!data.equals(zeroBuffer)) {\n        // This should not happen - indicates a serious issue\n        throw new Error('SecureBuffer: Source buffer zeroing verification failed');\n      }\n    }\n\n    return secure;\n  }\n\n  /**\n   * Gets the buffer contents for use in cryptographic operations.\n   *\n   * @returns The internal Buffer\n   * @throws Error if buffer has been disposed\n   */\n  getBuffer(): Buffer {\n    if (this.isDisposed) {\n      throw new Error('SecureBuffer has been disposed');\n    }\n    return this.buffer;\n  }\n\n  /**\n   * Disposes the buffer by securely zeroing its contents.\n   *\n   * This operation is irreversible. Multiple overwrite passes are used\n   * to help prevent data recovery.\n   */\n  dispose(): void {\n    if (!this.isDisposed) {\n      // Multiple overwrite passes for secure deletion\n      // Pass 1: Zeros\n      this.buffer.fill(0x00);\n      // Pass 2: Ones\n      this.buffer.fill(0xff);\n      // Pass 3: Zeros again\n      this.buffer.fill(0x00);\n\n      this.isDisposed = true;\n    }\n  }\n\n  /**\n   * Alias for dispose() - matches common naming conventions.\n   */\n  zero(): void {\n    this.dispose();\n  }\n\n  /**\n   * Returns whether the buffer has been disposed.\n   */\n  get disposed(): boolean {\n    return this.isDisposed;\n  }\n\n  /**\n   * Alias for disposed getter - matches spec naming.\n   */\n  get zeroed(): boolean {\n    return this.isDisposed;\n  }\n\n  /**\n   * Buffer length in bytes.\n   */\n  get length(): number {\n    return this.buffer.length;\n  }\n\n  /**\n   * Executes an operation with the buffer and ensures cleanup on completion.\n   *\n   * The SecureBuffer is automatically disposed after the operation,\n   * regardless of success or failure.\n   *\n   * @param secure - SecureBuffer to use\n   * @param operation - Async operation that uses the buffer\n   * @returns Result of the operation\n   */\n  static async withSecure<T>(\n    secure: SecureBuffer,\n    operation: (buffer: Buffer) => Promise<T>\n  ): Promise<T> {\n    try {\n      return await operation(secure.getBuffer());\n    } finally {\n      secure.dispose();\n    }\n  }\n\n  /**\n   * Creates a SecureBuffer, executes an operation, and disposes it.\n   *\n   * @param data - Source buffer (will be zeroed)\n   * @param operation - Async operation that uses the buffer\n   * @returns Result of the operation\n   */\n  static async withSecureBuffer<T>(\n    data: Buffer,\n    operation: (buffer: Buffer) => Promise<T>\n  ): Promise<T> {\n    const secure = SecureBuffer.from(data);\n    try {\n      return await operation(secure.getBuffer());\n    } finally {\n      secure.dispose();\n    }\n  }\n\n  // ========================================================================\n  // Serialization Prevention\n  // ========================================================================\n\n  /**\n   * Prevents JSON serialization of sensitive data.\n   * @throws Error always\n   */\n  toJSON(): never {\n    throw new Error('SecureBuffer cannot be serialized to JSON');\n  }\n\n  /**\n   * Returns a placeholder string instead of buffer contents.\n   */\n  toString(): string {\n    return '[SecureBuffer]';\n  }\n\n  /**\n   * Custom Node.js inspection - prevents accidental logging of contents.\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return `[SecureBuffer length=${this.length} disposed=${this.isDisposed}]`;\n  }\n\n  /**\n   * Prevents spreading/iteration of buffer contents.\n   */\n  [Symbol.iterator](): never {\n    throw new Error('SecureBuffer cannot be iterated');\n  }\n}\n","/**\n * Keystore Error Types\n *\n * Defines all error types for keystore operations.\n * All errors extend the base KeystoreError class.\n *\n * @module keystore/errors\n * @version 1.0.0\n */\n\nimport type { XRPLNetwork, KeystoreProviderType } from './interface.js';\n\n/**\n * Error codes for keystore operations.\n */\nexport type KeystoreErrorCode =\n  | 'KEYSTORE_INIT_ERROR'\n  | 'WALLET_NOT_FOUND'\n  | 'WALLET_EXISTS'\n  | 'AUTHENTICATION_ERROR'\n  | 'WEAK_PASSWORD'\n  | 'KEY_DECRYPTION_ERROR'\n  | 'KEY_ENCRYPTION_ERROR'\n  | 'INVALID_KEY_FORMAT'\n  | 'KEYSTORE_WRITE_ERROR'\n  | 'KEYSTORE_READ_ERROR'\n  | 'KEYSTORE_CAPACITY_ERROR'\n  | 'BACKUP_FORMAT_ERROR'\n  | 'NETWORK_MISMATCH'\n  | 'PROVIDER_UNAVAILABLE'\n  | 'OPERATION_TIMEOUT'\n  | 'INTERNAL_ERROR';\n\n/**\n * Base error class for all keystore operations.\n *\n * All keystore errors include:\n * - A specific error code for programmatic handling\n * - Whether the error is recoverable\n * - Timestamp of when the error occurred\n * - Optional additional details\n */\nexport abstract class KeystoreError extends Error {\n  /** Error code for programmatic handling */\n  abstract readonly code: KeystoreErrorCode;\n\n  /** Whether this error is recoverable (can be retried) */\n  abstract readonly recoverable: boolean;\n\n  /** Timestamp when error occurred */\n  readonly timestamp: string;\n\n  /** Correlation ID for tracking */\n  readonly correlationId?: string;\n\n  constructor(\n    message: string,\n    public readonly details?: Record<string, unknown>\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n    this.timestamp = new Date().toISOString();\n\n    // Maintain proper stack trace in V8\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n\n  /**\n   * Convert to safe JSON representation (excludes sensitive data).\n   */\n  toSafeJSON(): Record<string, unknown> {\n    return {\n      code: this.code,\n      message: this.message,\n      recoverable: this.recoverable,\n      timestamp: this.timestamp,\n      correlationId: this.correlationId,\n    };\n  }\n}\n\n// ============================================================================\n// Initialization Errors\n// ============================================================================\n\n/**\n * Keystore initialization failed.\n */\nexport class KeystoreInitializationError extends KeystoreError {\n  readonly code = 'KEYSTORE_INIT_ERROR' as const;\n  readonly recoverable = false;\n\n  readonly originalCause: Error | undefined;\n\n  constructor(message: string, originalCause?: Error) {\n    super(message, { cause: originalCause?.message });\n    this.originalCause = originalCause;\n  }\n}\n\n// ============================================================================\n// Wallet Errors\n// ============================================================================\n\n/**\n * Wallet not found in keystore.\n */\nexport class WalletNotFoundError extends KeystoreError {\n  readonly code = 'WALLET_NOT_FOUND' as const;\n  readonly recoverable = false;\n\n  constructor(public readonly walletId: string) {\n    super(`Wallet not found: ${walletId}`, { walletId });\n  }\n}\n\n/**\n * Wallet already exists (duplicate ID or address).\n */\nexport class WalletExistsError extends KeystoreError {\n  readonly code = 'WALLET_EXISTS' as const;\n  readonly recoverable = false;\n\n  constructor(\n    public readonly walletId: string,\n    public readonly existingAddress?: string\n  ) {\n    super(`Wallet already exists: ${walletId}`, { walletId, existingAddress });\n  }\n}\n\n// ============================================================================\n// Authentication Errors\n// ============================================================================\n\n/**\n * Authentication failed (wrong password).\n *\n * Note: Intentionally vague message to prevent enumeration attacks.\n */\nexport class AuthenticationError extends KeystoreError {\n  readonly code = 'AUTHENTICATION_ERROR' as const;\n  readonly recoverable = true;\n\n  constructor() {\n    super('Authentication failed');\n    // No details to prevent password guessing attacks\n  }\n}\n\n/**\n * Password does not meet complexity requirements.\n */\nexport class WeakPasswordError extends KeystoreError {\n  readonly code = 'WEAK_PASSWORD' as const;\n  readonly recoverable = true;\n\n  constructor(public readonly requirements: string[]) {\n    super('Password does not meet security requirements', { requirements });\n  }\n}\n\n// ============================================================================\n// Cryptographic Errors\n// ============================================================================\n\n/**\n * Key decryption failed.\n * Could be wrong password, corrupted data, or algorithm mismatch.\n */\nexport class KeyDecryptionError extends KeystoreError {\n  readonly code = 'KEY_DECRYPTION_ERROR' as const;\n  readonly recoverable = false;\n\n  constructor(message: string = 'Key decryption failed') {\n    super(message);\n  }\n}\n\n/**\n * Key encryption failed during storage.\n */\nexport class KeyEncryptionError extends KeystoreError {\n  readonly code = 'KEY_ENCRYPTION_ERROR' as const;\n  readonly recoverable = false;\n\n  constructor(message: string = 'Key encryption failed') {\n    super(message);\n  }\n}\n\n/**\n * Invalid key format or length.\n */\nexport class InvalidKeyError extends KeystoreError {\n  readonly code = 'INVALID_KEY_FORMAT' as const;\n  readonly recoverable = false;\n\n  constructor(\n    public readonly reason: string,\n    public readonly expectedFormat?: string\n  ) {\n    super(`Invalid key format: ${reason}`, { reason, expectedFormat });\n  }\n}\n\n// ============================================================================\n// Storage Errors\n// ============================================================================\n\n/**\n * Keystore write operation failed.\n */\nexport class KeystoreWriteError extends KeystoreError {\n  readonly code = 'KEYSTORE_WRITE_ERROR' as const;\n  readonly recoverable = true;\n\n  constructor(\n    message: string,\n    public readonly operation: 'create' | 'update' | 'delete'\n  ) {\n    super(message, { operation });\n  }\n}\n\n/**\n * Keystore read operation failed.\n */\nexport class KeystoreReadError extends KeystoreError {\n  readonly code = 'KEYSTORE_READ_ERROR' as const;\n  readonly recoverable = true;\n\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/**\n * Keystore capacity limit reached.\n */\nexport class KeystoreCapacityError extends KeystoreError {\n  readonly code = 'KEYSTORE_CAPACITY_ERROR' as const;\n  readonly recoverable = false;\n\n  constructor(\n    public readonly network: XRPLNetwork,\n    public readonly currentCount: number,\n    public readonly maxCount: number\n  ) {\n    super(`Keystore capacity exceeded for ${network}`, {\n      network,\n      currentCount,\n      maxCount,\n    });\n  }\n}\n\n// ============================================================================\n// Backup Errors\n// ============================================================================\n\n/**\n * Backup format invalid or unsupported.\n */\nexport class BackupFormatError extends KeystoreError {\n  readonly code = 'BACKUP_FORMAT_ERROR' as const;\n  readonly recoverable = false;\n\n  constructor(\n    public readonly reason: string,\n    public readonly expectedVersion?: number\n  ) {\n    super(`Invalid backup format: ${reason}`, { reason, expectedVersion });\n  }\n}\n\n// ============================================================================\n// Network Errors\n// ============================================================================\n\n/**\n * Network mismatch between wallet and operation.\n */\nexport class NetworkMismatchError extends KeystoreError {\n  readonly code = 'NETWORK_MISMATCH' as const;\n  readonly recoverable = false;\n\n  constructor(\n    public readonly walletNetwork: XRPLNetwork,\n    public readonly requestedNetwork: XRPLNetwork\n  ) {\n    super(`Network mismatch: wallet is ${walletNetwork}, requested ${requestedNetwork}`, {\n      walletNetwork,\n      requestedNetwork,\n    });\n  }\n}\n\n/**\n * Provider service unavailable.\n */\nexport class ProviderUnavailableError extends KeystoreError {\n  readonly code = 'PROVIDER_UNAVAILABLE' as const;\n  readonly recoverable = true;\n\n  constructor(\n    public readonly providerType: KeystoreProviderType,\n    public readonly reason: string\n  ) {\n    super(`Provider unavailable: ${reason}`, { providerType, reason });\n  }\n}\n\n// ============================================================================\n// Type Guards\n// ============================================================================\n\n/**\n * Type guard to check if an error is a KeystoreError.\n */\nexport function isKeystoreError(error: unknown): error is KeystoreError {\n  return error instanceof KeystoreError;\n}\n\n/**\n * Type guard to check if error is a specific keystore error code.\n */\nexport function isKeystoreErrorCode(error: unknown, code: KeystoreErrorCode): boolean {\n  return isKeystoreError(error) && error.code === code;\n}\n","/**\n * Local File Keystore Provider\n *\n * Implements secure local file-based storage for XRPL wallet private keys\n * using AES-256-GCM encryption and Argon2id key derivation.\n *\n * Security Features:\n * - AES-256-GCM encryption for all key material\n * - Argon2id key derivation (64MB memory, 3 iterations, 4 parallelism)\n * - Unique salt per wallet, unique IV per encryption\n * - Atomic file writes (temp + rename)\n * - Strict file permissions (0600)\n * - Network isolation (mainnet/testnet/devnet separated)\n * - Rate limiting for authentication attempts\n *\n * @module keystore/local\n * @version 1.0.0\n */\n\nimport { promises as fs } from 'fs';\nimport * as path from 'path';\nimport * as crypto from 'crypto';\nimport * as argon2 from 'argon2';\nimport { Wallet, ECDSA } from 'xrpl';\n\nimport { SecureBuffer } from './secure-buffer.js';\nimport {\n  type KeystoreProvider,\n  type KeystoreConfig,\n  type KeystoreHealthResult,\n  type WalletEntry,\n  type WalletSummary,\n  type WalletPolicy,\n  type WalletCreateOptions,\n  type WalletMetadata,\n  type EncryptedBackup,\n  type ImportOptions,\n  type BackupFormat,\n  type XRPLNetwork,\n  type PasswordPolicy,\n  type KdfParams,\n} from './interface.js';\nimport {\n  KeystoreInitializationError,\n  WalletNotFoundError,\n  WalletExistsError,\n  AuthenticationError,\n  WeakPasswordError,\n  KeyDecryptionError,\n  KeystoreWriteError,\n  KeystoreCapacityError,\n  BackupFormatError,\n  InvalidKeyError,\n} from './errors.js';\n\n// ============================================================================\n// Constants\n// ============================================================================\n\n/**\n * Argon2id configuration per ADR-002.\n */\nconst ARGON2_CONFIG = {\n  type: argon2.argon2id,\n  memoryCost: 65536, // 64 MB\n  timeCost: 3, // 3 iterations\n  parallelism: 4, // 4 threads\n  hashLength: 32, // 256-bit output\n  saltLength: 32, // 256-bit salt\n} as const;\n\n/**\n * AES-256-GCM configuration per ADR-001.\n */\nconst AES_CONFIG = {\n  algorithm: 'aes-256-gcm' as const,\n  keyLength: 32, // 256 bits\n  ivLength: 12, // 96 bits (NIST recommended for GCM)\n  authTagLength: 16, // 128 bits\n} as const;\n\n/**\n * File permission constants.\n */\nconst PERMISSIONS = {\n  FILE: 0o600, // Owner read/write only (rw-------)\n  DIRECTORY: 0o700, // Owner read/write/execute only (rwx------)\n} as const;\n\n/**\n * Default password policy.\n */\nconst DEFAULT_PASSWORD_POLICY: PasswordPolicy = {\n  minLength: 12,\n  requireUppercase: true,\n  requireLowercase: true,\n  requireNumbers: true,\n  requireSpecial: false,\n  maxLength: 128,\n};\n\n/**\n * Rate limiting configuration.\n */\nconst RATE_LIMIT_CONFIG = {\n  maxAttempts: 5, // Max failed attempts\n  windowSeconds: 900, // 15 minute window\n  lockoutSeconds: 1800, // 30 minute initial lockout\n  lockoutMultiplier: 2, // Doubles each time\n} as const;\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/**\n * Wallet file format stored on disk.\n */\ninterface WalletFile {\n  /** File format version */\n  version: 1;\n  /** Unique wallet identifier */\n  walletId: string;\n  /** Wallet metadata and public information */\n  entry: WalletEntry;\n  /** Encrypted private key material */\n  encryptedKey: {\n    /** Base64-encoded encrypted seed/key */\n    data: string;\n    /** Base64-encoded initialization vector (12 bytes) */\n    iv: string;\n    /** Base64-encoded GCM authentication tag (16 bytes) */\n    authTag: string;\n  };\n}\n\n/**\n * Wallet index stored per network.\n */\ninterface WalletIndex {\n  /** Index format version */\n  version: 1;\n  /** List of wallet entries (metadata only, no keys) */\n  wallets: WalletEntry[];\n  /** Last modification timestamp */\n  modifiedAt: string;\n}\n\n/**\n * Authentication attempt record.\n */\ninterface AuthAttemptRecord {\n  timestamp: Date;\n  success: boolean;\n  reason?: string;\n}\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Validates password against policy requirements.\n *\n * @param password - Password to validate\n * @param policy - Password policy to check against\n * @returns Array of error messages (empty if valid)\n */\nfunction validatePassword(password: string, policy: PasswordPolicy): string[] {\n  const errors: string[] = [];\n\n  if (password.length < policy.minLength) {\n    errors.push(`Minimum ${policy.minLength} characters required`);\n  }\n  if (password.length > policy.maxLength) {\n    errors.push(`Maximum ${policy.maxLength} characters allowed`);\n  }\n  if (policy.requireUppercase && !/[A-Z]/.test(password)) {\n    errors.push('Must contain uppercase letter');\n  }\n  if (policy.requireLowercase && !/[a-z]/.test(password)) {\n    errors.push('Must contain lowercase letter');\n  }\n  if (policy.requireNumbers && !/\\d/.test(password)) {\n    errors.push('Must contain number');\n  }\n  if (policy.requireSpecial && !/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password)) {\n    errors.push('Must contain special character');\n  }\n\n  return errors;\n}\n\n/**\n * Simple file locking mechanism for concurrent access safety.\n */\n/**\n * FileLock provides both in-process and file-system level locking.\n *\n * Features:\n * - In-process mutex to handle concurrent async operations\n * - File-based lock files for cross-process safety\n * - Automatic lock cleanup on timeout\n * - Stale lock detection\n */\nclass FileLock {\n  private inProcessLocks = new Map<string, Promise<void>>();\n  private static readonly LOCK_TIMEOUT_MS = 30000; // 30 seconds\n  private static readonly STALE_LOCK_THRESHOLD_MS = 60000; // 1 minute\n\n  /**\n   * Executes operation with exclusive access to the file.\n   * Uses both in-process and file-system level locks for cross-process safety.\n   */\n  async withLock<T>(key: string, operation: () => Promise<T>): Promise<T> {\n    // In-process lock first (fast path for single process)\n    while (this.inProcessLocks.has(key)) {\n      await this.inProcessLocks.get(key);\n    }\n\n    // Create in-process lock\n    let releaseLock: () => void;\n    const lockPromise = new Promise<void>((resolve) => {\n      releaseLock = resolve;\n    });\n    this.inProcessLocks.set(key, lockPromise);\n\n    // File-based lock for cross-process safety\n    const lockPath = `${key}.lock`;\n\n    try {\n      // Try to acquire file-based lock\n      await this.acquireFileLock(lockPath);\n\n      try {\n        return await operation();\n      } finally {\n        // Release file lock\n        await this.releaseFileLock(lockPath);\n      }\n    } finally {\n      // Release in-process lock\n      this.inProcessLocks.delete(key);\n      releaseLock!();\n    }\n  }\n\n  /**\n   * Acquire a file-based lock.\n   * Creates a lock file with PID and timestamp for stale detection.\n   */\n  private async acquireFileLock(lockPath: string): Promise<void> {\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < FileLock.LOCK_TIMEOUT_MS) {\n      try {\n        // Check for existing lock\n        const lockContent = await fs.readFile(lockPath, 'utf-8').catch(() => null);\n\n        if (lockContent) {\n          // Check if lock is stale\n          const lockData = JSON.parse(lockContent);\n          const lockAge = Date.now() - new Date(lockData.timestamp).getTime();\n\n          if (lockAge > FileLock.STALE_LOCK_THRESHOLD_MS) {\n            // Lock is stale, remove it\n            await fs.unlink(lockPath).catch(() => {});\n          } else {\n            // Lock is held, wait and retry\n            await new Promise((resolve) => setTimeout(resolve, 50));\n            continue;\n          }\n        }\n\n        // Try to create lock file (exclusive flag ensures atomic creation)\n        const lockData = {\n          pid: process.pid,\n          timestamp: new Date().toISOString(),\n        };\n\n        await fs.writeFile(lockPath, JSON.stringify(lockData), {\n          flag: 'wx', // Exclusive create - fails if file exists\n          mode: 0o600,\n        });\n\n        return; // Lock acquired\n      } catch (error: any) {\n        if (error?.code === 'EEXIST') {\n          // Lock file was created by another process, retry\n          await new Promise((resolve) => setTimeout(resolve, 50));\n          continue;\n        }\n        // Other error, ignore and continue (will use in-process lock only)\n        return;\n      }\n    }\n\n    // Timeout - proceed anyway with in-process lock only\n    console.warn(`[FileLock] Timeout acquiring lock for ${lockPath}, proceeding with in-process lock only`);\n  }\n\n  /**\n   * Release a file-based lock.\n   */\n  private async releaseFileLock(lockPath: string): Promise<void> {\n    try {\n      await fs.unlink(lockPath);\n    } catch {\n      // Ignore errors - lock file might already be removed\n    }\n  }\n}\n\n// ============================================================================\n// LocalKeystore Implementation\n// ============================================================================\n\n/**\n * Local file-based keystore provider implementing the KeystoreProvider interface.\n *\n * Security features:\n * - AES-256-GCM encryption for all key material\n * - Argon2id key derivation (64MB, 3 iterations, 4 parallelism)\n * - Unique salt and IV per encryption operation\n * - Atomic file writes (temp + rename)\n * - Strict file permissions (0600)\n * - SecureBuffer for memory safety\n */\nexport class LocalKeystore implements KeystoreProvider {\n  readonly providerType = 'local-file' as const;\n  readonly providerVersion = '1.0.0';\n\n  private baseDir: string = '';\n  private passwordPolicy: PasswordPolicy = DEFAULT_PASSWORD_POLICY;\n  private maxWalletsPerNetwork: number = 100;\n  private initialized: boolean = false;\n  private fileLock: FileLock = new FileLock();\n\n  // Rate limiting state\n  private authAttempts: Map<string, AuthAttemptRecord[]> = new Map();\n  private lockouts: Map<string, Date> = new Map();\n  private rateLimitStatePath: string = '';\n\n  // ========================================================================\n  // Lifecycle Methods\n  // ========================================================================\n\n  async initialize(config: KeystoreConfig): Promise<void> {\n    if (this.initialized) {\n      throw new KeystoreInitializationError('Provider already initialized');\n    }\n\n    // Resolve base directory\n    const homeDir = process.env['HOME'] || '';\n    this.baseDir = config.baseDir\n      ? path.resolve(config.baseDir.replace(/^~/, homeDir))\n      : path.join(homeDir, '.xrpl-wallet-mcp');\n\n    // Set rate limit state file path\n    this.rateLimitStatePath = path.join(this.baseDir, '.rate-limit-state.json');\n\n    // Apply configuration\n    if (config.passwordPolicy) {\n      this.passwordPolicy = { ...DEFAULT_PASSWORD_POLICY, ...config.passwordPolicy };\n    }\n    if (config.maxWalletsPerNetwork !== undefined) {\n      this.maxWalletsPerNetwork = config.maxWalletsPerNetwork;\n    }\n\n    // Create directory structure\n    await this.ensureDirectoryStructure();\n\n    // Verify permissions\n    await this.verifyPermissions();\n\n    // Restore rate limiting state from disk\n    await this.restoreRateLimitState();\n\n    this.initialized = true;\n  }\n\n  /**\n   * Persist rate limiting state to disk.\n   * Called after auth attempts and lockouts change.\n   */\n  private async persistRateLimitState(): Promise<void> {\n    if (!this.baseDir) return;\n\n    const state = {\n      version: 1,\n      updatedAt: new Date().toISOString(),\n      lockouts: Array.from(this.lockouts.entries()).map(([walletId, date]) => ({\n        walletId,\n        lockedUntil: date.toISOString(),\n      })),\n      authAttempts: Array.from(this.authAttempts.entries()).map(([walletId, attempts]) => ({\n        walletId,\n        attempts: attempts.map((a) => ({\n          timestamp: a.timestamp.toISOString(),\n          success: a.success,\n          reason: a.reason,\n        })),\n      })),\n    };\n\n    try {\n      await this.atomicWrite(this.rateLimitStatePath, JSON.stringify(state, null, 2));\n    } catch (error) {\n      // Log but don't fail - rate limiting will still work in-memory\n      console.warn('Failed to persist rate limit state:', error);\n    }\n  }\n\n  /**\n   * Restore rate limiting state from disk.\n   * Called during initialization.\n   */\n  private async restoreRateLimitState(): Promise<void> {\n    try {\n      const content = await fs.readFile(this.rateLimitStatePath, 'utf-8');\n      const state = JSON.parse(content);\n\n      // Clear existing state\n      this.lockouts.clear();\n      this.authAttempts.clear();\n\n      const now = new Date();\n\n      // Restore active lockouts (skip expired ones)\n      for (const entry of state.lockouts || []) {\n        const lockedUntil = new Date(entry.lockedUntil);\n        if (lockedUntil > now) {\n          this.lockouts.set(entry.walletId, lockedUntil);\n        }\n      }\n\n      // Restore recent auth attempts (keep last 24 hours)\n      const twentyFourHoursAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      for (const entry of state.authAttempts || []) {\n        const recentAttempts = (entry.attempts || [])\n          .map((a: any) => ({\n            timestamp: new Date(a.timestamp),\n            success: a.success,\n            reason: a.reason,\n          }))\n          .filter((a: AuthAttemptRecord) => a.timestamp > twentyFourHoursAgo);\n\n        if (recentAttempts.length > 0) {\n          this.authAttempts.set(entry.walletId, recentAttempts);\n        }\n      }\n\n      console.log(\n        `[LocalKeystore] Restored rate limit state: ${this.lockouts.size} lockouts, ` +\n          `${this.authAttempts.size} wallets with auth history`\n      );\n    } catch (error) {\n      // No state file or corrupted - start fresh (this is fine)\n      this.lockouts.clear();\n      this.authAttempts.clear();\n    }\n  }\n\n  async healthCheck(): Promise<KeystoreHealthResult> {\n    this.assertInitialized();\n\n    const errors: string[] = [];\n    let storageAccessible = true;\n    let encryptionAvailable = true;\n    let networkCount = 0;\n    let walletCount = 0;\n\n    // Check storage access\n    try {\n      await fs.access(this.baseDir, fs.constants.R_OK | fs.constants.W_OK);\n    } catch {\n      storageAccessible = false;\n      errors.push('Base directory not accessible');\n    }\n\n    // Check encryption availability\n    try {\n      const testKey = crypto.randomBytes(32);\n      const testIv = crypto.randomBytes(12);\n      const cipher = crypto.createCipheriv('aes-256-gcm', testKey, testIv);\n      cipher.update('test');\n      cipher.final();\n    } catch {\n      encryptionAvailable = false;\n      errors.push('AES-256-GCM encryption not available');\n    }\n\n    // Count networks and wallets\n    for (const network of ['mainnet', 'testnet', 'devnet'] as XRPLNetwork[]) {\n      const networkDir = path.join(this.baseDir, network, 'wallets');\n      try {\n        await fs.access(networkDir);\n        networkCount++;\n        const files = await fs.readdir(networkDir);\n        walletCount += files.filter((f) => f.endsWith('.wallet.json')).length;\n      } catch {\n        // Network directory doesn't exist yet\n      }\n    }\n\n    const result: KeystoreHealthResult = {\n      healthy: storageAccessible && encryptionAvailable && errors.length === 0,\n      providerType: this.providerType,\n      providerVersion: this.providerVersion,\n      timestamp: new Date().toISOString(),\n      details: {\n        storageAccessible,\n        encryptionAvailable,\n        networkCount,\n        walletCount,\n      },\n    };\n    if (errors.length > 0) {\n      result.errors = errors;\n    }\n    return result;\n  }\n\n  async close(): Promise<void> {\n    // Clear rate limiting state\n    this.authAttempts.clear();\n    this.lockouts.clear();\n    this.initialized = false;\n  }\n\n  // ========================================================================\n  // Wallet CRUD Operations\n  // ========================================================================\n\n  async createWallet(\n    network: XRPLNetwork,\n    policy: WalletPolicy,\n    options?: WalletCreateOptions\n  ): Promise<WalletEntry> {\n    this.assertInitialized();\n\n    if (!options?.password) {\n      throw new WeakPasswordError(['Password is required']);\n    }\n\n    // Validate password\n    const passwordErrors = validatePassword(options.password, this.passwordPolicy);\n    if (passwordErrors.length > 0) {\n      throw new WeakPasswordError(passwordErrors);\n    }\n\n    // Check capacity\n    const currentCount = (await this.listWallets(network)).length;\n    if (currentCount >= this.maxWalletsPerNetwork) {\n      throw new KeystoreCapacityError(network, currentCount, this.maxWalletsPerNetwork);\n    }\n\n    // Generate wallet ID\n    const walletId = this.generateWalletId();\n\n    // Generate wallet using xrpl library\n    const algorithm = options?.algorithm || 'ed25519';\n    // Map our algorithm type to xrpl's ECDSA enum\n    const xrplAlgorithm = algorithm === 'secp256k1' ? ECDSA.secp256k1 : ECDSA.ed25519;\n    const xrplWallet = Wallet.generate(xrplAlgorithm);\n\n    // Get seed for storage\n    const seedString = xrplWallet.seed;\n    if (!seedString) {\n      throw new KeystoreWriteError('Failed to generate wallet seed', 'create');\n    }\n\n    // Store the seed as UTF-8 bytes (base58 encoded seed string)\n    // This is consistent with how we load it in SigningService\n    const seedBuffer = Buffer.from(seedString, 'utf-8');\n    const seed = SecureBuffer.from(seedBuffer);\n\n    try {\n      // Derive encryption key\n      const salt = crypto.randomBytes(ARGON2_CONFIG.saltLength);\n      const kek = await this.deriveKey(options.password, salt);\n\n      // Encrypt seed\n      const { encryptedData, iv, authTag } = await this.encrypt(seed.getBuffer(), kek);\n\n      // Zero KEK immediately\n      kek.dispose();\n\n      // Create wallet entry\n      const now = new Date().toISOString();\n      const entry: WalletEntry = {\n        walletId,\n        name: options?.name || `Wallet ${walletId.slice(0, 8)}`,\n        address: xrplWallet.classicAddress,\n        publicKey: xrplWallet.publicKey,\n        algorithm,\n        network,\n        policyId: policy.policyId,\n        encryption: {\n          algorithm: 'aes-256-gcm',\n          kdf: 'argon2id',\n          kdfParams: {\n            memoryCost: ARGON2_CONFIG.memoryCost,\n            timeCost: ARGON2_CONFIG.timeCost,\n            parallelism: ARGON2_CONFIG.parallelism,\n          },\n          salt: salt.toString('base64'),\n        },\n        metadata: {\n          ...(options?.description && { description: options.description }),\n          ...(options?.tags && { tags: options.tags }),\n        },\n        createdAt: now,\n        modifiedAt: now,\n        status: 'active',\n      };\n\n      // Create wallet file content\n      const walletFile: WalletFile = {\n        version: 1,\n        walletId,\n        entry,\n        encryptedKey: {\n          data: encryptedData.toString('base64'),\n          iv: iv.toString('base64'),\n          authTag: authTag.toString('base64'),\n        },\n      };\n\n      // Write wallet file atomically\n      const walletPath = this.getWalletPath(network, walletId);\n      await this.atomicWrite(walletPath, JSON.stringify(walletFile, null, 2));\n\n      // Update index\n      await this.updateIndex(network, entry, 'add');\n\n      return entry;\n    } finally {\n      // Always zero seed\n      seed.dispose();\n    }\n  }\n\n  async loadKey(walletId: string, password: string): Promise<SecureBuffer> {\n    this.assertInitialized();\n\n    // Check rate limiting\n    this.checkRateLimit(walletId);\n\n    try {\n      // Find wallet file\n      const { walletFile } = await this.findWallet(walletId);\n\n      // Derive KEK from password\n      const salt = Buffer.from(walletFile.entry.encryption.salt, 'base64');\n      const kek = await this.deriveKey(password, salt);\n\n      try {\n        // Decrypt key material\n        const encryptedData = Buffer.from(walletFile.encryptedKey.data, 'base64');\n        const iv = Buffer.from(walletFile.encryptedKey.iv, 'base64');\n        const authTag = Buffer.from(walletFile.encryptedKey.authTag, 'base64');\n\n        const decrypted = await this.decrypt(encryptedData, kek, iv, authTag);\n\n        // Record successful auth (persists to disk)\n        await this.recordAuthSuccess(walletId);\n\n        return decrypted;\n      } finally {\n        kek.dispose();\n      }\n    } catch (error) {\n      // Record failed auth attempt (persists to disk)\n      if (error instanceof AuthenticationError || error instanceof KeyDecryptionError) {\n        await this.recordAuthFailure(walletId);\n      }\n      throw error;\n    }\n  }\n\n  async storeKey(\n    walletId: string,\n    key: SecureBuffer,\n    password: string,\n    metadata: WalletMetadata\n  ): Promise<void> {\n    this.assertInitialized();\n\n    // Validate password\n    const passwordErrors = validatePassword(password, this.passwordPolicy);\n    if (passwordErrors.length > 0) {\n      throw new WeakPasswordError(passwordErrors);\n    }\n\n    // Check if wallet already exists\n    try {\n      await this.findWallet(walletId);\n      throw new WalletExistsError(walletId);\n    } catch (error) {\n      if (!(error instanceof WalletNotFoundError)) {\n        throw error;\n      }\n    }\n\n    // Validate key format - support standard key/seed lengths\n    // 16 bytes = 128-bit entropy for Wallet.fromEntropy()\n    // 29-35 bytes = base58-encoded seed string (e.g., \"sEdT...\" ~29 chars)\n    // 32 bytes = Ed25519 private key\n    // 33 bytes = secp256k1 private key (compressed)\n    const keyBuffer = key.getBuffer();\n    const validLengths = [16, 29, 30, 31, 32, 33, 34, 35];\n    if (!validLengths.some((len) => Math.abs(keyBuffer.length - len) <= 2)) {\n      throw new InvalidKeyError(\n        'Invalid key length',\n        `Expected 16 bytes (entropy), 29-35 bytes (seed string), or 32-33 bytes (private key), got ${keyBuffer.length}`\n      );\n    }\n\n    // Derive wallet based on key format\n    let xrplWallet: Wallet;\n    try {\n      if (keyBuffer.length === 16) {\n        // 16 bytes = entropy\n        xrplWallet = Wallet.fromEntropy(keyBuffer);\n      } else if (keyBuffer.length >= 29 && keyBuffer.length <= 35) {\n        // Likely a base58-encoded seed string\n        const seedString = keyBuffer.toString('utf-8');\n        xrplWallet = Wallet.fromSeed(seedString);\n      } else {\n        // Try as entropy first, fall back to treating as seed bytes\n        try {\n          xrplWallet = Wallet.fromEntropy(keyBuffer.slice(0, 16));\n        } catch {\n          throw new InvalidKeyError('Could not derive wallet from key');\n        }\n      }\n    } catch (error) {\n      if (error instanceof InvalidKeyError) throw error;\n      throw new InvalidKeyError('Could not derive wallet from key');\n    }\n\n    // Default to testnet for imported keys\n    const network: XRPLNetwork = 'testnet';\n\n    // Derive encryption key\n    const salt = crypto.randomBytes(ARGON2_CONFIG.saltLength);\n    const kek = await this.deriveKey(password, salt);\n\n    try {\n      // Encrypt key\n      const { encryptedData, iv, authTag } = await this.encrypt(keyBuffer, kek);\n\n      const now = new Date().toISOString();\n      const entry: WalletEntry = {\n        walletId,\n        name: walletId,\n        address: xrplWallet.classicAddress,\n        publicKey: xrplWallet.publicKey,\n        algorithm: 'ed25519',\n        network,\n        policyId: 'imported',\n        encryption: {\n          algorithm: 'aes-256-gcm',\n          kdf: 'argon2id',\n          kdfParams: {\n            memoryCost: ARGON2_CONFIG.memoryCost,\n            timeCost: ARGON2_CONFIG.timeCost,\n            parallelism: ARGON2_CONFIG.parallelism,\n          },\n          salt: salt.toString('base64'),\n        },\n        metadata,\n        createdAt: now,\n        modifiedAt: now,\n        status: 'active',\n      };\n\n      const walletFile: WalletFile = {\n        version: 1,\n        walletId,\n        entry,\n        encryptedKey: {\n          data: encryptedData.toString('base64'),\n          iv: iv.toString('base64'),\n          authTag: authTag.toString('base64'),\n        },\n      };\n\n      const walletPath = this.getWalletPath(network, walletId);\n      await this.atomicWrite(walletPath, JSON.stringify(walletFile, null, 2));\n\n      await this.updateIndex(network, entry, 'add');\n    } finally {\n      kek.dispose();\n    }\n  }\n\n  async listWallets(network?: XRPLNetwork): Promise<WalletSummary[]> {\n    this.assertInitialized();\n\n    const networks = network ? [network] : (['mainnet', 'testnet', 'devnet'] as XRPLNetwork[]);\n    const summaries: WalletSummary[] = [];\n\n    for (const net of networks) {\n      const indexPath = path.join(this.baseDir, net, 'index.json');\n      try {\n        const content = await fs.readFile(indexPath, 'utf-8');\n        const index: WalletIndex = JSON.parse(content);\n\n        for (const entry of index.wallets) {\n          const summary: WalletSummary = {\n            walletId: entry.walletId,\n            name: entry.name,\n            address: entry.address,\n            network: entry.network,\n            status: entry.status,\n            createdAt: entry.createdAt,\n            policyId: entry.policyId,\n          };\n          if (entry.metadata?.lastUsedAt) {\n            summary.lastUsedAt = entry.metadata.lastUsedAt;\n          }\n          if (entry.metadata?.tags) {\n            summary.tags = entry.metadata.tags;\n          }\n          summaries.push(summary);\n        }\n      } catch {\n        // Index doesn't exist yet\n      }\n    }\n\n    return summaries;\n  }\n\n  async getWallet(walletId: string): Promise<WalletEntry> {\n    this.assertInitialized();\n\n    const { walletFile } = await this.findWallet(walletId);\n    return walletFile.entry;\n  }\n\n  async deleteWallet(walletId: string, password: string): Promise<void> {\n    this.assertInitialized();\n\n    // Verify authentication\n    this.checkRateLimit(walletId);\n\n    const { network, walletFile, filePath } = await this.findWallet(walletId);\n\n    // Verify password by attempting to decrypt\n    const salt = Buffer.from(walletFile.entry.encryption.salt, 'base64');\n    const kek = await this.deriveKey(password, salt);\n\n    try {\n      const encryptedData = Buffer.from(walletFile.encryptedKey.data, 'base64');\n      const iv = Buffer.from(walletFile.encryptedKey.iv, 'base64');\n      const authTag = Buffer.from(walletFile.encryptedKey.authTag, 'base64');\n\n      const decrypted = await this.decrypt(encryptedData, kek, iv, authTag);\n      decrypted.dispose();\n\n      await this.recordAuthSuccess(walletId);\n    } catch (error) {\n      await this.recordAuthFailure(walletId);\n      throw error;\n    } finally {\n      kek.dispose();\n    }\n\n    // Delete wallet file\n    await this.fileLock.withLock(filePath, async () => {\n      // Overwrite file contents before deletion (secure delete)\n      const fileSize = (await fs.stat(filePath)).size;\n      const randomData = crypto.randomBytes(fileSize);\n      await fs.writeFile(filePath, randomData);\n      await fs.unlink(filePath);\n    });\n\n    // Update index\n    await this.updateIndex(network, walletFile.entry, 'remove');\n  }\n\n  async rotateKey(walletId: string, currentPassword: string, newPassword: string): Promise<void> {\n    this.assertInitialized();\n\n    // Validate new password\n    const passwordErrors = validatePassword(newPassword, this.passwordPolicy);\n    if (passwordErrors.length > 0) {\n      throw new WeakPasswordError(passwordErrors);\n    }\n\n    // Load current key\n    const key = await this.loadKey(walletId, currentPassword);\n\n    try {\n      const { network, walletFile, filePath } = await this.findWallet(walletId);\n\n      // Generate new salt and derive new KEK\n      const newSalt = crypto.randomBytes(ARGON2_CONFIG.saltLength);\n      const newKek = await this.deriveKey(newPassword, newSalt);\n\n      try {\n        // Re-encrypt with new key\n        const { encryptedData, iv, authTag } = await this.encrypt(key.getBuffer(), newKek);\n\n        // Update wallet file\n        walletFile.entry.encryption.salt = newSalt.toString('base64');\n        walletFile.entry.modifiedAt = new Date().toISOString();\n        walletFile.encryptedKey = {\n          data: encryptedData.toString('base64'),\n          iv: iv.toString('base64'),\n          authTag: authTag.toString('base64'),\n        };\n\n        // Write atomically\n        await this.atomicWrite(filePath, JSON.stringify(walletFile, null, 2));\n\n        // Update index\n        await this.updateIndex(network, walletFile.entry, 'update');\n      } finally {\n        newKek.dispose();\n      }\n    } finally {\n      key.dispose();\n    }\n  }\n\n  async updateMetadata(walletId: string, updates: Partial<WalletMetadata>): Promise<void> {\n    this.assertInitialized();\n\n    const { network, walletFile, filePath } = await this.findWallet(walletId);\n\n    // Update metadata\n    walletFile.entry.metadata = {\n      ...walletFile.entry.metadata,\n      ...updates,\n    };\n    walletFile.entry.modifiedAt = new Date().toISOString();\n\n    // Write atomically\n    await this.atomicWrite(filePath, JSON.stringify(walletFile, null, 2));\n\n    // Update index\n    await this.updateIndex(network, walletFile.entry, 'update');\n  }\n\n  /**\n   * Store a regular key for a wallet.\n   *\n   * This allows the wallet to sign transactions with the regular key\n   * instead of the master key, providing better security through key rotation.\n   *\n   * @param walletId - Unique wallet identifier\n   * @param regularKeySeed - Regular key seed (base58 encoded)\n   * @param regularKeyAddress - Regular key's XRPL address\n   * @param password - User password for encryption\n   */\n  async storeRegularKey(\n    walletId: string,\n    regularKeySeed: string,\n    regularKeyAddress: string,\n    password: string\n  ): Promise<void> {\n    this.assertInitialized();\n\n    // Verify wallet exists and password is correct\n    const masterKey = await this.loadKey(walletId, password);\n    masterKey.dispose(); // Just verifying password, don't need the key\n\n    const { network, walletFile, filePath } = await this.findWallet(walletId);\n\n    // Encrypt the regular key seed\n    const regularKeySeedBuffer = Buffer.from(regularKeySeed, 'utf-8');\n    const regularKeySecure = SecureBuffer.from(regularKeySeedBuffer);\n\n    try {\n      // Derive encryption key for regular key (use same salt as master key)\n      const salt = Buffer.from(walletFile.entry.encryption.salt, 'base64');\n      const kek = await this.deriveKey(password, salt);\n\n      try {\n        const { encryptedData, iv, authTag } = await this.encrypt(\n          regularKeySecure.getBuffer(),\n          kek\n        );\n\n        // Store regular key in a separate file\n        const regularKeyFile = {\n          version: 1,\n          walletId,\n          regularKeyAddress,\n          encryptedKey: {\n            data: encryptedData.toString('base64'),\n            iv: iv.toString('base64'),\n            authTag: authTag.toString('base64'),\n          },\n          createdAt: new Date().toISOString(),\n        };\n\n        const regularKeyPath = path.join(\n          this.baseDir,\n          network,\n          'wallets',\n          `${walletId}.regular-key.json`\n        );\n        await this.atomicWrite(regularKeyPath, JSON.stringify(regularKeyFile, null, 2));\n\n        // Update wallet metadata to indicate regular key exists\n        walletFile.entry.metadata = {\n          ...walletFile.entry.metadata,\n          hasRegularKey: true,\n          customData: {\n            ...(walletFile.entry.metadata?.customData as Record<string, unknown>),\n            regularKeyAddress,\n            regularKeyStoredAt: new Date().toISOString(),\n          },\n        };\n        walletFile.entry.modifiedAt = new Date().toISOString();\n\n        await this.atomicWrite(filePath, JSON.stringify(walletFile, null, 2));\n        await this.updateIndex(network, walletFile.entry, 'update');\n      } finally {\n        kek.dispose();\n      }\n    } finally {\n      regularKeySecure.dispose();\n    }\n  }\n\n  /**\n   * Load the regular key for a wallet.\n   *\n   * @param walletId - Unique wallet identifier\n   * @param password - User password for decryption\n   * @returns SecureBuffer containing the regular key seed, or null if no regular key\n   */\n  async loadRegularKey(walletId: string, password: string): Promise<SecureBuffer | null> {\n    this.assertInitialized();\n\n    const { network, walletFile } = await this.findWallet(walletId);\n\n    // Check if regular key exists\n    const regularKeyPath = path.join(\n      this.baseDir,\n      network,\n      'wallets',\n      `${walletId}.regular-key.json`\n    );\n\n    let regularKeyFile: any;\n    try {\n      const content = await fs.readFile(regularKeyPath, 'utf-8');\n      regularKeyFile = JSON.parse(content);\n    } catch {\n      // No regular key stored\n      return null;\n    }\n\n    // Derive KEK and decrypt\n    const salt = Buffer.from(walletFile.entry.encryption.salt, 'base64');\n    const kek = await this.deriveKey(password, salt);\n\n    try {\n      const encryptedData = Buffer.from(regularKeyFile.encryptedKey.data, 'base64');\n      const iv = Buffer.from(regularKeyFile.encryptedKey.iv, 'base64');\n      const authTag = Buffer.from(regularKeyFile.encryptedKey.authTag, 'base64');\n\n      return await this.decrypt(encryptedData, kek, iv, authTag);\n    } finally {\n      kek.dispose();\n    }\n  }\n\n  async exportBackup(\n    walletId: string,\n    password: string,\n    format: BackupFormat\n  ): Promise<EncryptedBackup> {\n    this.assertInitialized();\n\n    // Verify password and load key\n    const key = await this.loadKey(walletId, password);\n\n    try {\n      const { walletFile } = await this.findWallet(walletId);\n\n      // Create backup payload using the key buffer directly\n      // Note: We minimize the time the seed exists as a string by building\n      // the JSON structure in a way that allows immediate zeroing.\n      const seedHex = key.getBuffer().toString('hex');\n      const payloadStr = JSON.stringify({\n        version: 1,\n        exportedAt: new Date().toISOString(),\n        wallet: {\n          entry: walletFile.entry,\n          seed: seedHex,\n        },\n      });\n\n      // Create buffer from payload and encrypt immediately\n      const payloadBuffer = Buffer.from(payloadStr);\n\n      // Generate new salt for backup encryption\n      const backupSalt = crypto.randomBytes(ARGON2_CONFIG.saltLength);\n      const backupKek = await this.deriveKey(password, backupSalt);\n\n      try {\n        // Encrypt backup payload\n        const { encryptedData, iv, authTag } = await this.encrypt(payloadBuffer, backupKek);\n\n        // Zero the payload buffer immediately after encryption (contains seed)\n        payloadBuffer.fill(0);\n\n        // Calculate checksum\n        const checksum = crypto.createHash('sha256').update(encryptedData).digest('hex');\n\n        const backup: EncryptedBackup = {\n          version: 1,\n          format,\n          createdAt: new Date().toISOString(),\n          sourceProvider: this.providerType,\n          encryption: {\n            algorithm: 'aes-256-gcm',\n            kdf: 'argon2id',\n            kdfParams: {\n              memoryCost: ARGON2_CONFIG.memoryCost,\n              timeCost: ARGON2_CONFIG.timeCost,\n              parallelism: ARGON2_CONFIG.parallelism,\n            },\n            salt: backupSalt.toString('base64'),\n            iv: iv.toString('base64'),\n            authTag: authTag.toString('base64'),\n          },\n          payload: encryptedData.toString('base64'),\n          checksum,\n        };\n\n        return backup;\n      } finally {\n        backupKek.dispose();\n      }\n    } finally {\n      key.dispose();\n    }\n  }\n\n  async importBackup(\n    backup: EncryptedBackup,\n    password: string,\n    options?: ImportOptions\n  ): Promise<WalletEntry> {\n    this.assertInitialized();\n\n    // Validate backup format\n    if (backup.version !== 1) {\n      throw new BackupFormatError('Unsupported backup version', 1);\n    }\n\n    // Verify checksum\n    const payloadData = Buffer.from(backup.payload, 'base64');\n    const computedChecksum = crypto.createHash('sha256').update(payloadData).digest('hex');\n\n    if (computedChecksum !== backup.checksum) {\n      throw new BackupFormatError('Checksum verification failed');\n    }\n\n    // Derive KEK from password\n    const salt = Buffer.from(backup.encryption.salt, 'base64');\n    const kek = await this.deriveKey(password, salt);\n\n    let decryptedPayload: SecureBuffer;\n    try {\n      const iv = Buffer.from(backup.encryption.iv, 'base64');\n      const authTag = Buffer.from(backup.encryption.authTag, 'base64');\n\n      decryptedPayload = await this.decrypt(payloadData, kek, iv, authTag);\n    } finally {\n      kek.dispose();\n    }\n\n    try {\n      // Parse payload\n      const payload = JSON.parse(decryptedPayload.getBuffer().toString());\n\n      const walletId = options?.newName || payload.wallet.entry.walletId;\n      const targetNetwork = options?.targetNetwork || payload.wallet.entry.network;\n\n      // Check if wallet exists\n      try {\n        await this.findWallet(walletId);\n        if (!options?.force) {\n          throw new WalletExistsError(walletId);\n        }\n      } catch (error) {\n        if (!(error instanceof WalletNotFoundError)) {\n          throw error;\n        }\n      }\n\n      // Import the seed\n      const seedBuffer = Buffer.from(payload.wallet.seed, 'hex');\n      const seed = SecureBuffer.from(seedBuffer);\n\n      try {\n        // Store with potentially new password\n        const storePassword = options?.newPassword || password;\n\n        // Derive new encryption key\n        const newSalt = crypto.randomBytes(ARGON2_CONFIG.saltLength);\n        const newKek = await this.deriveKey(storePassword, newSalt);\n\n        try {\n          const { encryptedData, iv, authTag } = await this.encrypt(seed.getBuffer(), newKek);\n\n          const now = new Date().toISOString();\n          const entry: WalletEntry = {\n            ...payload.wallet.entry,\n            walletId,\n            network: targetNetwork,\n            encryption: {\n              algorithm: 'aes-256-gcm',\n              kdf: 'argon2id',\n              kdfParams: {\n                memoryCost: ARGON2_CONFIG.memoryCost,\n                timeCost: ARGON2_CONFIG.timeCost,\n                parallelism: ARGON2_CONFIG.parallelism,\n              },\n              salt: newSalt.toString('base64'),\n            },\n            modifiedAt: now,\n            metadata: {\n              ...(payload.wallet.entry.metadata || {}),\n              customData: {\n                ...(payload.wallet.entry.metadata?.customData || {}),\n                importedAt: now,\n                importedFrom: backup.sourceProvider,\n              },\n            },\n          };\n\n          const walletFile: WalletFile = {\n            version: 1,\n            walletId,\n            entry,\n            encryptedKey: {\n              data: encryptedData.toString('base64'),\n              iv: iv.toString('base64'),\n              authTag: authTag.toString('base64'),\n            },\n          };\n\n          const walletPath = this.getWalletPath(targetNetwork, walletId);\n          await this.atomicWrite(walletPath, JSON.stringify(walletFile, null, 2));\n\n          await this.updateIndex(targetNetwork, entry, 'add');\n\n          return entry;\n        } finally {\n          newKek.dispose();\n        }\n      } finally {\n        seed.dispose();\n      }\n    } finally {\n      decryptedPayload.dispose();\n    }\n  }\n\n  // ========================================================================\n  // Private Helper Methods\n  // ========================================================================\n\n  private assertInitialized(): void {\n    if (!this.initialized) {\n      throw new KeystoreInitializationError('Provider not initialized');\n    }\n  }\n\n  private async ensureDirectoryStructure(): Promise<void> {\n    // Create base directory\n    await fs.mkdir(this.baseDir, { recursive: true, mode: PERMISSIONS.DIRECTORY });\n\n    // Create network directories\n    for (const network of ['mainnet', 'testnet', 'devnet']) {\n      const walletsDir = path.join(this.baseDir, network, 'wallets');\n      await fs.mkdir(walletsDir, { recursive: true, mode: PERMISSIONS.DIRECTORY });\n    }\n\n    // Create backups directory\n    const backupDir = path.join(this.baseDir, 'backups');\n    await fs.mkdir(backupDir, { recursive: true, mode: PERMISSIONS.DIRECTORY });\n  }\n\n  private async verifyPermissions(): Promise<void> {\n    // Verify base directory permissions\n    const stats = await fs.stat(this.baseDir);\n    const mode = stats.mode & 0o777;\n\n    if (mode !== PERMISSIONS.DIRECTORY) {\n      // Attempt to fix\n      await fs.chmod(this.baseDir, PERMISSIONS.DIRECTORY);\n    }\n  }\n\n  private generateWalletId(): string {\n    const timestamp = Date.now().toString(36);\n    const random = crypto.randomBytes(8).toString('hex');\n    return `wallet_${timestamp}_${random}`;\n  }\n\n  private getWalletPath(network: XRPLNetwork, walletId: string): string {\n    return path.join(this.baseDir, network, 'wallets', `${walletId}.wallet.json`);\n  }\n\n  private async findWallet(\n    walletId: string\n  ): Promise<{ network: XRPLNetwork; walletFile: WalletFile; filePath: string }> {\n    for (const network of ['mainnet', 'testnet', 'devnet'] as XRPLNetwork[]) {\n      const filePath = this.getWalletPath(network, walletId);\n      try {\n        const content = await fs.readFile(filePath, 'utf-8');\n        const walletFile: WalletFile = JSON.parse(content);\n        return { network, walletFile, filePath };\n      } catch {\n        // Not in this network\n      }\n    }\n    throw new WalletNotFoundError(walletId);\n  }\n\n  private async updateIndex(\n    network: XRPLNetwork,\n    entry: WalletEntry,\n    operation: 'add' | 'remove' | 'update'\n  ): Promise<void> {\n    const indexPath = path.join(this.baseDir, network, 'index.json');\n\n    await this.fileLock.withLock(indexPath, async () => {\n      let index: WalletIndex;\n\n      try {\n        const content = await fs.readFile(indexPath, 'utf-8');\n        index = JSON.parse(content);\n      } catch {\n        index = { version: 1, wallets: [], modifiedAt: '' };\n      }\n\n      switch (operation) {\n        case 'add':\n          index.wallets.push(entry);\n          break;\n        case 'remove':\n          index.wallets = index.wallets.filter((w) => w.walletId !== entry.walletId);\n          break;\n        case 'update':\n          index.wallets = index.wallets.map((w) => (w.walletId === entry.walletId ? entry : w));\n          break;\n      }\n\n      index.modifiedAt = new Date().toISOString();\n\n      await this.atomicWrite(indexPath, JSON.stringify(index, null, 2));\n    });\n  }\n\n  // ========================================================================\n  // Cryptographic Operations\n  // ========================================================================\n\n  /**\n   * Derives a 256-bit key from password using Argon2id.\n   */\n  private async deriveKey(password: string, salt: Buffer): Promise<SecureBuffer> {\n    const derivedKey = await argon2.hash(password, {\n      type: ARGON2_CONFIG.type,\n      memoryCost: ARGON2_CONFIG.memoryCost,\n      timeCost: ARGON2_CONFIG.timeCost,\n      parallelism: ARGON2_CONFIG.parallelism,\n      hashLength: ARGON2_CONFIG.hashLength,\n      salt,\n      raw: true, // Return raw bytes, not encoded string\n    });\n\n    return SecureBuffer.from(derivedKey);\n  }\n\n  /**\n   * Encrypts data using AES-256-GCM.\n   */\n  private async encrypt(\n    plaintext: Buffer,\n    key: SecureBuffer\n  ): Promise<{ encryptedData: Buffer; iv: Buffer; authTag: Buffer }> {\n    // Generate cryptographically secure random IV\n    const iv = crypto.randomBytes(AES_CONFIG.ivLength);\n\n    // Create cipher\n    const cipher = crypto.createCipheriv(AES_CONFIG.algorithm, key.getBuffer(), iv, {\n      authTagLength: AES_CONFIG.authTagLength,\n    });\n\n    // Encrypt\n    const encrypted = Buffer.concat([cipher.update(plaintext), cipher.final()]);\n\n    // Get authentication tag\n    const authTag = cipher.getAuthTag();\n\n    return {\n      encryptedData: encrypted,\n      iv,\n      authTag,\n    };\n  }\n\n  /**\n   * Decrypts data using AES-256-GCM.\n   */\n  private async decrypt(\n    ciphertext: Buffer,\n    key: SecureBuffer,\n    iv: Buffer,\n    authTag: Buffer\n  ): Promise<SecureBuffer> {\n    try {\n      // Create decipher\n      const decipher = crypto.createDecipheriv(AES_CONFIG.algorithm, key.getBuffer(), iv, {\n        authTagLength: AES_CONFIG.authTagLength,\n      });\n\n      // Set auth tag BEFORE decryption (required for GCM)\n      decipher.setAuthTag(authTag);\n\n      // Decrypt\n      const decrypted = Buffer.concat([decipher.update(ciphertext), decipher.final()]);\n\n      // Return as SecureBuffer for memory safety\n      return SecureBuffer.from(decrypted);\n    } catch (error) {\n      // GCM auth failure or other crypto error\n      if (error instanceof Error && error.message.includes('auth')) {\n        throw new AuthenticationError();\n      }\n      throw new KeyDecryptionError('Decryption failed');\n    }\n  }\n\n  // ========================================================================\n  // File System Operations\n  // ========================================================================\n\n  /**\n   * Atomically writes content to a file using temp file + rename pattern.\n   */\n  private async atomicWrite(filePath: string, content: string): Promise<void> {\n    const dir = path.dirname(filePath);\n    const tempPath = path.join(dir, `.${path.basename(filePath)}.tmp.${process.pid}`);\n\n    try {\n      // Write to temp file with secure permissions\n      await fs.writeFile(tempPath, content, {\n        encoding: 'utf-8',\n        mode: PERMISSIONS.FILE,\n      });\n\n      // Atomic rename\n      await fs.rename(tempPath, filePath);\n    } catch (error) {\n      // Clean up temp file on failure\n      try {\n        await fs.unlink(tempPath);\n      } catch {\n        // Ignore cleanup errors\n      }\n      throw new KeystoreWriteError(`Failed to write ${filePath}: ${error}`, 'create');\n    }\n  }\n\n  // ========================================================================\n  // Rate Limiting\n  // ========================================================================\n\n  /**\n   * Checks if wallet is currently locked out.\n   */\n  private checkRateLimit(walletId: string): void {\n    const lockout = this.lockouts.get(walletId);\n    if (lockout && lockout > new Date()) {\n      throw new AuthenticationError();\n    }\n\n    // Clean old lockout\n    if (lockout) {\n      this.lockouts.delete(walletId);\n    }\n  }\n\n  /**\n   * Records successful authentication.\n   */\n  private async recordAuthSuccess(walletId: string): Promise<void> {\n    this.authAttempts.delete(walletId);\n    this.lockouts.delete(walletId);\n    // Persist state changes to disk\n    await this.persistRateLimitState();\n  }\n\n  /**\n   * Records failed authentication attempt.\n   */\n  private async recordAuthFailure(walletId: string): Promise<void> {\n    const now = new Date();\n    const windowStart = new Date(now.getTime() - RATE_LIMIT_CONFIG.windowSeconds * 1000);\n\n    // Get or create attempt list\n    let attempts = this.authAttempts.get(walletId) || [];\n\n    // Filter to recent attempts\n    attempts = attempts.filter((a) => a.timestamp > windowStart);\n\n    // Add new failure\n    attempts.push({ timestamp: now, success: false });\n    this.authAttempts.set(walletId, attempts);\n\n    // Check if lockout needed\n    const failures = attempts.filter((a) => !a.success).length;\n    if (failures >= RATE_LIMIT_CONFIG.maxAttempts) {\n      // Calculate lockout duration (progressive)\n      const lockoutCount = Math.floor(failures / RATE_LIMIT_CONFIG.maxAttempts);\n      const duration =\n        RATE_LIMIT_CONFIG.lockoutSeconds *\n        Math.pow(RATE_LIMIT_CONFIG.lockoutMultiplier, lockoutCount - 1);\n\n      const lockoutUntil = new Date(now.getTime() + duration * 1000);\n      this.lockouts.set(walletId, lockoutUntil);\n    }\n\n    // Persist state changes to disk\n    await this.persistRateLimitState();\n  }\n}\n","/**\n * Keystore Module\n *\n * Provides secure key storage functionality for the XRPL Agent Wallet MCP server.\n *\n * Features:\n * - Pluggable provider interface (IKeystore)\n * - Memory-safe key handling (SecureBuffer)\n * - Local file-based storage with AES-256-GCM encryption (LocalKeystore)\n * - Argon2id key derivation for password protection\n * - Network-isolated storage (mainnet/testnet/devnet)\n *\n * @module keystore\n * @version 1.0.0\n */\n\n// Interface and types\nexport type {\n  KeystoreProvider,\n  KeystoreConfig,\n  KeystoreHealthResult,\n  XRPLNetwork,\n  KeystoreProviderType,\n  KeyAlgorithm,\n  WalletStatus,\n  BackupFormat,\n  PasswordPolicy,\n  AuditConfig,\n  HSMConfig,\n  KdfParams,\n  EncryptionMetadata,\n  WalletMetadata,\n  WalletEntry,\n  WalletSummary,\n  WalletPolicy,\n  WalletCreateOptions,\n  EntropySource,\n  EncryptedBackup,\n  ImportOptions,\n} from './interface.js';\n\n// SecureBuffer for memory-safe key handling\nexport { SecureBuffer } from './secure-buffer.js';\n\n// Error types\nexport {\n  KeystoreError,\n  KeystoreInitializationError,\n  WalletNotFoundError,\n  WalletExistsError,\n  AuthenticationError,\n  WeakPasswordError,\n  KeyDecryptionError,\n  KeyEncryptionError,\n  InvalidKeyError,\n  KeystoreWriteError,\n  KeystoreReadError,\n  KeystoreCapacityError,\n  BackupFormatError,\n  NetworkMismatchError,\n  ProviderUnavailableError,\n  isKeystoreError,\n  isKeystoreErrorCode,\n  type KeystoreErrorCode,\n} from './errors.js';\n\n// LocalKeystore implementation\nexport { LocalKeystore } from './local.js';\n\n/**\n * Default password policy for keystore operations.\n *\n * Requirements:\n * - Minimum 12 characters\n * - At least one uppercase letter\n * - At least one lowercase letter\n * - At least one number\n * - Maximum 128 characters\n */\nexport const DEFAULT_PASSWORD_POLICY = {\n  minLength: 12,\n  requireUppercase: true,\n  requireLowercase: true,\n  requireNumbers: true,\n  requireSpecial: false,\n  maxLength: 128,\n} as const;\n\n/**\n * Argon2id KDF configuration per ADR-002.\n *\n * Parameters:\n * - memoryCost: 64MB\n * - timeCost: 3 iterations\n * - parallelism: 4 threads\n * - hashLength: 32 bytes (256 bits)\n */\nexport const ARGON2_CONFIG = {\n  memoryCost: 65536, // 64 MB\n  timeCost: 3, // 3 iterations\n  parallelism: 4, // 4 threads\n  hashLength: 32, // 256-bit output\n  saltLength: 32, // 256-bit salt\n} as const;\n\n/**\n * AES-256-GCM encryption configuration per ADR-001.\n *\n * Parameters:\n * - keyLength: 32 bytes (256 bits)\n * - ivLength: 12 bytes (96 bits, NIST recommended)\n * - authTagLength: 16 bytes (128 bits)\n */\nexport const AES_CONFIG = {\n  algorithm: 'aes-256-gcm',\n  keyLength: 32, // 256 bits\n  ivLength: 12, // 96 bits\n  authTagLength: 16, // 128 bits\n} as const;\n","/**\n * XRPL Network Configuration\n *\n * Provides network-specific configuration for XRPL connections including\n * WebSocket endpoints, explorers, and faucets.\n *\n * @module xrpl/config\n * @version 1.0.0\n * @since 2026-01-28\n */\n\nimport type { Network } from '../schemas/index.js';\n\n/**\n * Network connection endpoints\n */\nexport interface NetworkEndpoints {\n  /** WebSocket endpoints for this network */\n  websocket: {\n    /** Primary WebSocket URL */\n    primary: string;\n    /** Backup WebSocket URLs */\n    backup: string[];\n  };\n  /** JSON-RPC endpoints (optional) */\n  jsonRpc?: {\n    /** Primary JSON-RPC URL */\n    primary: string;\n    /** Backup JSON-RPC URLs */\n    backup: string[];\n  };\n}\n\n/**\n * Explorer URL functions\n */\nexport interface ExplorerUrls {\n  /** Main explorer URL */\n  home: string;\n  /** Account/wallet lookup */\n  account: (address: string) => string;\n  /** Transaction lookup */\n  transaction: (hash: string) => string;\n  /** Ledger lookup */\n  ledger: (index: number) => string;\n}\n\n/**\n * Faucet configuration\n */\nexport interface FaucetConfig {\n  /** Whether faucet is available for this network */\n  available: boolean;\n  /** Faucet API endpoint */\n  url?: string;\n  /** Amount dispensed per request (XRP) */\n  amountXrp?: number;\n  /** Rate limit window in seconds */\n  rateLimitSeconds?: number;\n  /** Rate limit requests per window */\n  rateLimitRequests?: number;\n}\n\n/**\n * Connection configuration\n */\nexport interface ConnectionConfig {\n  /** Connection timeout in milliseconds */\n  connectionTimeout: number;\n  /** Request timeout in milliseconds */\n  requestTimeout: number;\n  /** Maximum reconnection attempts */\n  maxReconnectAttempts: number;\n  /** Initial reconnection delay in milliseconds */\n  reconnectDelay: number;\n  /** Reconnection backoff multiplier */\n  reconnectBackoff: number;\n}\n\n/**\n * Default network endpoints\n *\n * IMPORTANT: These are the official public endpoints. For production,\n * consider using a private node via environment variable override.\n */\nexport const NETWORK_ENDPOINTS: Record<Network, NetworkEndpoints> = {\n  mainnet: {\n    websocket: {\n      primary: 'wss://xrplcluster.com',\n      backup: ['wss://s1.ripple.com', 'wss://s2.ripple.com'],\n    },\n    jsonRpc: {\n      primary: 'https://xrplcluster.com',\n      backup: ['https://s1.ripple.com:51234', 'https://s2.ripple.com:51234'],\n    },\n  },\n  testnet: {\n    websocket: {\n      primary: 'wss://s.altnet.rippletest.net:51233',\n      backup: ['wss://testnet.xrpl-labs.com'],\n    },\n    jsonRpc: {\n      primary: 'https://s.altnet.rippletest.net:51234',\n      backup: [],\n    },\n  },\n  devnet: {\n    websocket: {\n      primary: 'wss://s.devnet.rippletest.net:51233',\n      backup: [],\n    },\n    jsonRpc: {\n      primary: 'https://s.devnet.rippletest.net:51234',\n      backup: [],\n    },\n  },\n};\n\n/**\n * Block explorer URLs\n */\nexport const EXPLORER_URLS: Record<Network, ExplorerUrls> = {\n  mainnet: {\n    home: 'https://xrpscan.com',\n    account: (address) => `https://xrpscan.com/account/${address}`,\n    transaction: (hash) => `https://xrpscan.com/tx/${hash}`,\n    ledger: (index) => `https://xrpscan.com/ledger/${index}`,\n  },\n  testnet: {\n    home: 'https://testnet.xrpl.org',\n    account: (address) => `https://testnet.xrpl.org/accounts/${address}`,\n    transaction: (hash) => `https://testnet.xrpl.org/transactions/${hash}`,\n    ledger: (index) => `https://testnet.xrpl.org/ledgers/${index}`,\n  },\n  devnet: {\n    home: 'https://devnet.xrpl.org',\n    account: (address) => `https://devnet.xrpl.org/accounts/${address}`,\n    transaction: (hash) => `https://devnet.xrpl.org/transactions/${hash}`,\n    ledger: (index) => `https://devnet.xrpl.org/ledgers/${index}`,\n  },\n};\n\n/**\n * Faucet configuration by network\n */\nexport const FAUCET_CONFIG: Record<Network, FaucetConfig> = {\n  mainnet: {\n    available: false,\n    // No faucet for mainnet - real XRP must be acquired through exchanges\n  },\n  testnet: {\n    available: true,\n    url: 'https://faucet.altnet.rippletest.net/accounts',\n    amountXrp: 1000,\n    rateLimitSeconds: 60,\n    rateLimitRequests: 1,\n  },\n  devnet: {\n    available: true,\n    url: 'https://faucet.devnet.rippletest.net/accounts',\n    amountXrp: 1000,\n    rateLimitSeconds: 60,\n    rateLimitRequests: 1,\n  },\n};\n\n/**\n * Default connection configuration\n */\nexport const DEFAULT_CONNECTION_CONFIG: ConnectionConfig = {\n  connectionTimeout: 10000, // 10 seconds\n  requestTimeout: 30000, // 30 seconds\n  maxReconnectAttempts: 3,\n  reconnectDelay: 1000, // 1 second\n  reconnectBackoff: 2, // Exponential backoff multiplier\n};\n\n/**\n * Get WebSocket URL for a network\n *\n * Checks for environment variable override first, then uses default.\n *\n * @param network - Target network\n * @returns WebSocket URL\n * @throws {Error} If custom URL doesn't use WSS protocol\n */\nexport function getWebSocketUrl(network: Network): string {\n  // Check for environment override\n  const envKey = `XRPL_${network.toUpperCase()}_WEBSOCKET_URL`;\n  const customUrl = process.env[envKey];\n\n  if (customUrl) {\n    // Validate custom URL uses secure WebSocket\n    if (!customUrl.startsWith('wss://') && !customUrl.startsWith('ws://localhost')) {\n      throw new Error(\n        `Custom endpoint must use WSS or ws://localhost: ${envKey}=${customUrl}`\n      );\n    }\n    return customUrl;\n  }\n\n  return NETWORK_ENDPOINTS[network].websocket.primary;\n}\n\n/**\n * Get backup WebSocket URLs for a network\n *\n * @param network - Target network\n * @returns Array of backup WebSocket URLs\n */\nexport function getBackupWebSocketUrls(network: Network): string[] {\n  return NETWORK_ENDPOINTS[network].websocket.backup;\n}\n\n/**\n * Get explorer URL for a transaction\n *\n * @param hash - Transaction hash\n * @param network - Network the transaction is on\n * @returns Explorer URL\n */\nexport function getTransactionExplorerUrl(hash: string, network: Network): string {\n  return EXPLORER_URLS[network].transaction(hash);\n}\n\n/**\n * Get explorer URL for an account\n *\n * @param address - Account address\n * @param network - Network the account is on\n * @returns Explorer URL\n */\nexport function getAccountExplorerUrl(address: string, network: Network): string {\n  return EXPLORER_URLS[network].account(address);\n}\n\n/**\n * Get explorer URL for a ledger\n *\n * @param index - Ledger index\n * @param network - Network the ledger is on\n * @returns Explorer URL\n */\nexport function getLedgerExplorerUrl(index: number, network: Network): string {\n  return EXPLORER_URLS[network].ledger(index);\n}\n\n/**\n * Check if faucet is available for a network\n *\n * @param network - Network to check\n * @returns True if faucet is available\n */\nexport function isFaucetAvailable(network: Network): boolean {\n  return FAUCET_CONFIG[network].available;\n}\n\n/**\n * Get faucet URL for a network\n *\n * @param network - Network to get faucet for\n * @returns Faucet URL or null if not available\n */\nexport function getFaucetUrl(network: Network): string | null {\n  const config = FAUCET_CONFIG[network];\n  return config.available ? config.url! : null;\n}\n\n/**\n * Get connection configuration with environment overrides\n *\n * @returns Connection configuration\n */\nexport function getConnectionConfig(): ConnectionConfig {\n  const env = process.env as Record<string, string | undefined>;\n\n  return {\n    connectionTimeout: parseInt(\n      env['XRPL_CONNECTION_TIMEOUT'] ?? String(DEFAULT_CONNECTION_CONFIG.connectionTimeout)\n    ),\n    requestTimeout: parseInt(\n      env['XRPL_REQUEST_TIMEOUT'] ?? String(DEFAULT_CONNECTION_CONFIG.requestTimeout)\n    ),\n    maxReconnectAttempts: parseInt(\n      env['XRPL_MAX_RECONNECT_ATTEMPTS'] ??\n        String(DEFAULT_CONNECTION_CONFIG.maxReconnectAttempts)\n    ),\n    reconnectDelay: DEFAULT_CONNECTION_CONFIG.reconnectDelay,\n    reconnectBackoff: DEFAULT_CONNECTION_CONFIG.reconnectBackoff,\n  };\n}\n","/**\n * XRPL Client Wrapper\n *\n * Provides a robust wrapper around xrpl.js with connection management,\n * automatic retries, and transaction helpers.\n *\n * @module xrpl/client\n * @version 1.0.0\n * @since 2026-01-28\n */\n\nimport { Client, type TxResponse, type AccountInfoResponse, type SubmitResponse } from 'xrpl';\nimport type { Network, XRPLAddress, TransactionHash } from '../schemas/index.js';\nimport {\n  getWebSocketUrl,\n  getBackupWebSocketUrls,\n  getConnectionConfig,\n  type ConnectionConfig,\n} from './config.js';\n\n/**\n * XRPL Client configuration\n */\nexport interface XRPLClientConfig {\n  /** Target network */\n  network: Network;\n  /** Custom WebSocket URL (overrides network default) */\n  nodeUrl?: string;\n  /** Connection configuration */\n  connectionConfig?: Partial<ConnectionConfig>;\n}\n\n/**\n * Account information from XRPL\n */\nexport interface AccountInfo {\n  /** Account address */\n  account: string;\n  /** Balance in drops */\n  balance: string;\n  /** Account sequence number */\n  sequence: number;\n  /** Number of objects owned (affects reserve) */\n  ownerCount: number;\n  /** Account flags */\n  flags: number;\n  /** Previous transaction ID */\n  previousTxnID: string;\n  /** Previous transaction ledger sequence */\n  previousTxnLgrSeq: number;\n}\n\n/**\n * XRPL transaction submission result\n */\nexport interface XRPLTransactionResult {\n  /** Transaction hash */\n  hash: string;\n  /** Result code (e.g., \"tesSUCCESS\") */\n  resultCode: string;\n  /** Ledger index where validated */\n  ledgerIndex: number | undefined;\n  /** Whether transaction was validated */\n  validated: boolean;\n  /** Transaction metadata */\n  meta: unknown | undefined;\n}\n\n/**\n * Transaction history options\n */\nexport interface TxHistoryOptions {\n  /** Maximum number of transactions to return */\n  limit?: number;\n  /** Oldest ledger index */\n  ledgerIndexMin?: number;\n  /** Newest ledger index */\n  ledgerIndexMax?: number;\n  /** Return transactions in chronological order */\n  forward?: boolean;\n}\n\n/**\n * Submit options for transactions\n */\nexport interface SubmitOptions {\n  /** Wait for validation (default: true) */\n  waitForValidation?: boolean;\n  /** Timeout for validation wait in ms (default: 20000) */\n  timeout?: number;\n  /** Fail if transaction not in validated ledger */\n  failHard?: boolean;\n}\n\n/**\n * Wait options for transaction validation\n */\nexport interface WaitOptions {\n  /** Timeout in milliseconds */\n  timeout?: number;\n  /** Poll interval in milliseconds */\n  pollInterval?: number;\n}\n\n/**\n * Server information\n */\nexport interface ServerInfo {\n  /** Server state (e.g., \"full\", \"syncing\") */\n  server_state: string;\n  /** Validated ledger information */\n  validated_ledger:\n    | {\n        /** Ledger index */\n        seq: number;\n        /** Ledger hash */\n        hash: string;\n        /** Base reserve in XRP */\n        reserve_base_xrp: number;\n        /** Incremental reserve in XRP */\n        reserve_inc_xrp: number;\n        /** Base fee in XRP */\n        base_fee_xrp: number;\n      }\n    | undefined;\n  /** Complete ledgers range */\n  complete_ledgers: string;\n  /** Number of peers */\n  peers: number | undefined;\n  /** Validation quorum */\n  validation_quorum: number | undefined;\n}\n\n/**\n * Custom error for XRPL client operations\n */\nexport class XRPLClientError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public details?: unknown\n  ) {\n    super(message);\n    this.name = 'XRPLClientError';\n  }\n}\n\n/**\n * Connection failed error\n */\nexport class ConnectionError extends XRPLClientError {\n  constructor(message: string, details?: unknown) {\n    super(message, 'CONNECTION_ERROR', details);\n    this.name = 'ConnectionError';\n  }\n}\n\n/**\n * Account not found error\n */\nexport class AccountNotFoundError extends XRPLClientError {\n  constructor(address: string) {\n    super(`Account not found: ${address}`, 'ACCOUNT_NOT_FOUND', { address });\n    this.name = 'AccountNotFoundError';\n  }\n}\n\n/**\n * Transaction timeout error\n */\nexport class TransactionTimeoutError extends XRPLClientError {\n  constructor(hash: string) {\n    super(`Transaction not validated: ${hash}`, 'TX_TIMEOUT', { hash });\n    this.name = 'TransactionTimeoutError';\n  }\n}\n\n/**\n * Max reconnect attempts error\n */\nexport class MaxReconnectAttemptsError extends XRPLClientError {\n  constructor(attempts: number) {\n    super(`Maximum reconnection attempts reached: ${attempts}`, 'MAX_RECONNECT', { attempts });\n    this.name = 'MaxReconnectAttemptsError';\n  }\n}\n\n/**\n * Helper to sleep for specified milliseconds\n */\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * Wrap a promise with a timeout.\n *\n * @param promise - The promise to wrap\n * @param ms - Timeout in milliseconds\n * @param operation - Description of the operation (for error messages)\n * @returns Promise that rejects with XRPLClientError if timeout exceeded\n */\nfunction withTimeout<T>(promise: Promise<T>, ms: number, operation: string): Promise<T> {\n  return new Promise((resolve, reject) => {\n    const timer = setTimeout(() => {\n      reject(new XRPLClientError(`Operation timed out: ${operation}`, 'TIMEOUT', { operation, timeoutMs: ms }));\n    }, ms);\n\n    promise\n      .then((result) => {\n        clearTimeout(timer);\n        resolve(result);\n      })\n      .catch((error) => {\n        clearTimeout(timer);\n        reject(error);\n      });\n  });\n}\n\n/**\n * XRPL Client Wrapper\n *\n * Provides connection management, auto-reconnection, and transaction helpers\n * for interacting with the XRPL.\n */\nexport class XRPLClientWrapper {\n  private client: Client;\n  private readonly network: Network;\n  private readonly nodeUrl: string;\n  private readonly backupUrls: string[];\n  private readonly connectionConfig: ConnectionConfig;\n  private currentUrlIndex: number = 0;\n  private reconnectAttempts: number = 0;\n  private isConnected: boolean = false;\n\n  /**\n   * Create a new XRPL client wrapper\n   *\n   * @param config - Client configuration\n   */\n  constructor(config: XRPLClientConfig) {\n    this.network = config.network;\n    this.nodeUrl = config.nodeUrl ?? getWebSocketUrl(config.network);\n    this.backupUrls = getBackupWebSocketUrls(config.network);\n    this.connectionConfig = {\n      ...getConnectionConfig(),\n      ...config.connectionConfig,\n    };\n\n    // Initialize xrpl.js client\n    this.client = new Client(this.nodeUrl);\n  }\n\n  /**\n   * Get the current network\n   */\n  public getNetwork(): Network {\n    return this.network;\n  }\n\n  /**\n   * Check if client is connected\n   */\n  public isClientConnected(): boolean {\n    return this.isConnected && this.client.isConnected();\n  }\n\n  /**\n   * Connect to XRPL network\n   *\n   * @throws {ConnectionError} If connection fails after all retries\n   */\n  public async connect(): Promise<void> {\n    try {\n      await this.client.connect();\n      this.isConnected = true;\n      this.reconnectAttempts = 0;\n    } catch (error) {\n      this.isConnected = false;\n      throw new ConnectionError(`Failed to connect to ${this.nodeUrl}`, error);\n    }\n  }\n\n  /**\n   * Disconnect from XRPL network\n   */\n  public async disconnect(): Promise<void> {\n    if (this.client.isConnected()) {\n      await this.client.disconnect();\n    }\n    this.isConnected = false;\n  }\n\n  /**\n   * Reconnect with exponential backoff (iterative, not recursive)\n   *\n   * @throws {MaxReconnectAttemptsError} If max attempts exceeded\n   */\n  private async reconnect(): Promise<void> {\n    // Iterative approach to avoid stack overflow\n    while (this.reconnectAttempts < this.connectionConfig.maxReconnectAttempts) {\n      // Calculate backoff delay\n      const delay = Math.min(\n        this.connectionConfig.reconnectDelay *\n          Math.pow(this.connectionConfig.reconnectBackoff, this.reconnectAttempts),\n        30000 // Max 30 seconds\n      );\n\n      await sleep(delay);\n\n      this.reconnectAttempts++;\n\n      try {\n        // Try backup URLs if available\n        if (this.reconnectAttempts > 1 && this.backupUrls.length > 0) {\n          this.currentUrlIndex = (this.currentUrlIndex + 1) % (this.backupUrls.length + 1);\n          const url =\n            this.currentUrlIndex === 0 ? this.nodeUrl : this.backupUrls[this.currentUrlIndex - 1]!;\n\n          // Create new client with backup URL\n          try {\n            await this.client.disconnect();\n          } catch {\n            // Ignore disconnect errors\n          }\n          this.client = new Client(url);\n        }\n\n        await this.client.connect();\n        this.isConnected = true;\n        this.reconnectAttempts = 0;\n        return; // Success - exit the loop\n      } catch (error) {\n        // Continue to next iteration (retry)\n        console.warn(\n          `[XRPLClient] Reconnect attempt ${this.reconnectAttempts} failed:`,\n          error instanceof Error ? error.message : 'Unknown error'\n        );\n      }\n    }\n\n    // All attempts exhausted\n    throw new MaxReconnectAttemptsError(this.reconnectAttempts);\n  }\n\n  /**\n   * Check server health\n   *\n   * @returns True if server is healthy (state is \"full\")\n   */\n  public async isHealthy(): Promise<boolean> {\n    try {\n      const response = await this.client.request({\n        command: 'server_state',\n      });\n      return response.result.state.server_state === 'full';\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get server information\n   *\n   * @returns Server information\n   * @throws {XRPLClientError} If request times out\n   */\n  public async getServerInfo(): Promise<ServerInfo> {\n    const response = await withTimeout(\n      this.client.request({\n        command: 'server_info',\n      }),\n      this.connectionConfig.requestTimeout,\n      'server_info'\n    );\n\n    const info = response.result.info;\n    return {\n      server_state: info.server_state,\n      validated_ledger: info.validated_ledger ?? undefined,\n      complete_ledgers: info.complete_ledgers,\n      peers: info.peers ?? undefined,\n      validation_quorum: info.validation_quorum ?? undefined,\n    };\n  }\n\n  /**\n   * Get account information\n   *\n   * @param address - Account address\n   * @returns Account information\n   * @throws {AccountNotFoundError} If account doesn't exist\n   * @throws {XRPLClientError} If request times out\n   */\n  public async getAccountInfo(address: XRPLAddress): Promise<AccountInfo> {\n    try {\n      const response = (await withTimeout(\n        this.client.request({\n          command: 'account_info',\n          account: address,\n          ledger_index: 'validated',\n        }),\n        this.connectionConfig.requestTimeout,\n        'account_info'\n      )) as AccountInfoResponse;\n\n      const data = response.result.account_data;\n      return {\n        account: data.Account,\n        balance: data.Balance,\n        sequence: data.Sequence,\n        ownerCount: data.OwnerCount,\n        flags: data.Flags,\n        previousTxnID: data.PreviousTxnID,\n        previousTxnLgrSeq: data.PreviousTxnLgrSeq,\n      };\n    } catch (error: unknown) {\n      if (typeof error === 'object' && error !== null && 'data' in error) {\n        const errorData = error as { data?: { error?: string } };\n        if (errorData.data?.error === 'actNotFound') {\n          throw new AccountNotFoundError(address);\n        }\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get account balance in drops\n   *\n   * @param address - Account address\n   * @returns Balance in drops\n   */\n  public async getBalance(address: XRPLAddress): Promise<string> {\n    const accountInfo = await this.getAccountInfo(address);\n    return accountInfo.balance;\n  }\n\n  /**\n   * Get transaction information\n   *\n   * @param hash - Transaction hash\n   * @returns Transaction response\n   */\n  public async getTransaction(hash: TransactionHash): Promise<TxResponse> {\n    return this.client.request({\n      command: 'tx',\n      transaction: hash,\n    }) as Promise<TxResponse>;\n  }\n\n  /**\n   * Wait for transaction validation\n   *\n   * @param hash - Transaction hash\n   * @param options - Wait options\n   * @returns Transaction result\n   * @throws {TransactionTimeoutError} If transaction not validated within timeout\n   */\n  public async waitForTransaction(\n    hash: TransactionHash,\n    options: WaitOptions = {}\n  ): Promise<XRPLTransactionResult> {\n    const timeout = options.timeout ?? 20000;\n    const pollInterval = options.pollInterval ?? 1000;\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < timeout) {\n      try {\n        const response = await this.client.request({\n          command: 'tx',\n          transaction: hash,\n        });\n\n        if (response.result.validated) {\n          const meta = response.result.meta;\n          const transactionResult =\n            typeof meta === 'object' && meta !== null && 'XRPLTransactionResult' in meta\n              ? (meta.XRPLTransactionResult as string)\n              : 'unknown';\n\n          return {\n            hash,\n            resultCode: transactionResult,\n            ledgerIndex: response.result.ledger_index,\n            validated: true,\n            meta: response.result.meta,\n          };\n        }\n      } catch (error: unknown) {\n        // Transaction not found yet - keep waiting\n        if (typeof error === 'object' && error !== null && 'data' in error) {\n          const errorData = error as { data?: { error?: string } };\n          if (errorData.data?.error !== 'txnNotFound') {\n            throw error;\n          }\n        }\n      }\n\n      await sleep(pollInterval);\n    }\n\n    throw new TransactionTimeoutError(hash);\n  }\n\n  /**\n   * Get current ledger index\n   *\n   * @returns Current validated ledger index\n   */\n  public async getCurrentLedgerIndex(): Promise<number> {\n    const response = await this.client.request({\n      command: 'ledger',\n      ledger_index: 'validated',\n    });\n    return response.result.ledger_index;\n  }\n\n  /**\n   * Get fee estimate for a transaction\n   *\n   * @returns Estimated fee in drops\n   */\n  public async getFee(): Promise<string> {\n    const response = await this.client.request({\n      command: 'fee',\n    });\n    return response.result.drops.open_ledger_fee;\n  }\n\n  /**\n   * Get account transaction history\n   *\n   * @param address - Account address\n   * @param options - History options\n   * @returns Array of transactions\n   */\n  public async getAccountTransactions(\n    address: XRPLAddress,\n    options: TxHistoryOptions = {}\n  ): Promise<unknown[]> {\n    const response = await this.client.request({\n      command: 'account_tx',\n      account: address,\n      ledger_index_min: options.ledgerIndexMin ?? -1,\n      ledger_index_max: options.ledgerIndexMax ?? -1,\n      limit: Math.min(options.limit ?? 50, 400),\n      forward: options.forward ?? false,\n    });\n\n    return response.result.transactions.map((tx) => (tx as { tx: unknown }).tx);\n  }\n\n  /**\n   * Submit a signed transaction\n   *\n   * @param signedTx - Signed transaction blob (hex string)\n   * @param options - Submit options\n   * @returns Transaction result\n   */\n  public async submitSignedTransaction(\n    signedTx: string,\n    options: SubmitOptions = {}\n  ): Promise<XRPLTransactionResult> {\n    const opts = {\n      waitForValidation: true,\n      timeout: 20000,\n      failHard: false,\n      ...options,\n    };\n\n    // Submit transaction\n    const response = (await this.client.submit(signedTx, {\n      failHard: opts.failHard,\n    })) as SubmitResponse;\n\n    const { tx_json, engine_result, engine_result_message } = response.result;\n    const hash = tx_json.hash ?? 'unknown';\n\n    // Check if submission succeeded\n    if (engine_result !== 'tesSUCCESS' && !engine_result.startsWith('ter')) {\n      throw new XRPLClientError(\n        `Transaction submission failed: ${engine_result} - ${engine_result_message}`,\n        'TX_SUBMIT_FAILED',\n        { hash, engine_result, engine_result_message }\n      );\n    }\n\n    // Wait for validation if requested\n    if (opts.waitForValidation) {\n      return this.waitForTransaction(hash as TransactionHash, { timeout: opts.timeout });\n    }\n\n    return {\n      hash,\n      resultCode: engine_result,\n      ledgerIndex: undefined,\n      validated: false,\n      meta: undefined,\n    };\n  }\n}\n","/**\n * Signing Service Implementation\n *\n * Orchestrates transaction signing with secure key material handling.\n * Coordinates with keystore, policy engine, and multi-sign orchestrator.\n *\n * @module signing/service\n * @version 1.0.0\n */\n\nimport { Wallet, decode, encode, type Transaction } from 'xrpl';\nimport type { KeystoreProvider } from '../keystore/interface.js';\nimport { SecureBuffer } from '../keystore/secure-buffer.js';\nimport type { AuditLogger } from '../audit/logger.js';\nimport type { MultiSignOrchestrator } from './multisig.js';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Result of a single-sign operation.\n */\nexport interface SignedTransaction {\n  /**\n   * Signed transaction blob (hex encoded).\n   */\n  tx_blob: string;\n\n  /**\n   * Transaction hash.\n   */\n  hash: string;\n\n  /**\n   * Wallet address that signed.\n   */\n  signer_address: string;\n}\n\n/**\n * Error class for signing operations.\n */\nexport class SigningError extends Error {\n  constructor(\n    public code: string,\n    message: string,\n    public details?: unknown\n  ) {\n    super(message);\n    this.name = 'SigningError';\n  }\n}\n\n// ============================================================================\n// SIGNING SERVICE OPTIONS\n// ============================================================================\n\n/**\n * Configuration options for SigningService.\n */\nexport interface SigningServiceOptions {\n  /**\n   * If true, reject unknown transaction types instead of warning.\n   * Recommended for production to avoid signing experimental/unknown transactions.\n   * Default: false (warn only)\n   */\n  strictTransactionTypes?: boolean;\n}\n\n// ============================================================================\n// SIGNING SERVICE\n// ============================================================================\n\n/**\n * SigningService - Orchestrates secure transaction signing.\n *\n * Responsibilities:\n * - Load wallet keys from keystore securely\n * - Sign transactions with proper XRPL formatting\n * - Zero key material immediately after use\n * - Audit all signing operations\n * - Coordinate multi-signature workflows\n *\n * Security Features:\n * - Uses SecureBuffer for key material\n * - Never exposes private keys to calling code\n * - Validates transaction format before signing\n * - Logs all signing attempts (success and failure)\n *\n * @example\n * ```typescript\n * const signer = new SigningService(keystore, auditLogger);\n *\n * // Single-sign transaction\n * const result = await signer.sign(\n *   'wallet_123',\n *   unsignedTxBlob,\n *   password\n * );\n *\n * console.log('Signed:', result.tx_blob);\n * console.log('Hash:', result.hash);\n * ```\n */\nexport class SigningService {\n  private readonly options: Required<SigningServiceOptions>;\n\n  constructor(\n    private readonly keystore: KeystoreProvider,\n    private readonly auditLogger: AuditLogger,\n    private readonly multiSignOrchestrator?: MultiSignOrchestrator,\n    options?: SigningServiceOptions\n  ) {\n    this.options = {\n      strictTransactionTypes: options?.strictTransactionTypes ?? false,\n    };\n  }\n\n  /**\n   * Sign a transaction with a wallet's private key.\n   *\n   * Process:\n   * 1. Decode unsigned transaction blob\n   * 2. Validate transaction structure\n   * 3. Load wallet key from keystore (SecureBuffer)\n   * 4. Create XRPL Wallet instance\n   * 5. Sign transaction\n   * 6. Zero key material\n   * 7. Return signed blob + hash\n   *\n   * @param walletId - Internal wallet identifier\n   * @param unsignedTx - Unsigned transaction blob (hex) or Transaction object\n   * @param password - User password for key decryption\n   * @param multiSign - Whether to sign for multi-signature (default: false)\n   * @returns Signed transaction with hash\n   *\n   * @throws SigningError TRANSACTION_DECODE_ERROR - Invalid transaction format\n   * @throws SigningError WALLET_NOT_FOUND - Wallet doesn't exist\n   * @throws SigningError AUTHENTICATION_FAILED - Incorrect password\n   * @throws SigningError SIGNING_FAILED - Cryptographic signing error\n   */\n  async sign(\n    walletId: string,\n    unsignedTx: string | Transaction,\n    password: string,\n    multiSign: boolean = false\n  ): Promise<SignedTransaction> {\n    let secureKey: SecureBuffer | null = null;\n    const startTime = Date.now();\n\n    try {\n      // Step 1: Decode transaction if it's a blob\n      let transaction: Transaction;\n      if (typeof unsignedTx === 'string') {\n        try {\n          transaction = decode(unsignedTx) as Transaction;\n        } catch (error) {\n          throw new SigningError(\n            'TRANSACTION_DECODE_ERROR',\n            `Failed to decode transaction: ${error instanceof Error ? error.message : 'Unknown error'}`,\n            { unsignedTx }\n          );\n        }\n      } else {\n        transaction = unsignedTx;\n      }\n\n      // Step 2: Validate transaction structure\n      this.validateTransaction(transaction);\n\n      // Step 3: Load wallet metadata\n      const walletEntry = await this.keystore.getWallet(walletId);\n\n      // Step 4: Try to load regular key first (more secure), fall back to master key\n      let usingRegularKey = false;\n      try {\n        // Check if keystore supports regular keys and has one stored\n        if ('loadRegularKey' in this.keystore) {\n          const keystoreWithRegularKey = this.keystore as typeof this.keystore & {\n            loadRegularKey: (walletId: string, password: string) => Promise<SecureBuffer | null>;\n          };\n          const regularKey = await keystoreWithRegularKey.loadRegularKey(walletId, password);\n          if (regularKey) {\n            secureKey = regularKey;\n            usingRegularKey = true;\n          }\n        }\n\n        // Fall back to master key if no regular key\n        if (!secureKey) {\n          secureKey = await this.keystore.loadKey(walletId, password);\n        }\n      } catch (error) {\n        // Audit failed authentication\n        await this.auditLogger.log({\n          event: 'authentication_failed',\n          wallet_id: walletId,\n          wallet_address: walletEntry.address,\n          context: 'Authentication failed during transaction signing',\n        });\n\n        throw new SigningError(\n          'AUTHENTICATION_FAILED',\n          'Failed to decrypt wallet key - incorrect password or corrupted keystore',\n          { wallet_id: walletId }\n        );\n      }\n\n      // Step 5: Create ephemeral Wallet instance using SecureBuffer\n      let wallet: Wallet;\n      try {\n        // Convert buffer to seed string for xrpl.js Wallet\n        const seedString = secureKey.getBuffer().toString('utf-8');\n        wallet = Wallet.fromSeed(seedString);\n\n        // For master key, verify address matches\n        // For regular key, address will be different (that's expected)\n        if (!usingRegularKey && wallet.address !== walletEntry.address) {\n          throw new Error('Wallet address mismatch - keystore corruption detected');\n        }\n      } catch (error) {\n        throw new SigningError(\n          'WALLET_CREATION_ERROR',\n          `Failed to create wallet from key: ${error instanceof Error ? error.message : 'Unknown error'}`,\n          { wallet_id: walletId }\n        );\n      }\n\n      // Step 6: Sign the transaction\n      let signedResult: { tx_blob: string; hash: string };\n      try {\n        if (multiSign) {\n          // Multi-sign mode: SigningPubKey must be empty\n          signedResult = wallet.sign(transaction, true);\n        } else {\n          // Single-sign mode (normal)\n          signedResult = wallet.sign(transaction);\n        }\n      } catch (error) {\n        throw new SigningError(\n          'SIGNING_FAILED',\n          `Cryptographic signing failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n          { wallet_id: walletId, transaction_type: transaction.TransactionType }\n        );\n      }\n\n      // Step 7: Audit successful signing\n      await this.auditLogger.log({\n        event: 'transaction_signed',\n        wallet_id: walletId,\n        wallet_address: walletEntry.address,\n        transaction_type: transaction.TransactionType as any,\n        tx_hash: signedResult.hash,\n        context: multiSign ? 'Multi-signature signing' : 'Single signature signing',\n      });\n\n      return {\n        tx_blob: signedResult.tx_blob,\n        hash: signedResult.hash,\n        signer_address: wallet.address,\n      };\n    } catch (error) {\n      // Audit signing failure (if not already logged)\n      if (error instanceof SigningError && error.code !== 'AUTHENTICATION_FAILED') {\n        await this.auditLogger.log({\n          event: 'transaction_failed',\n          wallet_id: walletId,\n          context: `Signing failed: ${error.code} - ${error.message}`,\n        });\n      }\n\n      throw error;\n    } finally {\n      // Step 8: CRITICAL - Zero key material\n      if (secureKey) {\n        secureKey.dispose();\n      }\n    }\n  }\n\n  /**\n   * Sign a transaction for multi-signature workflow.\n   *\n   * This is a convenience wrapper around sign() with multiSign=true.\n   *\n   * @param walletId - Internal wallet identifier\n   * @param unsignedTx - Unsigned transaction blob or object\n   * @param password - User password\n   * @returns Multi-signature compatible signed transaction\n   */\n  async signForMultiSig(\n    walletId: string,\n    unsignedTx: string | Transaction,\n    password: string\n  ): Promise<SignedTransaction> {\n    return this.sign(walletId, unsignedTx, password, true);\n  }\n\n  /**\n   * Decode and validate a transaction blob without signing.\n   *\n   * Useful for displaying transaction details before signing.\n   *\n   * @param txBlob - Transaction blob (hex encoded)\n   * @returns Decoded transaction object\n   * @throws SigningError TRANSACTION_DECODE_ERROR\n   */\n  decodeTransaction(txBlob: string): Transaction {\n    try {\n      return decode(txBlob) as Transaction;\n    } catch (error) {\n      throw new SigningError(\n        'TRANSACTION_DECODE_ERROR',\n        `Failed to decode transaction: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        { tx_blob: txBlob }\n      );\n    }\n  }\n\n  /**\n   * Encode a transaction object to blob format.\n   *\n   * @param transaction - Transaction object\n   * @returns Hex-encoded transaction blob\n   * @throws SigningError TRANSACTION_ENCODE_ERROR\n   */\n  encodeTransaction(transaction: Transaction): string {\n    try {\n      return encode(transaction);\n    } catch (error) {\n      throw new SigningError(\n        'TRANSACTION_ENCODE_ERROR',\n        `Failed to encode transaction: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        { transaction }\n      );\n    }\n  }\n\n  /**\n   * Validate transaction structure before signing.\n   *\n   * Checks:\n   * - Required fields present\n   * - Account address is valid\n   * - TransactionType is recognized\n   *\n   * @param transaction - Transaction to validate\n   * @throws SigningError INVALID_TRANSACTION\n   */\n  private validateTransaction(transaction: Transaction): void {\n    // Check required fields\n    if (!transaction.TransactionType) {\n      throw new SigningError(\n        'INVALID_TRANSACTION',\n        'Transaction missing required field: TransactionType'\n      );\n    }\n\n    if (!transaction.Account) {\n      throw new SigningError(\n        'INVALID_TRANSACTION',\n        'Transaction missing required field: Account'\n      );\n    }\n\n    // Validate Account address format (basic check)\n    if (!transaction.Account.startsWith('r') || transaction.Account.length < 25) {\n      throw new SigningError(\n        'INVALID_TRANSACTION',\n        `Invalid Account address format: ${transaction.Account}`\n      );\n    }\n\n    // Check for common XRPL transaction types\n    const validTypes = [\n      'Payment',\n      'OfferCreate',\n      'OfferCancel',\n      'TrustSet',\n      'AccountSet',\n      'SetRegularKey',\n      'SignerListSet',\n      'EscrowCreate',\n      'EscrowFinish',\n      'EscrowCancel',\n      'PaymentChannelCreate',\n      'PaymentChannelClaim',\n      'PaymentChannelFund',\n      'CheckCreate',\n      'CheckCash',\n      'CheckCancel',\n      'NFTokenMint',\n      'NFTokenBurn',\n      'NFTokenCreateOffer',\n      'NFTokenCancelOffer',\n      'NFTokenAcceptOffer',\n      'AMMCreate',\n      'AMMDeposit',\n      'AMMWithdraw',\n      'AMMVote',\n      'AMMBid',\n      'AMMDelete',\n      'DepositPreauth',\n      'AccountDelete',\n    ];\n\n    if (!validTypes.includes(transaction.TransactionType)) {\n      if (this.options.strictTransactionTypes) {\n        // Strict mode: reject unknown transaction types\n        throw new SigningError(\n          'UNKNOWN_TRANSACTION_TYPE',\n          `Unknown transaction type: ${transaction.TransactionType}. ` +\n            `Enable experimental transaction support by setting strictTransactionTypes: false`,\n          { transaction_type: transaction.TransactionType }\n        );\n      } else {\n        // Permissive mode: log warning but allow\n        console.warn(\n          `[SigningService] Unknown TransactionType: ${transaction.TransactionType}. ` +\n            `This may be an experimental or new transaction type.`\n        );\n      }\n    }\n  }\n}\n","/**\n * Multi-Signature Orchestration\n *\n * Implements XRPL native multi-signature workflows for Tier 3 transactions.\n * Coordinates signature collection, quorum tracking, and transaction assembly.\n *\n * @module signing/multisig\n * @version 1.0.0\n */\n\nimport { randomUUID } from 'crypto';\nimport { Client, Wallet, multisign, decode, type Transaction } from 'xrpl';\nimport { verify } from 'ripple-keypairs';\nimport type { AuditLogger } from '../audit/logger.js';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Signer configuration entry.\n */\nexport interface SignerConfig {\n  /**\n   * XRPL address of the signer.\n   */\n  address: string;\n\n  /**\n   * Weight assigned to this signer.\n   */\n  weight: number;\n\n  /**\n   * Role designation for UI/audit.\n   */\n  role: 'agent' | 'human_approver' | 'emergency';\n\n  /**\n   * Display name for notifications.\n   */\n  name?: string;\n\n  /**\n   * Contact info for notifications.\n   */\n  email?: string;\n\n  /**\n   * Optional: Hardware wallet locator.\n   */\n  walletLocator?: string;\n}\n\n/**\n * SignerList configuration for a wallet.\n */\nexport interface SignerListConfig {\n  /**\n   * Array of authorized signers.\n   */\n  signers: SignerConfig[];\n\n  /**\n   * Total weight required for valid signature.\n   */\n  quorum: number;\n\n  /**\n   * Timeout in seconds for pending requests.\n   * Default: 86400 (24 hours)\n   */\n  timeout_seconds?: number;\n}\n\n/**\n * Multi-signature request status.\n */\nexport type MultiSignStatus = 'pending' | 'approved' | 'rejected' | 'expired' | 'completed';\n\n/**\n * Signer state tracking.\n */\nexport interface SignerState {\n  /**\n   * Signer's XRPL address.\n   */\n  address: string;\n\n  /**\n   * Role designation.\n   */\n  role: 'agent' | 'human_approver' | 'emergency';\n\n  /**\n   * Assigned weight.\n   */\n  weight: number;\n\n  /**\n   * Whether this signer has signed.\n   */\n  signed: boolean;\n\n  /**\n   * Signature blob (if signed).\n   */\n  signature?: string;\n\n  /**\n   * When signature was received.\n   */\n  signed_at?: string; // ISO 8601\n}\n\n/**\n * Multi-signature request state.\n */\nexport interface MultiSignRequest {\n  /**\n   * Unique identifier (UUID v4).\n   */\n  id: string;\n\n  /**\n   * Internal wallet identifier.\n   */\n  wallet_id: string;\n\n  /**\n   * XRPL address of the account.\n   */\n  wallet_address: string;\n\n  /**\n   * Transaction details.\n   */\n  transaction: {\n    /**\n     * Transaction type (e.g., 'Payment', 'AccountSet').\n     */\n    type: string;\n\n    /**\n     * Amount in drops (if applicable).\n     */\n    amount_drops?: string;\n\n    /**\n     * Destination address (if applicable).\n     */\n    destination?: string;\n\n    /**\n     * Unsigned transaction blob (hex).\n     */\n    unsigned_blob: string;\n\n    /**\n     * Decoded transaction JSON (for display).\n     */\n    decoded: Transaction;\n  };\n\n  /**\n   * Signer tracking.\n   */\n  signers: SignerState[];\n\n  /**\n   * Quorum tracking.\n   */\n  quorum: {\n    /**\n     * Total weight required.\n     */\n    required: number;\n\n    /**\n     * Current collected weight.\n     */\n    collected: number;\n\n    /**\n     * Whether quorum is met.\n     */\n    met: boolean;\n  };\n\n  /**\n   * Request lifecycle status.\n   */\n  status: MultiSignStatus;\n\n  /**\n   * Timestamps.\n   */\n  created_at: string; // ISO 8601\n  expires_at: string; // ISO 8601\n  completed_at?: string; // ISO 8601\n\n  /**\n   * Result (if completed).\n   */\n  tx_hash?: string;\n\n  /**\n   * Rejection details (if rejected).\n   */\n  rejection?: {\n    rejecting_address: string;\n    reason: string;\n    rejected_at: string; // ISO 8601\n  };\n\n  /**\n   * Audit context.\n   */\n  context?: string;\n\n  /**\n   * Notification tracking.\n   */\n  notifications_sent: Array<{\n    recipient: string;\n    sent_at: string;\n    type: 'created' | 'signature_added' | 'completed' | 'rejected' | 'expired';\n  }>;\n}\n\n/**\n * Result of completing a multi-sign request.\n */\nexport interface MultiSignCompleteResult {\n  /**\n   * Request ID.\n   */\n  request_id: string;\n\n  /**\n   * Fully assembled multi-signed transaction blob (hex).\n   */\n  signed_tx: string;\n\n  /**\n   * Transaction hash from XRPL.\n   */\n  tx_hash: string;\n\n  /**\n   * Final quorum weight collected.\n   */\n  final_quorum: number;\n\n  /**\n   * Addresses that signed.\n   */\n  signers: string[];\n\n  /**\n   * Timestamp when submitted to XRPL.\n   */\n  submitted_at: string; // ISO 8601\n}\n\n/**\n * Multi-signature storage interface.\n */\nexport interface MultiSignStore {\n  /**\n   * Create a new multi-sign request.\n   */\n  create(request: MultiSignRequest): Promise<void>;\n\n  /**\n   * Get request by ID.\n   */\n  get(requestId: string): Promise<MultiSignRequest | null>;\n\n  /**\n   * Update existing request.\n   */\n  update(request: MultiSignRequest): Promise<void>;\n\n  /**\n   * List requests by wallet ID.\n   */\n  listByWallet(walletId: string, includeCompleted?: boolean): Promise<MultiSignRequest[]>;\n\n  /**\n   * List requests by status.\n   */\n  listByStatus(status: MultiSignStatus): Promise<MultiSignRequest[]>;\n\n  /**\n   * Find pending requests older than timestamp.\n   */\n  findPendingOlderThan(timestamp: Date): Promise<MultiSignRequest[]>;\n\n  /**\n   * Delete completed/expired requests older than retention period.\n   */\n  cleanup(retentionDays: number): Promise<number>;\n}\n\n/**\n * Notification service interface.\n */\nexport interface NotificationService {\n  /**\n   * Send notification about multi-sign event.\n   *\n   * @param notification - Notification details\n   * @returns Array of successful deliveries\n   */\n  notify(notification: unknown): Promise<unknown[]>;\n\n  /**\n   * Send reminder for pending signature.\n   *\n   * @param requestId - Multi-sign request ID\n   * @param recipientAddress - Signer's XRPL address\n   */\n  sendReminder(requestId: string, recipientAddress: string): Promise<void>;\n}\n\n/**\n * Multi-signature error class.\n */\nexport class MultiSignError extends Error {\n  constructor(\n    public code: string,\n    message: string,\n    public details?: unknown\n  ) {\n    super(message);\n    this.name = 'MultiSignError';\n  }\n}\n\n// ============================================================================\n// MULTI-SIGN ORCHESTRATOR\n// ============================================================================\n\n/**\n * MultiSignOrchestrator - Coordinates multi-signature workflows.\n *\n * Responsibilities:\n * - Create pending multi-sign requests\n * - Collect signatures from multiple signers\n * - Track quorum progress\n * - Assemble final multi-signed transaction\n * - Handle timeouts and errors\n * - Notify approvers\n *\n * Security Features:\n * - Validates all signatures cryptographically\n * - Enforces quorum requirements\n * - Prevents duplicate signatures\n * - Handles request expiration\n * - Audits all operations\n *\n * @example\n * ```typescript\n * const orchestrator = new MultiSignOrchestrator(\n *   xrplClient,\n *   store,\n *   notifier,\n *   auditLogger\n * );\n *\n * // Initiate multi-sign request\n * const request = await orchestrator.initiate(\n *   'wallet_123',\n *   'rWallet...',\n *   unsignedTxBlob,\n *   signerConfig,\n *   'High-value payment'\n * );\n *\n * // Human approver adds signature\n * await orchestrator.addSignature(\n *   request.id,\n *   humanSignatureBlob,\n *   'rHuman...'\n * );\n *\n * // Complete and submit\n * const result = await orchestrator.complete(request.id, agentWallet);\n * ```\n */\nexport class MultiSignOrchestrator {\n  constructor(\n    private readonly xrplClient: Client,\n    private readonly store: MultiSignStore,\n    private readonly notificationService: NotificationService,\n    private readonly auditLogger: AuditLogger\n  ) {}\n\n  /**\n   * Initiate a new multi-signature request.\n   *\n   * Creates a pending request, notifies approvers, and returns\n   * the request ID for status tracking.\n   *\n   * @param walletId - Internal wallet identifier\n   * @param walletAddress - XRPL address of the account\n   * @param unsignedTx - Unsigned transaction blob (hex)\n   * @param signerConfig - SignerList configuration for this wallet\n   * @param context - Human-readable context for audit\n   * @returns Multi-signature request with pending status\n   *\n   * @throws MultiSignError WALLET_NOT_FOUND - Wallet doesn't exist\n   * @throws MultiSignError SIGNERLIST_NOT_CONFIGURED - Wallet has no SignerList\n   * @throws MultiSignError INVALID_TRANSACTION - Cannot decode transaction\n   */\n  async initiate(\n    walletId: string,\n    walletAddress: string,\n    unsignedTx: string,\n    signerConfig: SignerListConfig,\n    context?: string\n  ): Promise<MultiSignRequest> {\n    // Validate SignerList configuration\n    if (!signerConfig || signerConfig.signers.length === 0) {\n      throw new MultiSignError(\n        'SIGNERLIST_NOT_CONFIGURED',\n        'Wallet does not have multi-signature configured'\n      );\n    }\n\n    // Decode transaction\n    let decodedTx: Transaction;\n    try {\n      const { decode } = await import('xrpl');\n      decodedTx = decode(unsignedTx) as Transaction;\n    } catch (error) {\n      throw new MultiSignError(\n        'INVALID_TRANSACTION',\n        `Cannot decode transaction: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        { unsigned_tx: unsignedTx }\n      );\n    }\n\n    // Create request\n    const requestId = randomUUID();\n    const now = new Date();\n    const timeoutSeconds = signerConfig.timeout_seconds || 86400; // 24 hours default\n    const expiresAt = new Date(now.getTime() + timeoutSeconds * 1000);\n\n    const amountDrops = this.extractAmount(decodedTx);\n    const destination = this.extractDestination(decodedTx);\n\n    const request: MultiSignRequest = {\n      id: requestId,\n      wallet_id: walletId,\n      wallet_address: walletAddress,\n      transaction: {\n        type: decodedTx.TransactionType,\n        ...(amountDrops !== undefined && { amount_drops: amountDrops }),\n        ...(destination !== undefined && { destination }),\n        unsigned_blob: unsignedTx,\n        decoded: decodedTx,\n      },\n      signers: signerConfig.signers.map((s) => ({\n        address: s.address,\n        role: s.role,\n        weight: s.weight,\n        signed: false,\n      })),\n      quorum: {\n        required: signerConfig.quorum,\n        collected: 0,\n        met: false,\n      },\n      status: 'pending',\n      created_at: now.toISOString(),\n      expires_at: expiresAt.toISOString(),\n      ...(context && { context }),\n      notifications_sent: [],\n    };\n\n    // Store request\n    await this.store.create(request);\n\n    // Audit\n    await this.auditLogger.log({\n      event: 'approval_requested',\n      wallet_id: walletId,\n      wallet_address: walletAddress,\n      transaction_type: decodedTx.TransactionType as any,\n      context:\n        context || `Multi-sign requested: ${signerConfig.quorum} of ${signerConfig.signers.length} signatures`,\n    });\n\n    // Notify approvers (async, don't wait)\n    this.notifySigners(request, 'created').catch((err) =>\n      console.error('Failed to send notifications:', err)\n    );\n\n    return request;\n  }\n\n  /**\n   * Add a signature from a human approver.\n   *\n   * Validates the signature, stores it, and checks if quorum is met.\n   * Updates request status and notifies if ready for completion.\n   *\n   * @param requestId - Multi-sign request UUID\n   * @param signature - Signed transaction from approver\n   * @param signerAddress - Address of the signer (for validation)\n   * @returns Updated request with new signature and quorum status\n   *\n   * @throws MultiSignError REQUEST_NOT_FOUND - Request doesn't exist\n   * @throws MultiSignError REQUEST_EXPIRED - Request timeout exceeded\n   * @throws MultiSignError REQUEST_COMPLETED - Already finalized\n   * @throws MultiSignError INVALID_SIGNER - Address not in SignerList\n   * @throws MultiSignError DUPLICATE_SIGNATURE - Signer already signed\n   * @throws MultiSignError SIGNATURE_INVALID - Cryptographic verification failed\n   */\n  async addSignature(\n    requestId: string,\n    signature: string,\n    signerAddress: string\n  ): Promise<MultiSignRequest> {\n    // Load request\n    const request = await this.store.get(requestId);\n    if (!request) {\n      throw new MultiSignError('REQUEST_NOT_FOUND', `No request found with ID ${requestId}`);\n    }\n\n    // Check expiration\n    if (new Date(request.expires_at) < new Date()) {\n      throw new MultiSignError('REQUEST_EXPIRED', 'Multi-sign request has expired');\n    }\n\n    // Check status\n    if (request.status === 'completed') {\n      throw new MultiSignError('REQUEST_COMPLETED', 'Request already completed');\n    }\n    if (request.status === 'rejected') {\n      throw new MultiSignError('REQUEST_REJECTED', 'Request has been rejected');\n    }\n\n    // Find signer\n    const signer = request.signers.find((s) => s.address === signerAddress);\n    if (!signer) {\n      throw new MultiSignError(\n        'INVALID_SIGNER',\n        `Address ${signerAddress} is not in the SignerList`,\n        { signer_address: signerAddress, request_id: requestId }\n      );\n    }\n\n    // Check duplicate\n    if (signer.signed) {\n      throw new MultiSignError(\n        'DUPLICATE_SIGNATURE',\n        `Signer ${signerAddress} has already signed this request`\n      );\n    }\n\n    // Validate signature cryptographically\n    const validationResult = this.validateSignature(\n      signature,\n      signerAddress,\n      request.transaction.unsigned_blob\n    );\n\n    if (!validationResult.valid) {\n      throw new MultiSignError(\n        'SIGNATURE_INVALID',\n        `Signature validation failed: ${validationResult.reason}`,\n        { signer_address: signerAddress, request_id: requestId }\n      );\n    }\n\n    // Update signer state\n    signer.signed = true;\n    signer.signature = signature;\n    signer.signed_at = new Date().toISOString();\n\n    // Recalculate quorum\n    const collectedWeight = request.signers\n      .filter((s) => s.signed)\n      .reduce((sum, s) => sum + s.weight, 0);\n\n    request.quorum.collected = collectedWeight;\n    request.quorum.met = collectedWeight >= request.quorum.required;\n\n    // Update status\n    if (request.quorum.met) {\n      request.status = 'approved';\n    }\n\n    // Store update\n    await this.store.update(request);\n\n    // Audit\n    await this.auditLogger.log({\n      event: 'approval_granted',\n      wallet_id: request.wallet_id,\n      wallet_address: request.wallet_address,\n      context: `Signature added by ${signerAddress} (${signer.role}). Quorum: ${collectedWeight}/${request.quorum.required}`,\n    });\n\n    // Notify if quorum met\n    if (request.quorum.met) {\n      this.notifySigners(request, 'signature_added').catch((err) =>\n        console.error('Failed to send notifications:', err)\n      );\n    }\n\n    return request;\n  }\n\n  /**\n   * Complete multi-signature and submit to XRPL.\n   *\n   * Verifies quorum is met, adds agent signature if needed,\n   * assembles the final multi-signed transaction, and submits.\n   *\n   * @param requestId - Multi-sign request UUID\n   * @param agentWallet - Agent's wallet (for final signature if needed)\n   * @returns Completed transaction with hash\n   *\n   * @throws MultiSignError REQUEST_NOT_FOUND - Request doesn't exist\n   * @throws MultiSignError REQUEST_EXPIRED - Request timeout exceeded\n   * @throws MultiSignError QUORUM_NOT_MET - Insufficient signatures\n   * @throws MultiSignError SUBMISSION_FAILED - XRPL submission error\n   */\n  async complete(requestId: string, agentWallet?: Wallet): Promise<MultiSignCompleteResult> {\n    // Load request\n    const request = await this.store.get(requestId);\n    if (!request) {\n      throw new MultiSignError('REQUEST_NOT_FOUND', `No request found with ID ${requestId}`);\n    }\n\n    // Check expiration\n    if (new Date(request.expires_at) < new Date()) {\n      throw new MultiSignError('REQUEST_EXPIRED', 'Multi-sign request has expired');\n    }\n\n    // Check if agent signature is needed\n    const agentSigner = request.signers.find((s) => s.role === 'agent');\n    if (agentSigner && !agentSigner.signed && agentWallet) {\n      // Add agent signature\n      const agentSig = agentWallet.sign(request.transaction.decoded, true);\n      agentSigner.signed = true;\n      agentSigner.signature = agentSig.tx_blob;\n      agentSigner.signed_at = new Date().toISOString();\n\n      // Recalculate quorum\n      const collectedWeight = request.signers\n        .filter((s) => s.signed)\n        .reduce((sum, s) => sum + s.weight, 0);\n      request.quorum.collected = collectedWeight;\n      request.quorum.met = collectedWeight >= request.quorum.required;\n    }\n\n    // Verify quorum\n    if (!request.quorum.met) {\n      throw new MultiSignError(\n        'QUORUM_NOT_MET',\n        `Collected weight ${request.quorum.collected} < required ${request.quorum.required}`\n      );\n    }\n\n    // Assemble multi-signed transaction\n    const signatures = request.signers.filter((s) => s.signed && s.signature).map((s) => s.signature!);\n\n    if (signatures.length === 0) {\n      throw new MultiSignError('NO_SIGNATURES', 'No signatures collected');\n    }\n\n    const multiSignedTx = multisign(signatures);\n\n    // Submit to XRPL\n    let txHash: string;\n    try {\n      const response = await this.xrplClient.submitAndWait(multiSignedTx, {\n        autofill: false,\n        failHard: true,\n      });\n\n      const meta = response.result.meta;\n      const result =\n        typeof meta === 'object' && meta !== null && 'TransactionResult' in meta\n          ? (meta.TransactionResult as string)\n          : 'UNKNOWN';\n      txHash = response.result.hash;\n\n      if (result !== 'tesSUCCESS') {\n        throw new Error(`Transaction failed with result: ${result}`);\n      }\n    } catch (error) {\n      throw new MultiSignError(\n        'SUBMISSION_FAILED',\n        `Failed to submit multi-signed transaction: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        { request_id: requestId }\n      );\n    }\n\n    // Update request\n    request.status = 'completed';\n    request.completed_at = new Date().toISOString();\n    request.tx_hash = txHash;\n    await this.store.update(request);\n\n    // Audit\n    await this.auditLogger.log({\n      event: 'transaction_submitted',\n      wallet_id: request.wallet_id,\n      wallet_address: request.wallet_address,\n      transaction_type: request.transaction.type as any,\n      tx_hash: txHash,\n      context: `Multi-signed transaction completed with ${signatures.length} signatures`,\n    });\n\n    return {\n      request_id: requestId,\n      signed_tx: multiSignedTx,\n      tx_hash: txHash,\n      final_quorum: request.quorum.collected,\n      signers: request.signers.filter((s) => s.signed).map((s) => s.address),\n      submitted_at: new Date().toISOString(),\n    };\n  }\n\n  /**\n   * Reject a pending multi-sign request.\n   *\n   * Human approver explicitly rejects the transaction.\n   * Discards all collected signatures and logs rejection.\n   *\n   * @param requestId - Multi-sign request UUID\n   * @param rejectingAddress - Address of the rejecting approver\n   * @param reason - Human-readable rejection reason\n   * @returns Updated request with rejected status\n   *\n   * @throws MultiSignError REQUEST_NOT_FOUND - Request doesn't exist\n   * @throws MultiSignError REQUEST_COMPLETED - Already finalized\n   * @throws MultiSignError UNAUTHORIZED_REJECTOR - Not an authorized signer\n   */\n  async reject(requestId: string, rejectingAddress: string, reason: string): Promise<MultiSignRequest> {\n    const request = await this.store.get(requestId);\n    if (!request) {\n      throw new MultiSignError('REQUEST_NOT_FOUND', `No request found with ID ${requestId}`);\n    }\n\n    if (request.status === 'completed') {\n      throw new MultiSignError('REQUEST_COMPLETED', 'Cannot reject completed request');\n    }\n\n    // Verify rejector is authorized\n    const rejector = request.signers.find((s) => s.address === rejectingAddress);\n    if (!rejector) {\n      throw new MultiSignError(\n        'UNAUTHORIZED_REJECTOR',\n        `Address ${rejectingAddress} is not an authorized signer`\n      );\n    }\n\n    // Update request\n    request.status = 'rejected';\n    request.rejection = {\n      rejecting_address: rejectingAddress,\n      reason,\n      rejected_at: new Date().toISOString(),\n    };\n    await this.store.update(request);\n\n    // Audit\n    await this.auditLogger.log({\n      event: 'approval_denied',\n      wallet_id: request.wallet_id,\n      wallet_address: request.wallet_address,\n      context: `Rejected by ${rejectingAddress}: ${reason}`,\n    });\n\n    return request;\n  }\n\n  /**\n   * Get current status of a multi-sign request.\n   *\n   * @param requestId - Multi-sign request UUID\n   * @returns Current request state with signatures and quorum\n   *\n   * @throws MultiSignError REQUEST_NOT_FOUND - Request doesn't exist\n   */\n  async getStatus(requestId: string): Promise<MultiSignRequest> {\n    const request = await this.store.get(requestId);\n    if (!request) {\n      throw new MultiSignError('REQUEST_NOT_FOUND', `No request found with ID ${requestId}`);\n    }\n    return request;\n  }\n\n  /**\n   * List all pending multi-sign requests for a wallet.\n   *\n   * @param walletId - Internal wallet identifier\n   * @param includeExpired - Include expired requests (default: false)\n   * @returns Array of pending requests sorted by creation time\n   */\n  async listPending(walletId: string, includeExpired: boolean = false): Promise<MultiSignRequest[]> {\n    return this.store.listByWallet(walletId, false);\n  }\n\n  /**\n   * Cancel an expired request.\n   *\n   * Automated cleanup of requests that exceeded timeout.\n   * Called by scheduled task, not directly by users.\n   *\n   * @param requestId - Multi-sign request UUID\n   * @returns Updated request with expired status\n   *\n   * @internal\n   */\n  async expire(requestId: string): Promise<MultiSignRequest> {\n    const request = await this.store.get(requestId);\n    if (!request) {\n      throw new MultiSignError('REQUEST_NOT_FOUND', `No request found with ID ${requestId}`);\n    }\n\n    request.status = 'expired';\n    await this.store.update(request);\n\n    await this.auditLogger.log({\n      event: 'approval_expired',\n      wallet_id: request.wallet_id,\n      wallet_address: request.wallet_address,\n      context: `Request expired with ${request.signers.filter((s) => s.signed).length}/${request.quorum.required} signatures`,\n    });\n\n    return request;\n  }\n\n  // ==========================================================================\n  // SIGNATURE VALIDATION\n  // ==========================================================================\n\n  /**\n   * Validate a multi-signature cryptographically.\n   *\n   * Verifies that:\n   * 1. The signature blob is a valid signed transaction\n   * 2. The signer in the blob matches the claimed signer address\n   * 3. The signature covers the expected unsigned transaction\n   *\n   * @param signatureBlob - Signed transaction blob from the signer\n   * @param expectedSigner - Expected signer's XRPL address\n   * @param unsignedBlob - Original unsigned transaction blob\n   * @returns Validation result with reason if invalid\n   */\n  private validateSignature(\n    signatureBlob: string,\n    expectedSigner: string,\n    unsignedBlob: string\n  ): { valid: boolean; reason?: string } {\n    try {\n      // Decode the signed transaction\n      let signedTx: any;\n      try {\n        signedTx = decode(signatureBlob);\n      } catch (error) {\n        return { valid: false, reason: 'Invalid transaction blob format' };\n      }\n\n      // For multi-sign, the transaction should have Signers array\n      if (!signedTx.Signers || !Array.isArray(signedTx.Signers)) {\n        // Single signature format - check TxnSignature exists\n        if (!signedTx.TxnSignature) {\n          return { valid: false, reason: 'No signature found in transaction' };\n        }\n\n        // Verify the signing account matches (for single-sign format)\n        if (signedTx.SigningPubKey) {\n          // Derive address from public key and verify\n          try {\n            const signerWallet = new Wallet(signedTx.SigningPubKey, '0'.repeat(64));\n            if (signerWallet.classicAddress !== expectedSigner) {\n              return {\n                valid: false,\n                reason: `Signer mismatch: expected ${expectedSigner}, got ${signerWallet.classicAddress}`,\n              };\n            }\n          } catch {\n            return { valid: false, reason: 'Could not derive address from signing public key' };\n          }\n        }\n\n        return { valid: true };\n      }\n\n      // Multi-sign format - check Signers array\n      const signerEntry = signedTx.Signers.find(\n        (s: any) => s.Signer?.Account === expectedSigner\n      );\n\n      if (!signerEntry) {\n        return {\n          valid: false,\n          reason: `No signature from expected signer ${expectedSigner}`,\n        };\n      }\n\n      // Verify the Signer entry has required fields\n      if (!signerEntry.Signer?.TxnSignature || !signerEntry.Signer?.SigningPubKey) {\n        return { valid: false, reason: 'Incomplete signer entry' };\n      }\n\n      // Verify the public key corresponds to the claimed address\n      try {\n        const signerWallet = new Wallet(signerEntry.Signer.SigningPubKey, '0'.repeat(64));\n        if (signerWallet.classicAddress !== expectedSigner) {\n          return {\n            valid: false,\n            reason: `Public key does not match signer address`,\n          };\n        }\n      } catch {\n        return { valid: false, reason: 'Invalid signing public key' };\n      }\n\n      // Decode the unsigned transaction to compare core fields\n      let unsignedTx: any;\n      try {\n        unsignedTx = decode(unsignedBlob);\n      } catch {\n        // If we can't decode the unsigned blob, skip field comparison\n        return { valid: true };\n      }\n\n      // Verify core transaction fields match\n      const criticalFields = ['TransactionType', 'Account', 'Destination', 'Amount', 'Fee', 'Sequence'];\n      for (const field of criticalFields) {\n        if (unsignedTx[field] !== undefined && signedTx[field] !== unsignedTx[field]) {\n          // Amount and Fee might have slight differences in encoding\n          if ((field === 'Amount' || field === 'Fee') &&\n              String(unsignedTx[field]) === String(signedTx[field])) {\n            continue;\n          }\n          return {\n            valid: false,\n            reason: `Transaction field mismatch: ${field}`,\n          };\n        }\n      }\n\n      return { valid: true };\n    } catch (error) {\n      return {\n        valid: false,\n        reason: `Validation error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      };\n    }\n  }\n\n  // ==========================================================================\n  // PRIVATE HELPERS\n  // ==========================================================================\n\n  private extractAmount(tx: Transaction): string | undefined {\n    if ('Amount' in tx && typeof tx.Amount === 'string') {\n      return tx.Amount;\n    }\n    return undefined;\n  }\n\n  private extractDestination(tx: Transaction): string | undefined {\n    if ('Destination' in tx && typeof tx.Destination === 'string') {\n      return tx.Destination;\n    }\n    return undefined;\n  }\n\n  private async notifySigners(request: MultiSignRequest, type: string): Promise<void> {\n    // Placeholder - would integrate with NotificationService\n    // For now, just log\n    console.log(`[MultiSign] Notification: ${type} for request ${request.id}`);\n  }\n}\n","/**\n * Environment Variable Utilities\n *\n * Provides type-safe access to required environment variables\n * with clear error messages for missing values.\n *\n * @module utils/env\n * @version 1.0.0\n */\n\n/**\n * Error thrown when a required environment variable is missing.\n */\nexport class MissingEnvironmentVariableError extends Error {\n  constructor(\n    public readonly variableName: string,\n    public readonly description?: string\n  ) {\n    const message = description\n      ? `Required environment variable ${variableName} is not set: ${description}`\n      : `Required environment variable ${variableName} is not set`;\n    super(message);\n    this.name = 'MissingEnvironmentVariableError';\n  }\n}\n\n/**\n * Get a required environment variable.\n *\n * @param name - Environment variable name\n * @param description - Optional description for error messages\n * @returns The environment variable value\n * @throws MissingEnvironmentVariableError if not set\n *\n * @example\n * ```typescript\n * const password = getRequiredEnv('XRPL_WALLET_PASSWORD', 'Master encryption password');\n * ```\n */\nexport function getRequiredEnv(name: string, description?: string): string {\n  const value = process.env[name];\n  if (value === undefined || value === '') {\n    throw new MissingEnvironmentVariableError(name, description);\n  }\n  return value;\n}\n\n/**\n * Get an optional environment variable with a default value.\n *\n * @param name - Environment variable name\n * @param defaultValue - Default value if not set\n * @returns The environment variable value or default\n *\n * @example\n * ```typescript\n * const network = getOptionalEnv('XRPL_NETWORK', 'testnet');\n * ```\n */\nexport function getOptionalEnv(name: string, defaultValue: string): string {\n  const value = process.env[name];\n  return value !== undefined && value !== '' ? value : defaultValue;\n}\n\n/**\n * Get the wallet password from environment.\n *\n * This is a convenience function that provides a clear error message\n * specific to the wallet password requirement.\n *\n * @returns The wallet password\n * @throws MissingEnvironmentVariableError if not set\n */\nexport function getWalletPassword(): string {\n  return getRequiredEnv(\n    'XRPL_WALLET_PASSWORD',\n    'Master encryption password for wallet keystore. Set this environment variable to a strong password.'\n  );\n}\n\n/**\n * Validate required environment variables at startup.\n *\n * Call this function early in the application lifecycle to fail fast\n * if required configuration is missing.\n *\n * @param variables - Array of [name, description] tuples\n * @throws MissingEnvironmentVariableError for the first missing variable\n *\n * @example\n * ```typescript\n * validateRequiredEnv([\n *   ['XRPL_WALLET_PASSWORD', 'Master encryption password'],\n *   ['XRPL_NETWORK', 'Target XRPL network'],\n * ]);\n * ```\n */\nexport function validateRequiredEnv(variables: [string, string?][]): void {\n  for (const [name, description] of variables) {\n    getRequiredEnv(name, description);\n  }\n}\n","/**\n * wallet_create Tool Implementation\n *\n * Creates a new XRPL wallet with policy controls and encrypted key storage.\n *\n * @module tools/wallet-create\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { WalletCreateInput, WalletCreateOutput } from '../schemas/index.js';\nimport { getWalletPassword } from '../utils/env.js';\n\n/**\n * Handle wallet_create tool invocation.\n *\n * Creates a new agent wallet:\n * 1. Generate wallet keys via keystore\n * 2. Store policy configuration\n * 3. Audit wallet creation event\n * 4. Return wallet details (no private keys)\n *\n * @param context - Service instances\n * @param input - Validated wallet creation parameters\n * @returns Wallet creation result with address and public key\n */\nexport async function handleWalletCreate(\n  context: ServerContext,\n  input: WalletCreateInput\n): Promise<WalletCreateOutput> {\n  const { keystore, policyEngine, auditLogger } = context;\n\n  // Store policy configuration\n  await policyEngine.setPolicy(input.policy);\n\n  // Get wallet password (throws if not set)\n  const password = getWalletPassword();\n\n  // Create wallet with policy reference\n  const walletEntry = await keystore.createWallet(\n    input.network,\n    {\n      policyId: input.policy.policy_id,\n      policyVersion: input.policy.policy_version,\n    },\n    {\n      name: input.wallet_name,\n      password,\n      algorithm: 'ed25519', // Recommended for XRPL\n    }\n  );\n\n  // Generate master key backup (encrypted)\n  const backup = await keystore.exportBackup(\n    walletEntry.walletId,\n    password,\n    'encrypted-json'\n  );\n\n  // Audit wallet creation\n  await auditLogger.log({\n    event: 'wallet_created',\n    wallet_id: walletEntry.walletId,\n    wallet_address: walletEntry.address,\n    context: `Policy: ${input.policy.policy_id}`,\n  });\n\n  return {\n    address: walletEntry.address,\n    regular_key_public: walletEntry.publicKey,\n    master_key_backup: JSON.stringify(backup),\n    policy_id: input.policy.policy_id,\n    wallet_id: walletEntry.walletId,\n    network: input.network,\n    created_at: walletEntry.createdAt,\n  };\n}\n","/**\n * wallet_sign Tool Implementation\n *\n * Signs transactions with policy enforcement (autonomous, delayed, co-sign, or prohibited).\n *\n * @module tools/wallet-sign\n * @version 1.0.0\n */\n\nimport { decode } from 'xrpl';\nimport type { ServerContext } from '../server.js';\nimport type { WalletSignInput, WalletSignOutput } from '../schemas/index.js';\nimport { getWalletPassword } from '../utils/env.js';\n\n/**\n * Handle wallet_sign tool invocation.\n *\n * Process:\n * 1. Decode transaction to extract policy-relevant fields\n * 2. Evaluate transaction against wallet's policy\n * 3. Route based on tier:\n *    - Tier 1: Sign immediately (autonomous)\n *    - Tier 2: Queue for delayed approval\n *    - Tier 3: Request human co-signature\n *    - Tier 4: Reject with reason\n * 4. Audit all attempts (approved, pending, rejected)\n *\n * @param context - Service instances\n * @param input - Validated signing request\n * @returns Discriminated union: approved, pending, or rejected\n */\nexport async function handleWalletSign(\n  context: ServerContext,\n  input: WalletSignInput\n): Promise<WalletSignOutput> {\n  const { keystore, policyEngine, signingService, auditLogger } = context;\n\n  // Get wallet entry to find associated policy\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  // Decode transaction to extract fields\n  const decoded = decode(input.unsigned_tx);\n\n  // Evaluate policy\n  const policyResult = await policyEngine.evaluateTransaction(\n    wallet.policyId,\n    {\n      type: decoded.TransactionType,\n      destination: 'Destination' in decoded ? (decoded.Destination as string) : undefined,\n      amount_drops: 'Amount' in decoded && typeof decoded.Amount === 'string' ? decoded.Amount : undefined,\n    }\n  );\n\n  const timestamp = new Date().toISOString();\n\n  // Tier 4: Prohibited - reject immediately\n  if (policyResult.tier === 4) {\n    await auditLogger.log({\n      event: 'policy_violation',\n      wallet_id: wallet.walletId,\n      wallet_address: wallet.address,\n      transaction_type: decoded.TransactionType as any,\n      tier: 4,\n      policy_decision: 'denied',\n      context: input.context,\n    });\n\n    return {\n      status: 'rejected',\n      reason: policyResult.violations?.join('; ') || 'Transaction violates policy',\n      policy_tier: 4,\n    };\n  }\n\n  // Tier 2/3: Requires approval (not implemented yet - return pending)\n  if (policyResult.tier === 2 || policyResult.tier === 3) {\n    const approvalId = `approval_${Date.now()}_${wallet.walletId}`;\n\n    await auditLogger.log({\n      event: 'approval_requested',\n      wallet_id: wallet.walletId,\n      wallet_address: wallet.address,\n      transaction_type: decoded.TransactionType as any,\n      tier: policyResult.tier,\n      policy_decision: 'pending',\n      context: input.context,\n    });\n\n    return {\n      status: 'pending_approval',\n      approval_id: approvalId,\n      reason: policyResult.tier === 2 ? 'exceeds_autonomous_limit' : 'requires_cosign',\n      expires_at: new Date(Date.now() + 300000).toISOString(), // 5 minutes\n      policy_tier: policyResult.tier,\n    };\n  }\n\n  // Tier 1: Autonomous - sign immediately\n  const password = getWalletPassword();\n  const signed = await signingService.sign(\n    wallet.walletId,\n    input.unsigned_tx,\n    password\n  );\n\n  await auditLogger.log({\n    event: 'transaction_signed',\n    wallet_id: wallet.walletId,\n    wallet_address: wallet.address,\n    transaction_type: decoded.TransactionType as any,\n    tx_hash: signed.hash,\n    tier: 1,\n    policy_decision: 'allowed',\n    context: input.context,\n  });\n\n  // Get limit state from policy engine for accurate reporting\n  const limitState = policyEngine.getLimitState();\n  const policyInfo = policyEngine.getPolicyInfo();\n\n  // Calculate remaining limits based on current state\n  // Note: These are estimates based on the policy engine's internal tracking\n  const dailyTransactionsUsed = limitState.daily.transactionCount;\n  const hourlyTransactionsUsed = limitState.hourly.transactions.length;\n  const dailyVolumeUsedXrp = limitState.daily.totalVolumeXrp;\n\n  // Get limit configuration (default values if not available)\n  const maxTxPerDay = 100; // Default, should come from policy\n  const maxTxPerHour = 10; // Default, should come from policy\n  const maxDailyVolumeXrp = 10000; // Default, should come from policy\n\n  return {\n    status: 'approved',\n    signed_tx: signed.tx_blob,\n    tx_hash: signed.hash,\n    policy_tier: 1,\n    limits_after: {\n      daily_remaining_drops: String(Math.max(0, (maxDailyVolumeXrp - dailyVolumeUsedXrp) * 1_000_000)),\n      hourly_tx_remaining: Math.max(0, maxTxPerHour - hourlyTransactionsUsed),\n      daily_tx_remaining: Math.max(0, maxTxPerDay - dailyTransactionsUsed),\n    },\n    signed_at: timestamp,\n  };\n}\n","/**\n * wallet_balance Tool Implementation\n *\n * Queries wallet balance and status from XRPL.\n *\n * @module tools/wallet-balance\n * @version 1.0.0\n */\n\nimport { dropsToXrp } from 'xrpl';\nimport type { ServerContext } from '../server.js';\nimport type { WalletBalanceInput, WalletBalanceOutput } from '../schemas/index.js';\n\n/**\n * Handle wallet_balance tool invocation.\n *\n * Process:\n * 1. Query XRPL for account info and server info\n * 2. Calculate reserves using network-specific values\n * 3. Return balance, reserves, and available funds\n *\n * @param context - Service instances\n * @param input - Validated balance query\n * @returns Wallet balance and status\n */\nexport async function handleWalletBalance(\n  context: ServerContext,\n  input: WalletBalanceInput\n): Promise<WalletBalanceOutput> {\n  const { keystore, xrplClient } = context;\n\n  // Get wallet entry to find network and policy\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  // Query XRPL for account info\n  const accountInfo = await xrplClient.getAccountInfo(input.wallet_address);\n\n  // Query server info for current reserve requirements\n  let baseReserve = BigInt('10000000'); // 10 XRP default\n  let ownerReserve = BigInt('2000000'); // 2 XRP per object default\n\n  try {\n    const serverInfo = await xrplClient.getServerInfo();\n    if (serverInfo.validated_ledger) {\n      // Convert XRP to drops\n      baseReserve = BigInt(Math.floor(serverInfo.validated_ledger.reserve_base_xrp * 1_000_000));\n      ownerReserve = BigInt(Math.floor(serverInfo.validated_ledger.reserve_inc_xrp * 1_000_000));\n    }\n  } catch (error) {\n    // Use defaults if server info unavailable\n    console.warn('Could not fetch server info for reserves, using defaults');\n  }\n\n  // Calculate total reserve based on owner count\n  const ownerCount = BigInt(accountInfo.ownerCount || 0);\n  const totalReserve = baseReserve + ownerReserve * ownerCount;\n\n  const balance = BigInt(accountInfo.balance);\n  const available = balance > totalReserve ? balance - totalReserve : BigInt(0);\n\n  return {\n    address: input.wallet_address,\n    balance_drops: balance.toString(),\n    balance_xrp: dropsToXrp(balance.toString()),\n    reserve_drops: totalReserve.toString(),\n    available_drops: available.toString(),\n    sequence: accountInfo.sequence,\n    regular_key_set: !!(accountInfo as any).regularKey,\n    signer_list: null, // SignerList would require separate account_objects query\n    policy_id: wallet.policyId,\n    network: wallet.network,\n    queried_at: new Date().toISOString(),\n  };\n}\n","/**\n * wallet_policy_check Tool Implementation\n *\n * Dry-run policy evaluation without signing.\n *\n * @module tools/wallet-policy-check\n * @version 1.0.0\n */\n\nimport { decode } from 'xrpl';\nimport type { ServerContext } from '../server.js';\nimport type { WalletPolicyCheckInput, WalletPolicyCheckOutput } from '../schemas/index.js';\n\n/**\n * Handle wallet_policy_check tool invocation.\n *\n * Evaluates a transaction against policy without signing.\n * Useful for checking if a transaction will be approved before building it.\n *\n * @param context - Service instances\n * @param input - Validated policy check request\n * @returns Policy evaluation result\n */\nexport async function handleWalletPolicyCheck(\n  context: ServerContext,\n  input: WalletPolicyCheckInput\n): Promise<WalletPolicyCheckOutput> {\n  const { keystore, policyEngine } = context;\n\n  // Get wallet entry to find associated policy\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  // Decode transaction to extract fields\n  const decoded = decode(input.unsigned_tx);\n\n  // Evaluate policy\n  const policyResult = await policyEngine.evaluateTransaction(\n    wallet.policyId,\n    {\n      type: decoded.TransactionType,\n      destination: 'Destination' in decoded ? (decoded.Destination as string) : undefined,\n      amount_drops: 'Amount' in decoded && typeof decoded.Amount === 'string' ? decoded.Amount : undefined,\n    }\n  );\n\n  // Get current limit status from policy engine\n  const limitState = policyEngine.getLimitState();\n\n  // Calculate actual limit values\n  // Note: Max values should ideally come from the policy configuration\n  const maxTxPerHour = 50; // Default from testnet policy\n  const maxTxPerDay = 200; // Default from testnet policy\n  const maxDailyVolumeXrp = 10000; // Default from testnet policy\n\n  const limits = {\n    daily_volume_used_drops: String(Math.floor(limitState.daily.totalVolumeXrp * 1_000_000)),\n    daily_volume_limit_drops: String(maxDailyVolumeXrp * 1_000_000),\n    hourly_tx_used: limitState.hourly.transactions.length,\n    hourly_tx_limit: maxTxPerHour,\n    daily_tx_used: limitState.daily.transactionCount,\n    daily_tx_limit: maxTxPerDay,\n  };\n\n  return {\n    would_approve: policyResult.tier === 1,\n    tier: policyResult.tier,\n    warnings: policyResult.warnings || [],\n    violations: policyResult.violations || [],\n    limits,\n    transaction_details: {\n      type: decoded.TransactionType,\n      destination: 'Destination' in decoded ? (decoded.Destination as string) : undefined,\n      amount_drops: 'Amount' in decoded && typeof decoded.Amount === 'string' ? decoded.Amount : undefined,\n    },\n  };\n}\n","/**\n * wallet_rotate Tool Implementation\n *\n * Rotates the agent wallet signing key by setting a new regular key on-chain.\n *\n * Security Process:\n * 1. Generate new key pair locally\n * 2. Build SetRegularKey transaction with new public key\n * 3. Sign with current key\n * 4. Submit to XRPL and wait for validation\n * 5. Update keystore metadata\n * 6. Audit the rotation event\n *\n * @module tools/wallet-rotate\n * @version 1.0.0\n */\n\nimport { Wallet, type SetRegularKey } from 'xrpl';\nimport type { ServerContext } from '../server.js';\nimport type { WalletRotateInput, WalletRotateOutput } from '../schemas/index.js';\nimport { getWalletPassword } from '../utils/env.js';\n\n/**\n * Handle wallet_rotate tool invocation.\n *\n * SECURITY: This is a CRITICAL operation. After rotation:\n * - The old regular key is disabled on-chain\n * - Only the new regular key can sign transactions\n * - The master key remains unchanged (for recovery)\n *\n * @param context - Service instances\n * @param input - Validated rotation request\n * @returns Rotation result with new public key and transaction hash\n */\nexport async function handleWalletRotate(\n  context: ServerContext,\n  input: WalletRotateInput\n): Promise<WalletRotateOutput> {\n  const { keystore, signingService, xrplClient, auditLogger } = context;\n\n  // Step 1: Get wallet entry\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  // Step 2: Generate new regular key pair\n  // Using Ed25519 for better performance and security\n  const newRegularKeyWallet = Wallet.generate();\n\n  // Step 3: Get current account info for sequence number\n  const accountInfo = await xrplClient.getAccountInfo(input.wallet_address);\n\n  // Step 4: Get current fee\n  const fee = await xrplClient.getFee();\n\n  // Step 5: Build SetRegularKey transaction\n  const setRegularKeyTx: SetRegularKey = {\n    TransactionType: 'SetRegularKey',\n    Account: input.wallet_address,\n    RegularKey: newRegularKeyWallet.classicAddress,\n    Sequence: accountInfo.sequence,\n    Fee: fee,\n  };\n\n  // Step 6: Sign with current wallet key\n  const password = getWalletPassword();\n  const signed = await signingService.sign(wallet.walletId, setRegularKeyTx, password);\n\n  // Step 7: Submit to XRPL and wait for validation\n  const result = await xrplClient.submitSignedTransaction(signed.tx_blob, {\n    waitForValidation: true,\n    timeout: 30000, // 30 seconds\n  });\n\n  if (!result.validated) {\n    throw new Error(`SetRegularKey transaction not validated: ${result.resultCode}`);\n  }\n\n  const timestamp = new Date().toISOString();\n\n  // Step 8: Store the new regular key in the keystore\n  // This allows the signing service to use the regular key instead of master key\n  if ('storeRegularKey' in keystore) {\n    const keystoreWithRegularKey = keystore as typeof keystore & {\n      storeRegularKey: (\n        walletId: string,\n        seed: string,\n        address: string,\n        password: string\n      ) => Promise<void>;\n    };\n\n    await keystoreWithRegularKey.storeRegularKey(\n      wallet.walletId,\n      newRegularKeyWallet.seed!,\n      newRegularKeyWallet.classicAddress,\n      password\n    );\n  }\n\n  // Step 9: Update wallet metadata to reflect the rotation\n  await keystore.updateMetadata(wallet.walletId, {\n    hasRegularKey: true,\n    lastUsedAt: timestamp,\n    customData: {\n      ...(wallet as any).customData,\n      regularKeyAddress: newRegularKeyWallet.classicAddress,\n      regularKeyPublic: newRegularKeyWallet.publicKey,\n      lastRotatedAt: timestamp,\n      rotationReason: input.reason || 'Manual rotation',\n      rotationTxHash: result.hash,\n    },\n  });\n\n  // Step 10: Audit key rotation\n  await auditLogger.log({\n    event: 'key_rotated',\n    wallet_id: wallet.walletId,\n    wallet_address: wallet.address,\n    context: JSON.stringify({\n      reason: input.reason || 'Manual rotation',\n      new_regular_key_address: newRegularKeyWallet.classicAddress,\n      rotation_tx_hash: result.hash,\n    }),\n  });\n\n  return {\n    status: 'rotated',\n    new_regular_key_public: newRegularKeyWallet.publicKey,\n    old_key_disabled: true,\n    rotation_tx_hash: result.hash,\n    rotated_at: timestamp,\n  };\n}\n","/**\n * wallet_list Tool Implementation\n *\n * Lists all managed wallets.\n *\n * @module tools/wallet-list\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { WalletListInput, WalletListOutput } from '../schemas/index.js';\n\n/**\n * Handle wallet_list tool invocation.\n *\n * Returns all wallets managed by this MCP instance,\n * optionally filtered by network.\n *\n * @param context - Service instances\n * @param input - Validated list request (optional network filter)\n * @returns List of wallet summaries\n */\nexport async function handleWalletList(\n  context: ServerContext,\n  input: WalletListInput\n): Promise<WalletListOutput> {\n  const { keystore } = context;\n\n  // Query keystore for wallets\n  const walletSummaries = await keystore.listWallets(input.network);\n\n  // Map to output format\n  const wallets = walletSummaries.map((w) => ({\n    wallet_id: w.walletId,\n    address: w.address,\n    name: w.name,\n    network: w.network,\n    policy_id: w.policyId,\n    created_at: w.createdAt,\n  }));\n\n  return {\n    wallets,\n    total: wallets.length,\n  };\n}\n","/**\n * wallet_history Tool Implementation\n *\n * Retrieves transaction history from XRPL.\n *\n * @module tools/wallet-history\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { WalletHistoryInput, WalletHistoryOutput, TransactionHistoryEntry } from '../schemas/index.js';\n\n/**\n * Handle wallet_history tool invocation.\n *\n * Queries XRPL for transaction history and returns\n * formatted entries with available information.\n *\n * @param context - Service instances\n * @param input - Validated history request\n * @returns Transaction history entries\n */\nexport async function handleWalletHistory(\n  context: ServerContext,\n  input: WalletHistoryInput\n): Promise<WalletHistoryOutput> {\n  const { keystore, xrplClient } = context;\n\n  // Get wallet entry to find network\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  // Query XRPL for transaction history using getAccountTransactions\n  const rawTransactions = await xrplClient.getAccountTransactions(\n    input.wallet_address,\n    {\n      limit: input.limit || 20,\n    }\n  );\n\n  // Map to output format\n  const transactions: TransactionHistoryEntry[] = rawTransactions.map((tx: any) => {\n    // Extract transaction details\n    const txData = tx.tx || tx;\n    const meta = tx.meta || {};\n\n    // Determine transaction result\n    const resultCode = typeof meta === 'object' && meta.TransactionResult\n      ? meta.TransactionResult\n      : 'unknown';\n\n    return {\n      hash: txData.hash || tx.hash || '',\n      type: txData.TransactionType || 'Unknown',\n      amount_drops: 'Amount' in txData && typeof txData.Amount === 'string'\n        ? txData.Amount\n        : undefined,\n      destination: 'Destination' in txData\n        ? (txData.Destination as string)\n        : undefined,\n      timestamp: txData.date\n        ? new Date((txData.date + 946684800) * 1000).toISOString() // XRPL epoch starts 2000-01-01\n        : new Date().toISOString(),\n      policy_tier: 1 as const, // Historical transactions don't have policy tier info\n      context: undefined, // Would need to cross-reference with audit log\n      ledger_index: txData.ledger_index || tx.ledger_index || 0,\n      success: resultCode === 'tesSUCCESS',\n    };\n  });\n\n  // Note: XRPL pagination uses markers, but getAccountTransactions\n  // may not return a marker in all cases\n  return {\n    address: input.wallet_address,\n    transactions,\n    marker: undefined, // Pagination marker if available\n    has_more: transactions.length >= (input.limit || 20),\n  };\n}\n","/**\n * wallet_fund Tool Implementation\n *\n * Funds wallet from testnet/devnet faucet.\n *\n * @module tools/wallet-fund\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { WalletFundInput, WalletFundOutput } from '../schemas/index.js';\n\n/**\n * Handle wallet_fund tool invocation.\n *\n * Requests test XRP from faucet for testnet/devnet wallets.\n * Only available on non-mainnet networks.\n *\n * @param context - Service instances\n * @param input - Validated fund request\n * @returns Funding result\n */\nexport async function handleWalletFund(\n  context: ServerContext,\n  input: WalletFundInput\n): Promise<WalletFundOutput> {\n  const { xrplClient, auditLogger } = context;\n\n  // Ensure not on mainnet\n  if (input.network === 'mainnet') {\n    throw new Error('Faucet not available on mainnet');\n  }\n\n  try {\n    // Request funding from faucet\n    const fundResult = await xrplClient.fundWallet(input.network, input.wallet_address);\n\n    // Audit funding event\n    await auditLogger.log({\n      event: 'wallet_created', // Using existing event type\n      seq: 0,\n      timestamp: new Date().toISOString(),\n      wallet_address: input.wallet_address,\n      context: `Funded from ${input.network} faucet`,\n      prev_hash: '',\n      hash: '',\n    });\n\n    return {\n      status: 'funded',\n      amount_drops: fundResult.amount,\n      tx_hash: fundResult.hash,\n      new_balance_drops: fundResult.balance,\n    };\n  } catch (error) {\n    return {\n      status: 'failed',\n      error: error instanceof Error ? error.message : 'Unknown faucet error',\n    };\n  }\n}\n","/**\n * policy_set Tool Implementation\n *\n * Updates wallet policy configuration with proper audit trail.\n *\n * Security Process:\n * 1. Validate new policy structure\n * 2. Verify wallet exists and get current policy\n * 3. Signal policy engine about the update\n * 4. Update keystore metadata with new policy reference\n * 5. Audit the policy change\n *\n * NOTE: In production, policy changes should require human approval.\n * Currently implements auto-approval for development purposes.\n *\n * @module tools/policy-set\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { PolicySetInput, PolicySetOutput } from '../schemas/index.js';\n\n/**\n * Handle policy_set tool invocation.\n *\n * Updates policy for an existing wallet.\n *\n * SECURITY CONSIDERATIONS:\n * - Policy changes affect what transactions can be signed autonomously\n * - Relaxing policies (e.g., increasing limits) is higher risk\n * - Tightening policies (e.g., decreasing limits) is lower risk\n * - All changes are audited with full before/after state\n *\n * @param context - Service instances\n * @param input - Validated policy update request\n * @returns Policy update result\n */\nexport async function handlePolicySet(\n  context: ServerContext,\n  input: PolicySetInput\n): Promise<PolicySetOutput> {\n  const { keystore, policyEngine, auditLogger } = context;\n\n  // Step 1: Get wallet entry to verify it exists\n  const wallets = await keystore.listWallets();\n  const wallet = wallets.find((w) => w.address === input.wallet_address);\n\n  if (!wallet) {\n    throw new Error(`Wallet not found: ${input.wallet_address}`);\n  }\n\n  const previousPolicyId = wallet.policyId;\n  const timestamp = new Date().toISOString();\n\n  // Step 2: Validate the new policy structure\n  // The Zod schema already validated the input, but we do additional checks\n  if (!input.policy.policy_id) {\n    throw new Error('Policy must have a policy_id');\n  }\n  if (!input.policy.policy_version) {\n    throw new Error('Policy must have a policy_version');\n  }\n\n  // Step 3: Analyze policy change risk\n  const changeAnalysis = analyzePolicyChange(previousPolicyId, input.policy);\n\n  // Step 4: PolicyEngine is immutable by design (ADR-003 security requirement).\n  // Instead of calling policyEngine.setPolicy() which throws, we:\n  // 1. Store the policy update request in wallet metadata\n  // 2. Return a status indicating the change was recorded\n  // 3. Log the request for the administrator to handle\n  //\n  // In production, policy changes could trigger:\n  // - A notification to the administrator\n  // - A scheduled server restart\n  // - A manual approval workflow\n  //\n  // Note: The wallet metadata will be updated with the new policy reference,\n  // but the PolicyEngine won't use it until the server is restarted.\n  console.log(\n    `[PolicySet] Policy update requested for wallet ${wallet.walletId}: ` +\n      `${previousPolicyId} -> ${input.policy.policy_id} v${input.policy.policy_version}`\n  );\n\n  // Step 5: Update wallet metadata with new policy reference\n  await keystore.updateMetadata(wallet.walletId, {\n    customData: {\n      ...(wallet as any).customData,\n      policyId: input.policy.policy_id,\n      policyVersion: input.policy.policy_version,\n      policyUpdatedAt: timestamp,\n      policyUpdateReason: input.reason,\n      previousPolicyId,\n    },\n  });\n\n  // Step 6: Audit policy change\n  await auditLogger.log({\n    event: 'policy_updated',\n    wallet_id: wallet.walletId,\n    wallet_address: wallet.address,\n    context: JSON.stringify({\n      reason: input.reason,\n      previous_policy_id: previousPolicyId,\n      new_policy_id: input.policy.policy_id,\n      new_policy_version: input.policy.policy_version,\n      change_analysis: changeAnalysis,\n    }),\n  });\n\n  // Step 8: Return status\n  // Note: Policy metadata has been updated, but the PolicyEngine is immutable.\n  // The actual policy behavior will change after a server restart.\n  //\n  // Risk-based approval logic (future enhancement):\n  // - Low risk (tightening): auto-approve on restart\n  // - Medium risk: delayed approval (24h window)\n  // - High risk (loosening): require human approval\n\n  return {\n    status: 'applied',\n    previous_policy_id: previousPolicyId,\n    new_policy_id: input.policy.policy_id,\n    applied_at: timestamp,\n    // Note: The policy metadata is updated, but the PolicyEngine won't use\n    // the new policy until the server is restarted (immutability requirement).\n  };\n}\n\n/**\n * Analyze policy change to determine risk level.\n *\n * @param previousPolicyId - Previous policy identifier\n * @param newPolicy - New policy configuration\n * @returns Analysis of the policy change\n */\nfunction analyzePolicyChange(\n  previousPolicyId: string,\n  newPolicy: PolicySetInput['policy']\n): {\n  risk_level: 'low' | 'medium' | 'high';\n  changes: string[];\n} {\n  const changes: string[] = [];\n\n  // Without access to the old policy details, we can only note the change\n  changes.push(`Policy ID changed from \"${previousPolicyId}\" to \"${newPolicy.policy_id}\"`);\n  changes.push(`Policy version: ${newPolicy.policy_version}`);\n\n  // Check for potentially risky configurations\n  let riskLevel: 'low' | 'medium' | 'high' = 'low';\n\n  // High limits are higher risk\n  const maxAmountDrops = BigInt(newPolicy.limits.max_amount_per_tx_drops);\n  const maxDailyDrops = BigInt(newPolicy.limits.max_daily_volume_drops);\n\n  // 10,000 XRP per transaction is high risk\n  if (maxAmountDrops > BigInt('10000000000')) {\n    changes.push(`High per-transaction limit: ${Number(maxAmountDrops) / 1_000_000} XRP`);\n    riskLevel = 'high';\n  }\n\n  // 100,000 XRP daily is high risk\n  if (maxDailyDrops > BigInt('100000000000')) {\n    changes.push(`High daily volume limit: ${Number(maxDailyDrops) / 1_000_000} XRP`);\n    riskLevel = 'high';\n  }\n\n  // Open destination mode is higher risk\n  if (newPolicy.destinations.mode === 'open') {\n    changes.push('Destination mode is \"open\" - any destination allowed');\n    if (riskLevel !== 'high') riskLevel = 'medium';\n  }\n\n  // Many transaction types allowed is higher risk\n  if (newPolicy.transaction_types.allowed.length > 10) {\n    changes.push(`Many transaction types allowed: ${newPolicy.transaction_types.allowed.length}`);\n    if (riskLevel !== 'high') riskLevel = 'medium';\n  }\n\n  return {\n    risk_level: riskLevel,\n    changes,\n  };\n}\n","/**\n * tx_submit Tool Implementation\n *\n * Submits signed transaction to XRPL.\n *\n * @module tools/tx-submit\n * @version 1.0.0\n */\n\nimport type { ServerContext } from '../server.js';\nimport type { TxSubmitInput, TxSubmitOutput } from '../schemas/index.js';\n\n/**\n * Handle tx_submit tool invocation.\n *\n * Submits a signed transaction blob to the XRPL network\n * and optionally waits for validation.\n *\n * @param context - Service instances\n * @param input - Validated submission request\n * @returns Submission result\n */\nexport async function handleTxSubmit(\n  context: ServerContext,\n  input: TxSubmitInput\n): Promise<TxSubmitOutput> {\n  const { xrplClient, auditLogger } = context;\n\n  const submittedAt = new Date().toISOString();\n\n  // Submit transaction to XRPL\n  const result = await xrplClient.submitTransaction(\n    input.network,\n    input.signed_tx,\n    input.wait_for_validation ?? true\n  );\n\n  // Audit submission\n  await auditLogger.log({\n    event: 'transaction_submitted',\n    seq: 0,\n    timestamp: submittedAt,\n    tx_hash: result.hash,\n    policy_decision: result.validated ? 'allowed' : 'pending',\n    prev_hash: '',\n    hash: '',\n  });\n\n  return {\n    tx_hash: result.hash,\n    result: {\n      result_code: result.resultCode,\n      result_message: result.resultMessage,\n      success: result.resultCode === 'tesSUCCESS',\n    },\n    ledger_index: result.ledgerIndex,\n    submitted_at: submittedAt,\n    validated_at: result.validated ? new Date().toISOString() : undefined,\n  };\n}\n","/**\n * tx_decode Tool Implementation\n *\n * Decodes transaction blob for inspection.\n *\n * @module tools/tx-decode\n * @version 1.0.0\n */\n\nimport { decode, hashes } from 'xrpl';\nimport type { ServerContext } from '../server.js';\nimport type { TxDecodeInput, TxDecodeOutput } from '../schemas/index.js';\n\n/**\n * Handle tx_decode tool invocation.\n *\n * Decodes a hex-encoded transaction blob into readable JSON.\n * Works with both signed and unsigned transactions.\n *\n * @param context - Service instances\n * @param input - Validated decode request\n * @returns Decoded transaction fields\n */\nexport async function handleTxDecode(\n  _context: ServerContext,\n  input: TxDecodeInput\n): Promise<TxDecodeOutput> {\n  // Decode transaction blob\n  const decoded = decode(input.tx_blob);\n\n  // Check if transaction is signed (has TxnSignature or Signers)\n  const isSigned = 'TxnSignature' in decoded || 'Signers' in decoded;\n\n  // Extract signing public key if signed\n  const signingPublicKey = 'SigningPubKey' in decoded && typeof decoded.SigningPubKey === 'string'\n    ? decoded.SigningPubKey\n    : undefined;\n\n  // Calculate hash if signed\n  let hash: string | undefined;\n  if (isSigned) {\n    try {\n      hash = hashes.hashSignedTx(input.tx_blob);\n    } catch {\n      // Hash calculation failed - might be malformed\n      hash = undefined;\n    }\n  }\n\n  return {\n    transaction: decoded as any, // Type assertion - decoded tx matches schema\n    hash,\n    is_signed: isSigned,\n    signing_public_key: signingPublicKey,\n  };\n}\n","/**\n * MCP Server Implementation\n *\n * Main MCP server setup using @modelcontextprotocol/sdk.\n * Registers all wallet operation tools and wires up service dependencies.\n *\n * @module server\n * @version 1.0.0\n */\n\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n  type CallToolRequest,\n  type Tool,\n} from '@modelcontextprotocol/sdk/types.js';\n\n// Import all tool implementations\nimport { handleWalletCreate } from './tools/wallet-create.js';\nimport { handleWalletSign } from './tools/wallet-sign.js';\nimport { handleWalletBalance } from './tools/wallet-balance.js';\nimport { handleWalletPolicyCheck } from './tools/wallet-policy-check.js';\nimport { handleWalletRotate } from './tools/wallet-rotate.js';\nimport { handleWalletList } from './tools/wallet-list.js';\nimport { handleWalletHistory } from './tools/wallet-history.js';\nimport { handleWalletFund } from './tools/wallet-fund.js';\nimport { handlePolicySet } from './tools/policy-set.js';\nimport { handleTxSubmit } from './tools/tx-submit.js';\nimport { handleTxDecode } from './tools/tx-decode.js';\n\n// Import service dependencies\nimport type { KeystoreProvider } from './keystore/interface.js';\nimport type { PolicyEngine } from './policy/engine.js';\nimport type { SigningService } from './signing/service.js';\nimport type { AuditLogger } from './audit/logger.js';\nimport type { XRPLClientWrapper } from './xrpl/client.js';\n\n// Import zod for type inference\nimport { z } from 'zod';\n\n// Import schemas for validation\nimport { InputSchemas, ErrorResponseSchema, type ErrorResponse } from './schemas/index.js';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Server context holding all service instances.\n */\nexport interface ServerContext {\n  keystore: KeystoreProvider;\n  policyEngine: PolicyEngine;\n  signingService: SigningService;\n  auditLogger: AuditLogger;\n  xrplClient: XRPLClientWrapper;\n}\n\n/**\n * Server configuration options.\n */\nexport interface ServerConfig {\n  /** Server name (for MCP identification) */\n  name?: string;\n  /** Server version */\n  version?: string;\n}\n\n// ============================================================================\n// TOOL DEFINITIONS\n// ============================================================================\n\n/**\n * Tool metadata for MCP registration.\n * Defines all available tools with their schemas and descriptions.\n */\nconst TOOLS: Tool[] = [\n  {\n    name: 'wallet_create',\n    description: 'Create a new XRPL wallet with policy controls. Generates keys locally with encrypted storage.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        network: { type: 'string', enum: ['mainnet', 'testnet', 'devnet'] },\n        policy: { type: 'object' },\n        wallet_name: { type: 'string' },\n        funding_source: { type: 'string' },\n        initial_funding_drops: { type: 'string' },\n      },\n      required: ['network', 'policy'],\n    },\n  },\n  {\n    name: 'wallet_sign',\n    description: 'Sign a transaction with policy enforcement. Returns signed blob, pending approval, or rejection.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        unsigned_tx: { type: 'string' },\n        context: { type: 'string' },\n      },\n      required: ['wallet_address', 'unsigned_tx'],\n    },\n  },\n  {\n    name: 'wallet_balance',\n    description: 'Query wallet balance, reserves, and status. Returns current state from XRPL.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n      },\n      required: ['wallet_address'],\n    },\n  },\n  {\n    name: 'wallet_policy_check',\n    description: 'Dry-run policy evaluation without signing. Check if a transaction would be approved.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        unsigned_tx: { type: 'string' },\n      },\n      required: ['wallet_address', 'unsigned_tx'],\n    },\n  },\n  {\n    name: 'wallet_rotate',\n    description: 'Rotate the agent wallet signing key. Disables old key and generates new one.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        reason: { type: 'string' },\n      },\n      required: ['wallet_address'],\n    },\n  },\n  {\n    name: 'wallet_list',\n    description: 'List all managed wallets, optionally filtered by network.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        network: { type: 'string', enum: ['mainnet', 'testnet', 'devnet'] },\n      },\n    },\n  },\n  {\n    name: 'wallet_history',\n    description: 'Retrieve transaction history for audit and analysis.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        limit: { type: 'number', minimum: 1, maximum: 100 },\n        marker: { type: 'string' },\n      },\n      required: ['wallet_address'],\n    },\n  },\n  {\n    name: 'wallet_fund',\n    description: 'Fund wallet from testnet/devnet faucet. Only available on test networks.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        network: { type: 'string', enum: ['testnet', 'devnet'] },\n      },\n      required: ['wallet_address', 'network'],\n    },\n  },\n  {\n    name: 'policy_set',\n    description: 'Update wallet policy (requires approval). Changes security constraints.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        wallet_address: { type: 'string' },\n        policy: { type: 'object' },\n        reason: { type: 'string' },\n      },\n      required: ['wallet_address', 'policy', 'reason'],\n    },\n  },\n  {\n    name: 'tx_submit',\n    description: 'Submit signed transaction to XRPL network.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        signed_tx: { type: 'string' },\n        network: { type: 'string', enum: ['mainnet', 'testnet', 'devnet'] },\n        wait_for_validation: { type: 'boolean' },\n      },\n      required: ['signed_tx', 'network'],\n    },\n  },\n  {\n    name: 'tx_decode',\n    description: 'Decode transaction blob for inspection. Works with signed or unsigned transactions.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        tx_blob: { type: 'string' },\n      },\n      required: ['tx_blob'],\n    },\n  },\n];\n\n// ============================================================================\n// ERROR HANDLING\n// ============================================================================\n\n/**\n * Convert an error to MCP error response format.\n */\nfunction formatError(error: unknown): ErrorResponse {\n  const timestamp = new Date().toISOString();\n\n  // If already an ErrorResponse, return it\n  if (\n    typeof error === 'object' &&\n    error !== null &&\n    'code' in error &&\n    'message' in error &&\n    'timestamp' in error\n  ) {\n    return error as ErrorResponse;\n  }\n\n  // Handle Error instances\n  if (error instanceof Error) {\n    // Only include stack traces in development mode (not in production)\n    const isDevelopment = process.env['NODE_ENV'] !== 'production';\n\n    // Log full error internally for debugging\n    console.error('[Server] Internal error:', error.message);\n    if (isDevelopment) {\n      console.error(error.stack);\n    }\n\n    return {\n      code: 'INTERNAL_ERROR',\n      message: error.message,\n      // Only include stack trace in development to avoid information disclosure\n      details: isDevelopment ? { stack: error.stack } : undefined,\n      timestamp,\n    };\n  }\n\n  // Handle unknown error types\n  return {\n    code: 'INTERNAL_ERROR',\n    message: 'An unknown error occurred',\n    // Don't expose raw error details in production\n    details: process.env['NODE_ENV'] !== 'production' ? { error: String(error) } : undefined,\n    timestamp,\n  };\n}\n\n// ============================================================================\n// SERVER IMPLEMENTATION\n// ============================================================================\n\n/**\n * Create and initialize the MCP server.\n *\n * @param context - Service instances (keystore, policy, signing, audit, xrpl)\n * @param config - Server configuration options\n * @returns Configured MCP server instance\n */\nexport function createServer(context: ServerContext, config?: ServerConfig): Server {\n  const server = new Server(\n    {\n      name: config?.name ?? 'xrpl-agent-wallet-mcp',\n      version: config?.version ?? '0.1.0',\n    },\n    {\n      capabilities: {\n        tools: {},\n      },\n    }\n  );\n\n  // Register tools list handler\n  server.setRequestHandler(ListToolsRequestSchema, async () => ({\n    tools: TOOLS,\n  }));\n\n  // Register tool call handler\n  server.setRequestHandler(CallToolRequestSchema, async (request: CallToolRequest) => {\n    const { name, arguments: args } = request.params;\n\n    try {\n      // Validate tool exists\n      const toolDef = TOOLS.find((t) => t.name === name);\n      if (!toolDef) {\n        throw new Error(`Unknown tool: ${name}`);\n      }\n\n      // Get input schema for validation\n      const inputSchema = InputSchemas[name as keyof typeof InputSchemas];\n      if (!inputSchema) {\n        throw new Error(`No schema found for tool: ${name}`);\n      }\n\n      // Validate input against Zod schema\n      const validatedInput = inputSchema.parse(args);\n\n      // Route to appropriate handler with proper type assertions\n      let result: unknown;\n      switch (name) {\n        case 'wallet_create':\n          result = await handleWalletCreate(context, validatedInput as z.infer<typeof InputSchemas.wallet_create>);\n          break;\n        case 'wallet_sign':\n          result = await handleWalletSign(context, validatedInput as z.infer<typeof InputSchemas.wallet_sign>);\n          break;\n        case 'wallet_balance':\n          result = await handleWalletBalance(context, validatedInput as z.infer<typeof InputSchemas.wallet_balance>);\n          break;\n        case 'wallet_policy_check':\n          result = await handleWalletPolicyCheck(context, validatedInput as z.infer<typeof InputSchemas.wallet_policy_check>);\n          break;\n        case 'wallet_rotate':\n          result = await handleWalletRotate(context, validatedInput as z.infer<typeof InputSchemas.wallet_rotate>);\n          break;\n        case 'wallet_list':\n          result = await handleWalletList(context, validatedInput as z.infer<typeof InputSchemas.wallet_list>);\n          break;\n        case 'wallet_history':\n          result = await handleWalletHistory(context, validatedInput as z.infer<typeof InputSchemas.wallet_history>);\n          break;\n        case 'wallet_fund':\n          result = await handleWalletFund(context, validatedInput as z.infer<typeof InputSchemas.wallet_fund>);\n          break;\n        case 'policy_set':\n          result = await handlePolicySet(context, validatedInput as z.infer<typeof InputSchemas.policy_set>);\n          break;\n        case 'tx_submit':\n          result = await handleTxSubmit(context, validatedInput as z.infer<typeof InputSchemas.tx_submit>);\n          break;\n        case 'tx_decode':\n          result = await handleTxDecode(context, validatedInput as z.infer<typeof InputSchemas.tx_decode>);\n          break;\n        default:\n          throw new Error(`Handler not implemented for tool: ${name}`);\n      }\n\n      return {\n        content: [\n          {\n            type: 'text',\n            text: JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    } catch (error) {\n      const errorResponse = formatError(error);\n\n      return {\n        content: [\n          {\n            type: 'text',\n            text: JSON.stringify(errorResponse, null, 2),\n          },\n        ],\n        isError: true,\n      };\n    }\n  });\n\n  return server;\n}\n\n/**\n * Run the MCP server with stdio transport.\n *\n * @param context - Service instances\n * @param config - Server configuration\n */\nexport async function runServer(context: ServerContext, config?: ServerConfig): Promise<void> {\n  const server = createServer(context, config);\n  const transport = new StdioServerTransport();\n\n  await server.connect(transport);\n\n  // Log server start to audit\n  await context.auditLogger.log({\n    event: 'server_started',\n  });\n\n  console.error('XRPL Agent Wallet MCP Server running on stdio');\n}\n"]}